import{r as o,j as e}from"./main-IxhAqWnM.js";import{h as v}from"./api-DmpwVkjQ.js";function N({open:a,onClose:i,onCreated:n}){const[t,r]=o.useState({name:"",domain:"",city:"",state:"",country:"US"}),[c,d]=o.useState(!1);return a?e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("div",{className:"rounded-2xl bg-white w-full max-w-lg p-5 space-y-3",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Add Company"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{className:"border rounded p-2 col-span-2",placeholder:"Company Name*",value:t.name,onChange:s=>r({...t,name:s.target.value})}),e.jsx("input",{className:"border rounded p-2 col-span-2",placeholder:"Domain (optional)",value:t.domain,onChange:s=>r({...t,domain:s.target.value})}),e.jsx("input",{className:"border rounded p-2",placeholder:"City",value:t.city,onChange:s=>r({...t,city:s.target.value})}),e.jsx("input",{className:"border rounded p-2",placeholder:"State",value:t.state,onChange:s=>r({...t,state:s.target.value})}),e.jsx("input",{className:"border rounded p-2 col-span-2",placeholder:"Country (default US)",value:t.country,onChange:s=>r({...t,country:s.target.value})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"px-3 py-1.5 rounded border",onClick:i,children:"Cancel"}),e.jsx("button",{disabled:c||!t.name,className:"px-3 py-1.5 rounded border bg-slate-900 text-white",onClick:async()=>{try{d(!0);const s=await v({name:t.name,domain:t.domain||void 0,city:t.city||void 0,state:t.state||void 0,country:t.country||"US"});n(String((s==null?void 0:s.company_id)||""),t.name)}finally{d(!1),i()}},children:"Create"})]})]})}):null}const h=({children:a})=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-white/70 border border-white/60 shadow-sm",children:a});function g({c:a,active:i,onClick:n}){var t,r,c;return e.jsxs("button",{onClick:n,className:`w-full text-left rounded-2xl p-4 mb-3 transition shadow hover:shadow-lg border ${i?"border-slate-300 bg-white":"border-white/40 bg-gradient-to-br from-white/80 to-white/60 backdrop-blur"}`,children:[e.jsx("div",{className:"font-semibold",children:a.name}),e.jsx("div",{className:"text-xs text-slate-500",children:"Shipments 12M"}),e.jsx("div",{className:"text-lg font-extrabold",children:(((t=a.kpis)==null?void 0:t.shipments12m)??0).toLocaleString()}),e.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:["Last: ",((r=a.kpis)==null?void 0:r.lastActivity)||"—"]}),e.jsx("div",{className:"mt-2 flex gap-1 flex-wrap",children:(((c=a.kpis)==null?void 0:c.originsTop)||[]).slice(0,3).map(d=>e.jsx(h,{children:d},d))})]})}function j({tabs:a,value:i,onChange:n}){return e.jsx("div",{className:"flex gap-2 border-b border-white/60 mb-4",children:a.map(t=>e.jsx("button",{onClick:()=>n(t),className:`px-3 py-2 text-sm ${i===t?"border-b-2 border-slate-900 font-semibold":"text-slate-500"}`,children:t},t))})}function y({companies:a,onAdd:i}){var m,u;const[n,t]=o.useState((m=a[0])==null?void 0:m.id),[r,c]=o.useState(""),d=o.useMemo(()=>{const l=r.trim().toLowerCase();return l?a.filter(b=>String(b.name||"").toLowerCase().includes(l)):a},[a,r]),s=o.useMemo(()=>a.find(l=>l.id===n),[a,n]),[p,x]=o.useState("Overview");return e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row gap-4 px-5 md:px-5",children:[e.jsx("aside",{className:"w-full lg:w-[320px] xl:w-[360px] shrink-0",children:e.jsxs("div",{className:"rounded-3xl p-4 bg-white/80 backdrop-blur border border-white/50 shadow-xl",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Companies"}),e.jsx("button",{onClick:i,className:"text-xs px-2 py-1 rounded-lg border bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:"Add"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{value:r,onChange:l=>c(l.target.value),placeholder:"Search companies…",className:"w-full text-sm border rounded-lg px-3 py-2 bg-white/70"})}),e.jsxs("div",{className:"max-h-[70vh] overflow-auto pr-1",children:[d.map(l=>e.jsx(g,{c:l,active:l.id===n,onClick:()=>{t(l.id),x("Overview")}},l.id)),d.length===0&&e.jsxs("div",{className:"text-xs text-slate-500 py-6 text-center",children:["No companies match “",r,"”."]})]})]})}),e.jsx("main",{className:"min-w-0 flex-1",children:e.jsx("div",{className:"rounded-3xl p-5 md:p-6 bg-white/80 backdrop-blur border border-white/50 shadow-2xl",style:{marginLeft:20,marginRight:20},children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900",children:s.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:["ID: ",s.id]})]}),e.jsx("div",{className:"flex gap-2 text-xs",children:(((u=s.kpis)==null?void 0:u.destsTop)||[]).map(l=>e.jsxs(h,{children:["Dest ",l]},l))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(j,{tabs:["Overview","Shipments","Contacts","Activity","Campaigns","Settings"],value:p,onChange:x}),e.jsx("div",{className:"text-sm text-slate-600",children:"Select Overview to see the Pre-Call demo once wired."})]})]}):e.jsx("div",{className:"text-slate-500",children:"Select a company…"})})})]})}export{N as C,y as W};
