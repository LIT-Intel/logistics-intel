import{h as y,r as t,j as e,S as v,B as f}from"./main-DPL4Ezh_.js";import{u as N,C as w}from"./CompanyDrawer-DV_xLJOI.js";import{b as S}from"./api-CmmA9ncb.js";import{I as C}from"./input-DF9GpQAV.js";import{C as _}from"./circle-alert-C-mR4L-i.js";import"./tabs-CPxVDOUA.js";import"./index-oGm7SI7y.js";import"./index-Bg0uv8Ao.js";function F(){var c;const{user:i}=y(),[r,g]=t.useState(""),[h,o]=t.useState(!1),[b,u]=t.useState(""),a=N({queryKey:["crmSavedCompanies","prospect"],queryFn:()=>S.get("/crm/savedCompanies?stage=prospect"),staleTime:6e4}),m=t.useMemo(()=>{var n,x,p;const s=((n=a.data)==null?void 0:n.rows)||((p=(x=a.data)==null?void 0:x.data)==null?void 0:p.rows)||[];if(!r.trim())return s;const l=r.toLowerCase();return s.filter(d=>(d.name||d.company_name||String(d.company_id)).toLowerCase().includes(l))},[a.data,r]),j=s=>{u(String(s)),o(!0)};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Companies — Prospecting & Outreach"}),i&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["User: ",i.email]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:["Acme Logistics","Globex Corp","Initech Shipping","Umbrella Freight"].map((s,l)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow border border-gray-200/60 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Smoke Test"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:s}),e.jsx("div",{className:"text-xs text-gray-500",children:"HQ: — | Shipments (12M): —"})]},l))}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 md:p-6 shadow-lg border border-gray-200/60 mb-6 md:mb-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-4",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(C,{placeholder:"Search your saved companies by name...",value:r,onChange:s=>g(s.target.value),className:"pl-10 bg-gray-50 border-0 text-base"}),e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]})})}),a.error&&e.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-6 flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Data Retrieval Error"}),e.jsx("p",{children:String(((c=a.error)==null?void 0:c.message)||a.error)})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow border p-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Saved Company"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:s.name||s.company_name||s.company_id}),e.jsx("div",{className:"mt-3",children:e.jsx(f,{size:"sm",onClick:()=>j(s.company_id||s.id),children:"View"})})]},s.company_id||s.id))}),!a.isLoading&&m.length===0&&e.jsxs("div",{className:"text-center py-12 md:py-16",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-600 mb-2",children:"No Saved Companies Found"}),e.jsx("p",{className:"text-gray-500",children:"Use Search to save companies to your list."})]})]}),e.jsx(w,{id:b,open:h,onOpenChange:o})]})}export{F as default};
