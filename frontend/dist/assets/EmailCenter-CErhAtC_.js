import{c as w,r as a,j as e,B as c,E as A,G as H,C as O,d as G,e as q,b as V,S as he,M as pe,H as Y}from"./main-CiQeGQYc.js";import{Contact as ue,Company as ae,EmailInteraction as $,User as ge}from"./entities-CpFcElq0.js";import{I as U}from"./input-Bv9abQHJ.js";import{T as z}from"./textarea-Dx6UEHHf.js";import{B as D}from"./badge-B6lKwbaX.js";import{L as je}from"./LockedFeature-C_Jyu3rD.js";import{U as be}from"./UpgradePrompt-eHRAhy6E.js";import{L as T}from"./label-C4_s4YWg.js";import{D as le,a as re,b as ne,c as ce,X as ie,d as ye}from"./dialog-wbuovHDq.js";import"./select-Qi39vAO1.js";import{sendEmail as oe}from"./functions-Co0kTrCc.js";import{A as W,a as X,b as J}from"./alert-B2hYSCLT.js";import{T as K}from"./triangle-alert-3UzniADk.js";import{S as L}from"./send--uHMStqN.js";import{T as fe}from"./trash-2-B-WNUARx.js";import{C as Q}from"./circle-check-big-CEkGAV9h.js";import{C as Z}from"./clock-CtUydMeZ.js";import{f as P}from"./format-DIePDvv_.js";import{P as Ne}from"./plus-NARaOXKd.js";import"./base44Client-C-YMJfZQ.js";import"./proxy-Bqzmchpz.js";import"./lock-idyItK-A.js";import"./crown-tMPcR3fh.js";import"./zap-NVP2MV_I.js";import"./arrow-right-CMb4Ixnr.js";import"./index-BvEAyXlj.js";import"./index-C7u1BkW7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],de=w("Archive",ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ee=w("Bold",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],ke=w("Forward",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],_e=w("Inbox",Se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],se=w("Italic",Ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],te=w("Link",Fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Te=w("Paperclip",Me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],B=w("Reply",Ie);function Ue({onSend:i,onClose:p,prefilledData:x={},isInline:C=!1}){const[u,m]=a.useState(x.to||""),[h,b]=a.useState(x.subject||""),[o,N]=a.useState(x.bodyHtml||""),[r,k]=a.useState(x.contactId||""),[R,y]=a.useState(x.companyId||""),[_,s]=a.useState([]),[v,I]=a.useState([]),[E,S]=a.useState(!1),[F,t]=a.useState("");a.useEffect(()=>{(async()=>{try{const g=await ue.list();s(g||[]);const d=await ae.list();I(d||[])}catch(g){console.error("Failed to load contacts/companies:",g)}})()},[]),a.useEffect(()=>{if(r){const l=_.find(g=>g.id===r);l&&(m(l.email),l.company_id&&y(l.company_id))}},[r,_]);const n=(l,g)=>{const d=document.getElementById("message-textarea");if(!d)return;const j=d.selectionStart,M=d.selectionEnd,me=o.substring(j,M),xe=o.substring(0,j)+l+me+g+o.substring(M);N(xe),setTimeout(()=>{d.focus(),d.setSelectionRange(j+l.length,M+l.length)},0)},f=async()=>{var l,g;if(!u||!h||!o){t('"To", "Subject", and "Message" fields are required.');return}S(!0),t("");try{const d=o.replace(/\n/g,"<br>");console.log("DEBUG: Data being sent to sendEmailFunction:",{to:u,subject:h,body_html:d});const j=await oe({to:u,subject:h,body_html:d});if(console.log("DEBUG: Raw response received from sendEmailFunction:",j),j.status>=400){const M=((l=j.data)==null?void 0:l.error)||j.error||"Unknown error occurred";console.error("Backend Error:",M),t(`Failed to send email: ${M}`),S(!1);return}(g=j.data)!=null&&g.success?(S(!1),i({to:u,subject:h,bodyHtml:d}),C||p()):(console.error("Unexpected response format:",j),t("Unexpected response from server. Please try again."),S(!1))}catch(d){console.error("Failed to send email:",d),t(`Failed to send email: ${d.message||"Unknown error"}`),S(!1)}};return C?e.jsxs("div",{className:"space-y-6",children:[F&&e.jsxs(W,{variant:"destructive",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(X,{children:"Error"}),e.jsx(J,{children:F})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"toEmail",children:"To *"}),e.jsx(U,{id:"toEmail",type:"email",value:u,onChange:l=>m(l.target.value),placeholder:"recipient@example.com",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"subject",children:"Subject *"}),e.jsx(U,{id:"subject",value:h,onChange:l=>b(l.target.value),placeholder:"Email subject",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"message",children:"Message *"}),e.jsxs("div",{className:"flex gap-2 p-2 bg-gray-50 rounded-t border border-b-0",children:[e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("**","**"),className:"h-8 px-2",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("*","*"),className:"h-8 px-2",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("[","](url)"),className:"h-8 px-2",children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsx(z,{id:"message-textarea",value:o,onChange:l=>N(l.target.value),placeholder:"Write your message here...",className:"min-h-[300px] resize-y rounded-t-none"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use **bold**, *italic*, and [link text](url) for basic formatting"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ðŸ’¡ Pro Tip:"})," Use placeholders like [Name], [Company], and [Route] in your templates. They'll be automatically replaced when sending to specific contacts."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(c,{variant:"outline",onClick:p,children:"Cancel"}),e.jsx(c,{onClick:f,disabled:E,className:"bg-blue-600 hover:bg-blue-700 text-white",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Send Email"]})})]})]}):e.jsx(le,{open:!0,onOpenChange:p,children:e.jsxs(re,{className:"sm:max-w-[650px] bg-white rounded-lg shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ne,{className:"flex flex-row justify-between items-center",children:[e.jsxs(ce,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-blue-600"}),"Compose Email"]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:p,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[F&&e.jsxs(W,{variant:"destructive",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(X,{children:"Error"}),e.jsx(J,{children:F})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"toEmail",children:"To *"}),e.jsx(U,{id:"toEmail",type:"email",value:u,onChange:l=>m(l.target.value),placeholder:"recipient@example.com",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"subject",children:"Subject *"}),e.jsx(U,{id:"subject",value:h,onChange:l=>b(l.target.value),placeholder:"Email subject",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"message",children:"Message *"}),e.jsxs("div",{className:"flex gap-2 p-2 bg-gray-50 rounded-t border border-b-0",children:[e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("**","**"),className:"h-8 px-2",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("*","*"),className:"h-8 px-2",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>n("[","](url)"),className:"h-8 px-2",children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsx(z,{id:"message-textarea",value:o,onChange:l=>N(l.target.value),placeholder:"Write your message here...",className:"min-h-[200px] resize-y rounded-t-none"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use **bold**, *italic*, and [link text](url) for basic formatting"})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ðŸ’¡ Pro Tip:"})," Use placeholders like [Name], [Company], and [Route] in your templates. They'll be automatically replaced when sending to specific contacts."]})})]})]}),e.jsxs(ye,{className:"flex justify-between items-center mt-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(c,{variant:"ghost",size:"sm",className:"text-gray-600",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),"Attach File"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:p,children:"Cancel"}),e.jsx(c,{onClick:f,disabled:E,className:"bg-blue-600 hover:bg-blue-700 text-white",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Send Email"]})})]})]})]})})}function Pe({email:i,onClose:p,onReply:x}){const[C,u]=a.useState([i]),[m,h]=a.useState(""),[b,o]=a.useState(!1),[N,r]=a.useState(!1),k=a.useCallback(async()=>{if(i)try{const s=await $.filter({contact_id:i.contact_id},"-created_date");u(s)}catch(s){console.error("Failed to load email thread:",s)}},[i]);a.useEffect(()=>{k()},[k]);const R=async()=>{if(!m.trim()){alert("Please enter a reply message");return}r(!0);try{await $.create({contact_id:i.contact_id,company_id:i.company_id,subject:`Re: ${i.subject}`,body_html:m.replace(/\n/g,"<br>"),direction:"sent",status:"sent"}),o(!1),h(""),await k(),x&&x()}catch(s){console.error("Failed to send reply:",s),alert("Failed to send reply. Please try again.")}r(!1)},y=s=>{const v={sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",opened:"bg-purple-100 text-purple-800",replied:"bg-yellow-100 text-yellow-800",bounced:"bg-red-100 text-red-800"};return v[s]||v.sent},_=s=>{const I={sent:Z,delivered:Q,opened:Q,replied:B,bounced:fe}[s]||Z;return e.jsx(I,{className:"w-4 h-4"})};return i?e.jsx(le,{open:!0,onOpenChange:p,children:e.jsxs(re,{className:"max-w-4xl h-[90vh] flex flex-col p-0",children:[e.jsx(ne,{className:"p-6 border-b",children:e.jsxs(ce,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold truncate",children:i.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Thread with Contact ID: ",i.contact_id]})]}),e.jsxs(D,{className:y(i.status),children:[e.jsx("span",{className:"mr-1",children:_(i.status)}),i.status]})]})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"p-6 space-y-6",children:C.map((s,v)=>e.jsxs("div",{className:`border rounded-lg p-4 ${s.direction==="sent"?"bg-blue-50 ml-8":"bg-gray-50 mr-8"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${s.direction==="sent"?"bg-blue-600 text-white":"bg-gray-600 text-white"}`,children:s.direction==="sent"?"Y":"T"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.direction==="sent"?"You":"Contact"}),e.jsx("p",{className:"text-sm text-gray-600",children:P(new Date(s.created_date),"MMM dd, yyyy at h:mm a")})]})]}),e.jsx(D,{className:y(s.status),children:s.status})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.body_html}})}),s.direction==="sent"&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 text-xs text-gray-500",children:e.jsxs("div",{className:"flex gap-4",children:[s.opened_at&&e.jsxs("span",{children:["Opened: ",P(new Date(s.opened_at),"MMM dd, h:mm a")]}),s.clicked_at&&e.jsxs("span",{children:["Clicked: ",P(new Date(s.clicked_at),"MMM dd, h:mm a")]}),s.replied_at&&e.jsxs("span",{children:["Replied: ",P(new Date(s.replied_at),"MMM dd, h:mm a")]})]})})]},s.id))}),b&&e.jsxs("div",{className:"border-t p-6 bg-gray-50",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Reply"}),e.jsx(z,{value:m,onChange:s=>h(s.target.value),placeholder:"Type your reply...",className:"h-32 mb-4"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(c,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(c,{onClick:R,disabled:N,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),N?"Sending...":"Send Reply"]})]})]})]}),e.jsx("div",{className:"border-t p-6 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{variant:"outline",onClick:()=>o(!b),className:"hover:bg-blue-50",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Reply"]}),e.jsxs(c,{variant:"outline",disabled:!0,children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Forward"]}),e.jsxs(c,{variant:"outline",disabled:!0,children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Archive"]})]}),e.jsx(c,{variant:"outline",onClick:p,children:"Close"})]})})]})}):null}function is(){const[i,p]=a.useState([]),[x,C]=a.useState(null),[u,m]=a.useState(!1),[h,b]=a.useState(!0),[o,N]=a.useState("inbox"),[r,k]=a.useState(null),[R,y]=a.useState(!1),[_,s]=a.useState(null);a.useEffect(()=>{ge.me().then(k)},[]),a.useEffect(()=>{r&&A(r,"campaigns")?v():r&&b(!1)},[r]),a.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("company_id");n&&n!=="undefined"&&r&&A(r,"campaigns")&&I(n)},[r]);const v=async()=>{b(!0);try{const t=await $.filter({direction:"received"},"-created_date");p(t)}catch(t){console.error("Failed to load emails:",t)}b(!1)},I=async t=>{try{const n=await ae.filter({id:t});if(n.length>0){const f=n[0];s({to:f.email||"",subject:`Outreach to ${f.name}`}),m(!0)}}catch(n){console.error("Failed to load company for outreach:",n)}},E=async t=>{if(!Y(r)){y(!0);return}try{const{data:n,error:f}=await oe({to:t.to,subject:t.subject,body_html:t.body_html});if(f){console.error("Failed to send email:",f.data.error),alert(`Failed to send email: ${f.data.error}`);return}await $.create({...t,direction:"sent",status:"sent",contact_id:"temp-contact-id"}),k(l=>({...l,monthly_emails_sent:(l.monthly_emails_sent||0)+1})),m(!1),s(null),await v()}catch(n){console.error("Failed to send email:",n),alert("An unexpected error occurred while sending the email.")}},S=()=>{if(!Y(r)){y(!0);return}s(null),m(!0)},F=t=>{const n={sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",opened:"bg-purple-100 text-purple-800",replied:"bg-yellow-100 text-yellow-800",bounced:"bg-red-100 text-red-800"};return n[t]||n.sent};return u?e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(L,{className:"w-6 h-6 text-blue-600"}),"Compose Email"]}),e.jsxs(c,{variant:"outline",onClick:()=>{m(!1),s(null)},className:"text-gray-600 hover:text-gray-800",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Back to Email Center"]})]}),e.jsx(Ue,{onSend:E,onClose:()=>{m(!1),s(null)},isInline:!0,initialData:_})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(je,{isLocked:!A(r,"campaigns"),onUpgradeClick:()=>y(!0),title:"Email Center & Automation",description:"Upgrade to the Growth plan to unlock direct email outreach and campaign automation.",children:e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Email Center"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Manage your outreach and track email performance."}),r&&A(r,"campaigns")&&e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs(D,{className:"bg-green-100 text-green-800",children:[H(r.plan).name," Plan"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.monthly_emails_sent||0," / ",H(r.plan).max_emails," emails this month"]})]})]}),e.jsxs(c,{onClick:S,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg w-full sm:w-auto",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Compose Email"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(O,{className:"bg-white/80 backdrop-blur-sm shadow-lg border-none",children:[e.jsx(G,{children:e.jsx(q,{children:"Folders"})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:[{id:"inbox",label:"Inbox",icon:_e,count:i.length},{id:"sent",label:"Sent",icon:L,count:0},{id:"archived",label:"Archived",icon:de,count:0}].map(t=>e.jsxs("button",{onClick:()=>N(t.id),className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${o===t.id?"bg-blue-50 text-blue-700 font-semibold":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{className:"w-4 h-4"}),e.jsx("span",{children:t.label})]}),e.jsx(D,{variant:"secondary",children:t.count})]},t.id))})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(O,{className:"bg-white/80 backdrop-blur-sm shadow-lg border-none",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:o.charAt(0).toUpperCase()+o.slice(1)}),e.jsxs("div",{className:"relative w-full max-w-xs",children:[e.jsx(U,{placeholder:"Search emails...",className:"pl-10 bg-gray-50 border-0"}),e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto pr-2",children:h?e.jsx("p",{className:"text-center py-4 text-gray-500",children:"Loading emails..."}):i.length>0?i.map(t=>e.jsxs("div",{onClick:()=>C(t),className:"p-4 border border-transparent rounded-lg hover:bg-gray-50 hover:border-gray-200 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.subject}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(D,{className:F(t.status),children:t.status}),e.jsx("span",{className:"text-xs text-gray-500 w-16 text-right",children:P(new Date(t.created_date),"MMM dd")})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:["Contact ID: ",t.contact_id]})]},t.id)):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsxs("h3",{className:"font-semibold text-lg",children:["Your ",o," is empty"]}),e.jsx("p",{className:"text-sm",children:"New emails will appear here."})]})})})]})})]})]})})}),e.jsx(be,{isOpen:R,onClose:()=>y(!1),feature:"campaigns",currentPlan:r==null?void 0:r.plan}),x&&e.jsx(Pe,{email:x,onClose:()=>C(null)})]})}export{is as default};
