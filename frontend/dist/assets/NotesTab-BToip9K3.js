import{c as D,j as e,r as o,C as S,d as A,e as T,a as Ue,b as I,E as Jt,a1 as Zt,B as b,f as Z,V as Qt,a2 as Ke,g as F,S as er,M as tr,T as rr}from"./main-D6vxZYeV.js";import{B as O}from"./badge-B9CpQrvY.js";import{f as be}from"./format-DIePDvv_.js";import{T as he,P as Be}from"./truck-DGckJkxM.js";import{S as G}from"./ship-PN2S97eh.js";import{S as fe,b as ge,d as ve,e as je,f as R,i as ze,j as nr,A as sr,P as ar,h as or,g as ir,R as cr,F as lr,D as dr,k as ur,l as mr,C as pr}from"./select-BHr66boF.js";import{I as W}from"./input-B5GH_Rvh.js";import{L as V}from"./label-CbJd33yU.js";import{Contact as Oe}from"./entities-CpFcElq0.js";import{c as Ve,a as xr,g as He,d as hr,b as w,P as H,h as fr,u as gr,e as Le}from"./index-ljTxVNh-.js";import{P as oe}from"./index-Cy6wi5M3.js";import{d as qe,I as vr,R as jr}from"./tabs-gCRSLrvN.js";import{toggleCompanySave as Fe,phantombusterLinkedIn as wr,enrichCompany as Nr}from"./functions-DItVLH8t.js";import{L as we}from"./loader-circle-DYBTYwGO.js";import{P as We}from"./plus-UVBAYAVX.js";import{L as yr}from"./lock-BAV4dFnT.js";import{U as Ye}from"./users-Cr7WCzdi.js";import{M as br}from"./message-square-DwfzN-MB.js";import{T as _r}from"./trash-2-BI3Qmbxf.js";import{T as Mr}from"./textarea-6DnRwPRj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Sr=D("Bookmark",Cr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rr=D("ChevronRight",kr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dr=D("Circle",Ir);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Pr=D("EllipsisVertical",Er);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Tr=D("Filter",Ar);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],$e=D("Linkedin",Or);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fr=D("Phone",Lr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],xe=D("Sparkles",$r);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ur=D("SquarePen",Gr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],Xe=D("TramFront",Kr);function Ds({company:t,isLoading:n}){if(!n&&!t)return e.jsx("div",{className:"text-center py-8 text-gray-600",children:"No overview data available for this company."});const r=o.useMemo(()=>t?{totalShipments:t.shipments_12m||0,topRoute:t.top_route||"N/A",topCarriers:t.top_carriers||[],modeBreakdown:t.mode_breakdown||[]}:null,[t]),s=a=>({ocean:G,air:Be,truck:he,rail:Xe,unknown:G})[a]||G;return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(S,{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white",children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2 text-white",children:[e.jsx(Ue,{className:"w-5 h-5 text-white"}),"Company Details"]})}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Industry:"}),e.jsx("p",{className:"font-medium text-white",children:t.industry||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Headquarters:"}),e.jsx("p",{className:"font-medium text-white",children:[t.hq_city,t.hq_country].filter(Boolean).join(", ")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Domain:"}),e.jsx("p",{className:"font-medium text-white",children:t.domain?e.jsx("a",{href:`https://${String(t.domain).replace(/^https?:\/\//,"")}`,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-blue-300 hover:underline",children:t.domain}):"Not specified"})]}),t.employee_count&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Employees:"}),e.jsx("p",{className:"font-medium text-white",children:t.employee_count.toLocaleString()})]})]})]}),e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Trade Activity Overview"]})}),e.jsxs(I,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Shipments (12m):"}),e.jsx("p",{className:"font-bold text-purple-700 text-lg",children:((r==null?void 0:r.totalShipments)||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Top Route:"}),e.jsx("p",{className:"font-medium",children:r==null?void 0:r.topRoute})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Seen:"}),e.jsx("p",{className:"font-medium",children:t.last_seen?be(new Date(t.last_seen),"MMM d, yyyy"):"No recent activity"})]})]})]})]}),r&&e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Primary Carriers"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-3",children:r.topCarriers.length>0?r.topCarriers.map((a,i)=>e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})},i)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No carrier data available"})})})]})}),r&&r.modeBreakdown.length>0&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsx(T,{className:"text-lg",children:"Transportation Modes"})}),e.jsx(I,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.modeBreakdown.map(a=>{const i=s(a.mode),c=r.totalShipments,u=c>0?(a.cnt/c*100).toFixed(1):0;return e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(i,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-semibold capitalize text-gray-900",children:a.mode}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.cnt," shipments (",u,"%)"]})]},a.mode)})})})]}),t.top_hs&&t.top_hs.length>0&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Top Commodities (HS Codes)"]})}),e.jsx(I,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.top_hs.slice(0,10).map((a,i)=>e.jsx(O,{variant:"outline",className:"text-xs",children:a},i))})})]})]})}function Es({shipments:t,isLoading:n}){const[r,s]=o.useState("date"),[a,i]=o.useState("desc"),[c,u]=o.useState("all"),p=l=>l==null?"N/A":l>=1e6?`${(l/1e6).toFixed(1)}M kg`:l>=1e3?`${(l/1e3).toFixed(0)}K kg`:`${l.toFixed(0)} kg`,f=o.useMemo(()=>{let l=t;return c!=="all"&&(l=t.filter(h=>(h.mode||h.transport_mode||"").toLowerCase()===c)),Array.isArray(l)||(l=[]),[...l].sort((h,j)=>{let N=h[r],y=j[r];if(N==null&&(N=""),y==null&&(y=""),r==="date"){const E=h.shipped_on||h.date||h.snapshot_date||h.shipment_date,$=j.shipped_on||j.date||j.snapshot_date||j.shipment_date;N=E?new Date(E):new Date(0),y=$?new Date($):new Date(0)}else if(r==="gross_weight_kg"){const E=h.gross_weight_kg??h.weight_kg??0,$=j.gross_weight_kg??j.weight_kg??0;N=E,y=$}return a==="asc"?typeof N=="string"&&typeof y=="string"?N.localeCompare(y):N>y?1:-1:typeof N=="string"&&typeof y=="string"?y.localeCompare(N):N<y?1:-1})},[t,r,a,c]),m=l=>{const j={ocean:G,air:Be,truck:he,rail:Xe}[l==null?void 0:l.toLowerCase()]||G;return e.jsx(j,{className:"w-4 h-4"})},d=l=>({ocean:"bg-blue-100 text-blue-800",air:"bg-purple-100 text-purple-800",truck:"bg-green-100 text-green-800",rail:"bg-orange-100 text-orange-800"})[l==null?void 0:l.toLowerCase()]||"bg-gray-100 text-gray-800",x=o.useMemo(()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit"}),[]),v=o.useMemo(()=>new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}),[]);return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):!t||t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No shipment data"}),e.jsx("p",{className:"text-gray-500",children:"No shipment records found for this company"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4 text-gray-500"}),e.jsxs(fe,{value:c,onValueChange:u,children:[e.jsx(ge,{className:"w-32",children:e.jsx(ve,{placeholder:"All Modes"})}),e.jsxs(je,{children:[e.jsx(R,{value:"all",children:"All Modes"}),e.jsx(R,{value:"ocean",children:"Ocean"}),e.jsx(R,{value:"air",children:"Air"}),e.jsx(R,{value:"truck",children:"Truck"}),e.jsx(R,{value:"rail",children:"Rail"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs(fe,{value:r,onValueChange:s,children:[e.jsx(ge,{className:"w-32",children:e.jsx(ve,{placeholder:"Date"})}),e.jsxs(je,{children:[e.jsx(R,{value:"date",children:"Date"}),e.jsx(R,{value:"gross_weight_kg",children:"Weight"}),e.jsx(R,{value:"carrier_name",children:"Carrier"}),e.jsx(R,{value:"origin_country",children:"Origin"})]})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>i(a==="asc"?"desc":"asc"),children:a==="asc"?"↑":"↓"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[f.length," of ",t.length," shipments"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 text-xs md:text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Mode"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Route"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Carrier"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"HS Code"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-xs md:text-sm",children:f.slice(0,50).map((l,h)=>e.jsxs("tr",{className:`${h%2===1?"bg-gray-50":"bg-white"} hover:bg-gray-100`,children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:(()=>{const j=l.shipped_on||l.date||l.snapshot_date||l.shipment_date;return j?x.format(new Date(j)):"N/A"})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[m(l.mode||l.transport_mode),e.jsx(O,{className:`text-xs ${d(l.mode)}`,children:l.mode||l.transport_mode||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-xs overflow-hidden",children:[e.jsx("div",{className:"font-medium truncate",children:l.origin||l.origin_country||l.origin_port||"Unknown"}),e.jsxs("div",{className:"text-gray-500 text-xs truncate",children:["→ ",l.destination||l.dest_country||l.dest_port||"Unknown"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-blue-700 whitespace-nowrap",children:p(l.gross_weight_kg??l.weight_kg)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",children:l.carrier_name||l.carrier||"Unknown"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:l.hs_code||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:typeof l.value_usd=="number"?v.format(l.value_usd):"—"})]},l.id||h))})]})}),f.length>50&&e.jsx("div",{className:"bg-gray-50 px-4 py-3 text-center border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing first 50 shipments. ",f.length-50," more available."]})})]})]})}function Br({onSubmit:t,onCancel:n}){const[r,s]=o.useState({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""}),a=c=>{if(c.preventDefault(),!r.full_name.trim()){alert("Full name is required");return}t(r),s({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""})},i=["Logistics","Supply Chain","Procurement","Operations","Sales","Marketing","Finance","Executive","Other"];return e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Full Name (Required)"}),e.jsx(W,{value:r.full_name,onChange:c=>s(u=>({...u,full_name:c.target.value})),placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(V,{children:"Job Title"}),e.jsx(W,{value:r.title,onChange:c=>s(u=>({...u,title:c.target.value})),placeholder:"e.g., Logistics Manager"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Department"}),e.jsxs(fe,{value:r.dept,onValueChange:c=>s(u=>({...u,dept:c})),children:[e.jsx(ge,{children:e.jsx(ve,{placeholder:"Select department"})}),e.jsx(je,{children:i.map(c=>e.jsx(R,{value:c,children:c},c))})]})]}),e.jsxs("div",{children:[e.jsx(V,{children:"Email Address"}),e.jsx(W,{type:"email",value:r.email,onChange:c=>s(u=>({...u,email:c.target.value})),placeholder:"contact@company.com"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Phone Number"}),e.jsx(W,{value:r.phone,onChange:c=>s(u=>({...u,phone:c.target.value})),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(V,{children:"LinkedIn Profile URL"}),e.jsx(W,{value:r.linkedin,onChange:c=>s(u=>({...u,linkedin:c.target.value})),placeholder:"https://linkedin.com/in/profile"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(b,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Save Contact"})]})]})}var Ne=["Enter"," "],zr=["ArrowDown","PageUp","Home"],Je=["ArrowUp","PageDown","End"],Vr=[...zr,...Je],Hr={ltr:[...Ne,"ArrowRight"],rtl:[...Ne,"ArrowLeft"]},qr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Q="Menu",[X,Wr,Yr]=xr(Q),[U,Ze]=Ve(Q,[Yr,ze,qe]),ie=ze(),Qe=qe(),[Xr,K]=U(Q),[Jr,ee]=U(Q),et=t=>{const{__scopeMenu:n,open:r=!1,children:s,dir:a,onOpenChange:i,modal:c=!0}=t,u=ie(n),[p,f]=o.useState(null),m=o.useRef(!1),d=He(i),x=hr(a);return o.useEffect(()=>{const v=()=>{m.current=!0,document.addEventListener("pointerdown",l,{capture:!0,once:!0}),document.addEventListener("pointermove",l,{capture:!0,once:!0})},l=()=>m.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",l,{capture:!0}),document.removeEventListener("pointermove",l,{capture:!0})}},[]),e.jsx(nr,{...u,children:e.jsx(Xr,{scope:n,open:r,onOpenChange:d,content:p,onContentChange:f,children:e.jsx(Jr,{scope:n,onClose:o.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:m,dir:x,modal:c,children:s})})})};et.displayName=Q;var Zr="MenuAnchor",_e=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ie(r);return e.jsx(sr,{...a,...s,ref:n})});_e.displayName=Zr;var Me="MenuPortal",[Qr,tt]=U(Me,{forceMount:void 0}),rt=t=>{const{__scopeMenu:n,forceMount:r,children:s,container:a}=t,i=K(Me,n);return e.jsx(Qr,{scope:n,forceMount:r,children:e.jsx(oe,{present:r||i.open,children:e.jsx(ar,{asChild:!0,container:a,children:s})})})};rt.displayName=Me;var C="MenuContent",[en,Ce]=U(C),nt=o.forwardRef((t,n)=>{const r=tt(C,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=K(C,t.__scopeMenu),c=ee(C,t.__scopeMenu);return e.jsx(X.Provider,{scope:t.__scopeMenu,children:e.jsx(oe,{present:s||i.open,children:e.jsx(X.Slot,{scope:t.__scopeMenu,children:c.modal?e.jsx(tn,{...a,ref:n}):e.jsx(rn,{...a,ref:n})})})})}),tn=o.forwardRef((t,n)=>{const r=K(C,t.__scopeMenu),s=o.useRef(null),a=Z(n,s);return o.useEffect(()=>{const i=s.current;if(i)return or(i)},[]),e.jsx(Se,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:w(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),rn=o.forwardRef((t,n)=>{const r=K(C,t.__scopeMenu);return e.jsx(Se,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nn=Qt("MenuContent.ScrollLock"),Se=o.forwardRef((t,n)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:p,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:x,onDismiss:v,disableOutsideScroll:l,...h}=t,j=K(C,r),N=ee(C,r),y=ie(r),E=Qe(r),$=Wr(r),[Vt,De]=o.useState(null),te=o.useRef(null),Ht=Z(n,te,j.onContentChange),re=o.useRef(0),ne=o.useRef(""),qt=o.useRef(0),de=o.useRef(null),Ee=o.useRef("right"),ue=o.useRef(0),Wt=l?cr:o.Fragment,Yt=l?{as:nn,allowPinchZoom:!0}:void 0,Xt=g=>{var z,Ae;const M=ne.current+g,k=$().filter(P=>!P.disabled),L=document.activeElement,me=(z=k.find(P=>P.ref.current===L))==null?void 0:z.textValue,pe=k.map(P=>P.textValue),Pe=fn(pe,M,me),q=(Ae=k.find(P=>P.textValue===Pe))==null?void 0:Ae.ref.current;(function P(Te){ne.current=Te,window.clearTimeout(re.current),Te!==""&&(re.current=window.setTimeout(()=>P(""),1e3))})(M),q&&setTimeout(()=>q.focus())};o.useEffect(()=>()=>window.clearTimeout(re.current),[]),ir();const B=o.useCallback(g=>{var k,L;return Ee.current===((k=de.current)==null?void 0:k.side)&&vn(g,(L=de.current)==null?void 0:L.area)},[]);return e.jsx(en,{scope:r,searchRef:ne,onItemEnter:o.useCallback(g=>{B(g)&&g.preventDefault()},[B]),onItemLeave:o.useCallback(g=>{var M;B(g)||((M=te.current)==null||M.focus(),De(null))},[B]),onTriggerLeave:o.useCallback(g=>{B(g)&&g.preventDefault()},[B]),pointerGraceTimerRef:qt,onPointerGraceIntentChange:o.useCallback(g=>{de.current=g},[]),children:e.jsx(Wt,{...Yt,children:e.jsx(lr,{asChild:!0,trapped:a,onMountAutoFocus:w(i,g=>{var M;g.preventDefault(),(M=te.current)==null||M.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:e.jsx(dr,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:x,onDismiss:v,children:e.jsx(jr,{asChild:!0,...E,dir:N.dir,orientation:"vertical",loop:s,currentTabStopId:Vt,onCurrentTabStopIdChange:De,onEntryFocus:w(p,g=>{N.isUsingKeyboardRef.current||g.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(ur,{role:"menu","aria-orientation":"vertical","data-state":jt(j.open),"data-radix-menu-content":"",dir:N.dir,...y,...h,ref:Ht,style:{outline:"none",...h.style},onKeyDown:w(h.onKeyDown,g=>{const k=g.target.closest("[data-radix-menu-content]")===g.currentTarget,L=g.ctrlKey||g.altKey||g.metaKey,me=g.key.length===1;k&&(g.key==="Tab"&&g.preventDefault(),!L&&me&&Xt(g.key));const pe=te.current;if(g.target!==pe||!Vr.includes(g.key))return;g.preventDefault();const q=$().filter(z=>!z.disabled).map(z=>z.ref.current);Je.includes(g.key)&&q.reverse(),xn(q)}),onBlur:w(t.onBlur,g=>{g.currentTarget.contains(g.target)||(window.clearTimeout(re.current),ne.current="")}),onPointerMove:w(t.onPointerMove,J(g=>{const M=g.target,k=ue.current!==g.clientX;if(g.currentTarget.contains(M)&&k){const L=g.clientX>ue.current?"right":"left";Ee.current=L,ue.current=g.clientX}}))})})})})})})});nt.displayName=C;var sn="MenuGroup",ke=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(H.div,{role:"group",...s,ref:n})});ke.displayName=sn;var an="MenuLabel",st=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(H.div,{...s,ref:n})});st.displayName=an;var se="MenuItem",Ge="menu.itemSelect",ce=o.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:s,...a}=t,i=o.useRef(null),c=ee(se,t.__scopeMenu),u=Ce(se,t.__scopeMenu),p=Z(n,i),f=o.useRef(!1),m=()=>{const d=i.current;if(!r&&d){const x=new CustomEvent(Ge,{bubbles:!0,cancelable:!0});d.addEventListener(Ge,v=>s==null?void 0:s(v),{once:!0}),fr(d,x),x.defaultPrevented?f.current=!1:c.onClose()}};return e.jsx(at,{...a,ref:p,disabled:r,onClick:w(t.onClick,m),onPointerDown:d=>{var x;(x=t.onPointerDown)==null||x.call(t,d),f.current=!0},onPointerUp:w(t.onPointerUp,d=>{var x;f.current||(x=d.currentTarget)==null||x.click()}),onKeyDown:w(t.onKeyDown,d=>{const x=u.searchRef.current!=="";r||x&&d.key===" "||Ne.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ce.displayName=se;var at=o.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...i}=t,c=Ce(se,r),u=Qe(r),p=o.useRef(null),f=Z(n,p),[m,d]=o.useState(!1),[x,v]=o.useState("");return o.useEffect(()=>{const l=p.current;l&&v((l.textContent??"").trim())},[i.children]),e.jsx(X.ItemSlot,{scope:r,disabled:s,textValue:a??x,children:e.jsx(vr,{asChild:!0,...u,focusable:!s,children:e.jsx(H.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:f,onPointerMove:w(t.onPointerMove,J(l=>{s?c.onItemLeave(l):(c.onItemEnter(l),l.defaultPrevented||l.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:w(t.onPointerLeave,J(l=>c.onItemLeave(l))),onFocus:w(t.onFocus,()=>d(!0)),onBlur:w(t.onBlur,()=>d(!1))})})})}),on="MenuCheckboxItem",ot=o.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:s,...a}=t;return e.jsx(ut,{scope:t.__scopeMenu,checked:r,children:e.jsx(ce,{role:"menuitemcheckbox","aria-checked":ae(r)?"mixed":r,...a,ref:n,"data-state":Ie(r),onSelect:w(a.onSelect,()=>s==null?void 0:s(ae(r)?!0:!r),{checkForDefaultPrevented:!1})})})});ot.displayName=on;var it="MenuRadioGroup",[cn,ln]=U(it,{value:void 0,onValueChange:()=>{}}),ct=o.forwardRef((t,n)=>{const{value:r,onValueChange:s,...a}=t,i=He(s);return e.jsx(cn,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(ke,{...a,ref:n})})});ct.displayName=it;var lt="MenuRadioItem",dt=o.forwardRef((t,n)=>{const{value:r,...s}=t,a=ln(lt,t.__scopeMenu),i=r===a.value;return e.jsx(ut,{scope:t.__scopeMenu,checked:i,children:e.jsx(ce,{role:"menuitemradio","aria-checked":i,...s,ref:n,"data-state":Ie(i),onSelect:w(s.onSelect,()=>{var c;return(c=a.onValueChange)==null?void 0:c.call(a,r)},{checkForDefaultPrevented:!1})})})});dt.displayName=lt;var Re="MenuItemIndicator",[ut,dn]=U(Re,{checked:!1}),mt=o.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:s,...a}=t,i=dn(Re,r);return e.jsx(oe,{present:s||ae(i.checked)||i.checked===!0,children:e.jsx(H.span,{...a,ref:n,"data-state":Ie(i.checked)})})});mt.displayName=Re;var un="MenuSeparator",pt=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(H.div,{role:"separator","aria-orientation":"horizontal",...s,ref:n})});pt.displayName=un;var mn="MenuArrow",xt=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ie(r);return e.jsx(mr,{...a,...s,ref:n})});xt.displayName=mn;var pn="MenuSub",[Ps,ht]=U(pn),Y="MenuSubTrigger",ft=o.forwardRef((t,n)=>{const r=K(Y,t.__scopeMenu),s=ee(Y,t.__scopeMenu),a=ht(Y,t.__scopeMenu),i=Ce(Y,t.__scopeMenu),c=o.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:p}=i,f={__scopeMenu:t.__scopeMenu},m=o.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return o.useEffect(()=>m,[m]),o.useEffect(()=>{const d=u.current;return()=>{window.clearTimeout(d),p(null)}},[u,p]),e.jsx(_e,{asChild:!0,...f,children:e.jsx(at,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":jt(r.open),...t,ref:Ke(n,a.onTriggerChange),onClick:d=>{var x;(x=t.onClick)==null||x.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:w(t.onPointerMove,J(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!r.open&&!c.current&&(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:w(t.onPointerLeave,J(d=>{var v,l;m();const x=(v=r.content)==null?void 0:v.getBoundingClientRect();if(x){const h=(l=r.content)==null?void 0:l.dataset.side,j=h==="right",N=j?-5:5,y=x[j?"left":"right"],E=x[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+N,y:d.clientY},{x:y,y:x.top},{x:E,y:x.top},{x:E,y:x.bottom},{x:y,y:x.bottom}],side:h}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:w(t.onKeyDown,d=>{var v;const x=i.searchRef.current!=="";t.disabled||x&&d.key===" "||Hr[s.dir].includes(d.key)&&(r.onOpenChange(!0),(v=r.content)==null||v.focus(),d.preventDefault())})})})});ft.displayName=Y;var gt="MenuSubContent",vt=o.forwardRef((t,n)=>{const r=tt(C,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=K(C,t.__scopeMenu),c=ee(C,t.__scopeMenu),u=ht(gt,t.__scopeMenu),p=o.useRef(null),f=Z(n,p);return e.jsx(X.Provider,{scope:t.__scopeMenu,children:e.jsx(oe,{present:s||i.open,children:e.jsx(X.Slot,{scope:t.__scopeMenu,children:e.jsx(Se,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:f,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var d;c.isUsingKeyboardRef.current&&((d=p.current)==null||d.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:w(t.onFocusOutside,m=>{m.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:w(t.onEscapeKeyDown,m=>{c.onClose(),m.preventDefault()}),onKeyDown:w(t.onKeyDown,m=>{var v;const d=m.currentTarget.contains(m.target),x=qr[c.dir].includes(m.key);d&&x&&(i.onOpenChange(!1),(v=u.trigger)==null||v.focus(),m.preventDefault())})})})})})});vt.displayName=gt;function jt(t){return t?"open":"closed"}function ae(t){return t==="indeterminate"}function Ie(t){return ae(t)?"indeterminate":t?"checked":"unchecked"}function xn(t){const n=document.activeElement;for(const r of t)if(r===n||(r.focus(),document.activeElement!==n))return}function hn(t,n){return t.map((r,s)=>t[(n+s)%t.length])}function fn(t,n,r){const a=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,i=r?t.indexOf(r):-1;let c=hn(t,Math.max(i,0));a.length===1&&(c=c.filter(f=>f!==r));const p=c.find(f=>f.toLowerCase().startsWith(a.toLowerCase()));return p!==r?p:void 0}function gn(t,n){const{x:r,y:s}=t;let a=!1;for(let i=0,c=n.length-1;i<n.length;c=i++){const u=n[i],p=n[c],f=u.x,m=u.y,d=p.x,x=p.y;m>s!=x>s&&r<(d-f)*(s-m)/(x-m)+f&&(a=!a)}return a}function vn(t,n){if(!n)return!1;const r={x:t.clientX,y:t.clientY};return gn(r,n)}function J(t){return n=>n.pointerType==="mouse"?t(n):void 0}var jn=et,wn=_e,Nn=rt,yn=nt,bn=ke,_n=st,Mn=ce,Cn=ot,Sn=ct,kn=dt,Rn=mt,In=pt,Dn=xt,En=ft,Pn=vt,le="DropdownMenu",[An,As]=Ve(le,[Ze]),_=Ze(),[Tn,wt]=An(le),Nt=t=>{const{__scopeDropdownMenu:n,children:r,dir:s,open:a,defaultOpen:i,onOpenChange:c,modal:u=!0}=t,p=_(n),f=o.useRef(null),[m,d]=gr({prop:a,defaultProp:i??!1,onChange:c,caller:le});return e.jsx(Tn,{scope:n,triggerId:Le(),triggerRef:f,contentId:Le(),open:m,onOpenChange:d,onOpenToggle:o.useCallback(()=>d(x=>!x),[d]),modal:u,children:e.jsx(jn,{...p,open:m,onOpenChange:d,dir:s,modal:u,children:r})})};Nt.displayName=le;var yt="DropdownMenuTrigger",bt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=t,i=wt(yt,r),c=_(r);return e.jsx(wn,{asChild:!0,...c,children:e.jsx(H.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Ke(n,i.triggerRef),onPointerDown:w(t.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:w(t.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});bt.displayName=yt;var On="DropdownMenuPortal",_t=t=>{const{__scopeDropdownMenu:n,...r}=t,s=_(n);return e.jsx(Nn,{...s,...r})};_t.displayName=On;var Mt="DropdownMenuContent",Ct=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=wt(Mt,r),i=_(r),c=o.useRef(!1);return e.jsx(yn,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:n,onCloseAutoFocus:w(t.onCloseAutoFocus,u=>{var p;c.current||(p=a.triggerRef.current)==null||p.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:w(t.onInteractOutside,u=>{const p=u.detail.originalEvent,f=p.button===0&&p.ctrlKey===!0,m=p.button===2||f;(!a.modal||m)&&(c.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ct.displayName=Mt;var Ln="DropdownMenuGroup",Fn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(bn,{...a,...s,ref:n})});Fn.displayName=Ln;var $n="DropdownMenuLabel",St=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(_n,{...a,...s,ref:n})});St.displayName=$n;var Gn="DropdownMenuItem",kt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Mn,{...a,...s,ref:n})});kt.displayName=Gn;var Un="DropdownMenuCheckboxItem",Rt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Cn,{...a,...s,ref:n})});Rt.displayName=Un;var Kn="DropdownMenuRadioGroup",Bn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Sn,{...a,...s,ref:n})});Bn.displayName=Kn;var zn="DropdownMenuRadioItem",It=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(kn,{...a,...s,ref:n})});It.displayName=zn;var Vn="DropdownMenuItemIndicator",Dt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Rn,{...a,...s,ref:n})});Dt.displayName=Vn;var Hn="DropdownMenuSeparator",Et=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(In,{...a,...s,ref:n})});Et.displayName=Hn;var qn="DropdownMenuArrow",Wn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Dn,{...a,...s,ref:n})});Wn.displayName=qn;var Yn="DropdownMenuSubTrigger",Pt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(En,{...a,...s,ref:n})});Pt.displayName=Yn;var Xn="DropdownMenuSubContent",At=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=_(r);return e.jsx(Pn,{...a,...s,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});At.displayName=Xn;var Jn=Nt,Zn=bt,Qn=_t,Tt=Ct,Ot=St,Lt=kt,Ft=Rt,$t=It,Gt=Dt,Ut=Et,Kt=Pt,Bt=At;const es=Jn,ts=Zn,rs=o.forwardRef(({className:t,inset:n,children:r,...s},a)=>e.jsxs(Kt,{ref:a,className:F("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...s,children:[r,e.jsx(Rr,{className:"ml-auto"})]}));rs.displayName=Kt.displayName;const ns=o.forwardRef(({className:t,...n},r)=>e.jsx(Bt,{ref:r,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ns.displayName=Bt.displayName;const zt=o.forwardRef(({className:t,sideOffset:n=4,...r},s)=>e.jsx(Qn,{children:e.jsx(Tt,{ref:s,sideOffset:n,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));zt.displayName=Tt.displayName;const ye=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Lt,{ref:s,className:F("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r}));ye.displayName=Lt.displayName;const ss=o.forwardRef(({className:t,children:n,checked:r,...s},a)=>e.jsxs(Ft,{ref:a,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gt,{children:e.jsx(pr,{className:"h-4 w-4"})})}),n]}));ss.displayName=Ft.displayName;const as=o.forwardRef(({className:t,children:n,...r},s)=>e.jsxs($t,{ref:s,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gt,{children:e.jsx(Dr,{className:"h-2 w-2 fill-current"})})}),n]}));as.displayName=$t.displayName;const os=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Ot,{ref:s,className:F("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));os.displayName=Ot.displayName;const is=o.forwardRef(({className:t,...n},r)=>e.jsx(Ut,{ref:r,className:F("-mx-1 my-1 h-px bg-muted",t),...n}));is.displayName=Ut.displayName;const cs=t=>{switch(t==null?void 0:t.toLowerCase()){case"linkedin":return"bg-blue-100 text-blue-800";case"email":return"bg-yellow-100 text-yellow-800";case"referral":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ls=t=>{switch(t==null?void 0:t.toLowerCase()){case"responded":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_contacted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ds=({contact:t,onRefresh:n,onEdit:r})=>{var u,p;const[s,a]=o.useState({}),i=async f=>{confirm("Are you sure you want to delete this contact?")&&(await Oe.delete(f),n())},c=async(f,m)=>{var x,v,l;if(!f.linkedin){alert("No LinkedIn profile available for this contact.");return}const d=`${f.id}_${m}`;a({...s,[d]:!0});try{const h=m==="connect"?`Hi ${((x=f.full_name)==null?void 0:x.split(" ")[0])||""}, I'd like to connect and share some insights about your industry.`:`Hi ${((v=f.full_name)==null?void 0:v.split(" ")[0])||""}, I have some valuable market intelligence that might interest your team. Would you be open to a quick conversation?`,j=await wr({action:m,profile_url:f.linkedin,message:h,contactId:f.id});if(j.status===200)alert(`LinkedIn ${m} initiated for ${f.full_name}.`),await Oe.update(f.id,{last_contacted:new Date().toISOString()}),n();else throw new Error(((l=j.data)==null?void 0:l.error)||`LinkedIn ${m} failed`)}catch(h){console.error(`LinkedIn ${m} error:`,h),alert(`Failed to ${m} ${f.full_name}. ${h.message}`)}finally{a({...s,[d]:!1})}};return e.jsxs(S,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:((u=t.full_name)==null?void 0:u.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.title}),t.dept&&e.jsx("p",{className:"text-sm text-gray-500",children:t.dept}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[t.email&&e.jsxs("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(tr,{className:"w-4 h-4"}),t.email]}),t.phone&&e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),t.phone]}),t.linkedin&&e.jsxs("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx($e,{className:"w-4 h-4"}),"LinkedIn"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.linkedin&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{size:"sm",variant:"outline",onClick:()=>c(t,"connect"),disabled:s[`${t.id}_connect`],className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:s[`${t.id}_connect`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-4 h-4 mr-1"}),"Connect"]})}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>c(t,"message"),disabled:s[`${t.id}_message`],className:"text-green-600 border-green-200 hover:bg-green-50",children:s[`${t.id}_message`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsxs(e.Fragment,{children:[e.jsx(br,{className:"w-4 h-4 mr-1"}),"Message"]})})]}),e.jsxs(es,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(Pr,{className:"w-4 h-4"})})}),e.jsxs(zt,{children:[e.jsxs(ye,{onClick:r,children:[" ",e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Edit Contact"]}),e.jsxs(ye,{onClick:()=>i(t.id),className:"text-red-600",children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"Delete Contact"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.verified&&e.jsx(O,{className:"bg-green-100 text-green-800",children:"Verified"}),t.source&&e.jsx(O,{className:`${cs(t.source)}`,children:t.source}),t.response_status&&e.jsx(O,{className:`${ls(t.response_status)}`,children:(p=t.response_status)==null?void 0:p.replace("_"," ")}),t.last_contacted&&e.jsxs(O,{variant:"outline",children:["Contacted ",be(new Date(t.last_contacted),"MMM dd")]})]})]})};function Ts({company:t,contacts:n,onAddContact:r,onFindContacts:s,isLoadingContacts:a,onRefresh:i,user:c}){const[u,p]=o.useState(!1),[f,m]=o.useState(null),[d,x]=o.useState(!1);o.useEffect(()=>{t&&c?(async()=>{try{const{data:j}=await Fe({list:!0}),N=new Set(j.map(y=>y.company_id));x(N.has(t.company_id||t.id))}catch(j){console.error("Error checking save status:",j),x(!1)}})():x(!1)},[t,c]);const v=async()=>{try{await Fe({companyId:t.company_id||t.id}),x(!0),m(null),p(!0)}catch(h){console.error("Error saving company:",h),alert("Failed to save company.")}},l=h=>{m(h),p(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Contacts (",(n==null?void 0:n.length)||0,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",onClick:s,disabled:a||!d,className:"flex items-center gap-2",children:[a?e.jsx(we,{className:"w-4 h-4 animate-spin"}):e.jsx(er,{className:"w-4 h-4"}),"Find Contacts"]}),d?e.jsxs(b,{onClick:()=>{m(null),p(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(We,{className:"w-4 h-4"}),"Add Contact"]}):e.jsxs(b,{onClick:v,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4"}),"Save Company to Add Contacts"]})]})]}),!d&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-800",children:"Save Company Required"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You need to save this company to your CRM before adding or managing contacts. This helps organize your prospects and enables campaign features."})]})]}),e.jsx(b,{onClick:v,className:"mt-3 bg-amber-600 hover:bg-amber-700 text-white",children:"Save Company & Add Contacts"})]}),u&&e.jsx(Br,{company:t,contact:f,onSave:h=>{r(h),p(!1),m(null)},onCancel:()=>{p(!1),m(null)}}),n&&n.length>0?e.jsx("div",{className:"grid gap-4",children:n.map(h=>e.jsx(ds,{contact:h,onRefresh:i,onEdit:()=>l(h)},h.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-sm mb-4",children:"Start building your prospect database by finding or adding contacts"}),d&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(b,{variant:"outline",onClick:s,disabled:a,children:"Find Contacts"}),e.jsx(b,{onClick:()=>{m(null),p(!0)},children:"Add Contact Manually"})]})]})]})}function Os({company:t,onCompanyUpdate:n,user:r,isGated:s,onUnlock:a,isLoading:i,onEnrich:c,isEnriching:u}){const[p,f]=o.useState(null),[m,d]=o.useState(null),x=async()=>{var v,l;if(t!=null&&t.id){d(null);try{const h=await Nr({company_id:t.id});(v=h.data)!=null&&v.ok?(f({profile:h.data.profile,score:h.data.score}),n&&n({...t,enrichment_status:"enriched",enrichment_data:h.data})):d(((l=h.data)==null?void 0:l.error)||"Enrichment failed")}catch(h){console.error("Enrichment error:",h),d("Enrichment failed: "+h.message)}}};return s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-4",children:e.jsx(xe,{className:"mx-auto h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Insights Available"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:"Save this company to unlock AI-powered insights including trade patterns, commodities analysis, and business intelligence."}),e.jsxs(b,{onClick:a,disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:[i&&e.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Company to Unlock"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Business Intelligence"}),e.jsxs(b,{onClick:x,disabled:u,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800",children:[u&&e.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(xe,{className:"w-4 h-4 mr-2"}),u?"Enriching...":"Enrich Now"]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:m})}),p?e.jsxs("div",{className:"space-y-6",children:[p.score&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5 text-green-600"}),"Business Score"]})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:p.score.overall||"N/A"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Overall business activity score based on trade patterns and volume"})})]})})]}),p.profile&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.profile.top_lanes&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-blue-600"}),"Top Trade Lanes"]})}),e.jsx(I,{className:"space-y-2",children:p.profile.top_lanes.map((v,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:v.route}),e.jsxs(O,{variant:"outline",children:[v.volume," shipments"]})]},l))})]}),p.profile.top_commodities&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-600"}),"Top Commodities"]})}),e.jsx(I,{className:"space-y-2",children:p.profile.top_commodities.map((v,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:v.name}),e.jsxs(O,{variant:"outline",children:[v.percentage,"%"]})]},l))})]}),p.profile.top_carriers&&e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),"Preferred Carriers"]})}),e.jsx(I,{className:"space-y-2",children:p.profile.top_carriers.map((v,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:v.name}),e.jsxs(O,{variant:"outline",children:[v.share,"%"]})]},l))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate AI Insights"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:'Click "Enrich Now" to generate comprehensive business intelligence using AI analysis of trade patterns.'})]})]})}function Ls({notes:t,onAddNote:n,isLoading:r}){const[s,a]=o.useState(""),i=()=>{s.trim()&&(n(s),a(""))};return r?e.jsx("div",{className:"text-center",children:"Loading notes..."}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notes & Activity Log"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(Mr,{placeholder:"Add a note about this company...",value:s,onChange:c=>a(c.target.value),className:"mb-2"}),e.jsxs(b,{onClick:i,size:"sm",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Add Note"]})]}),e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(c=>e.jsx(S,{className:"bg-gray-50",children:e.jsxs(I,{className:"p-4",children:[e.jsx("p",{className:"text-sm",children:c.content}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex justify-between",children:[e.jsxs("span",{children:["by ",c.created_by.split("@")[0]]}),e.jsx("span",{children:be(new Date(c.created_date),"MMM dd, yyyy HH:mm")})]})]})},c.id)):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"No notes yet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add a note to keep track of your interactions."})]})})]})}export{Sr as B,Rr as C,Os as E,Ls as N,Ds as O,xe as S,Xe as T,Es as a,Ts as b};
