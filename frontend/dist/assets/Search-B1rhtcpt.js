import{c as ze,r as o,j as e,f as W,g as Nt,a as Re,T as Fe,B as $,u as Ct,h as kt,S as De}from"./main-DPL4Ezh_.js";import{u as Le,C as At}from"./CompanyDrawer-DV_xLJOI.js";import{g as Pt,k as $e,p as Ee,s as Rt}from"./api-CmmA9ncb.js";import{I as Dt}from"./input-DF9GpQAV.js";import{c as Me}from"./index-DR9D_4bA.js";import{S as Te}from"./skeleton-B6mv1RRe.js";import"./checkbox-DYzSOSxH.js";import{c as Be,u as Et,a as Mt}from"./select-COBapomf.js";import{u as Tt,c as It,a as zt,b as Q,P as J,d as Ft}from"./index-oGm7SI7y.js";import{C as Oe}from"./circle-alert-C-mR4L-i.js";import{B as Ve,C as Lt}from"./CompanyDetailModal-B8_60MbD.js";import{B as Ke}from"./badge-DNDRWVD8.js";import{M as $t,i as Bt,u as Ue,P as Ot,a as Vt,b as Kt,L as Ut,m as me}from"./proxy-iKOVeoXc.js";import{C as He}from"./calendar-dwZdpd3F.js";import{S as qe}from"./ship-Y2QV3WQ7.js";import{L as Ye}from"./loader-circle-DmXlt7YP.js";import{B as Ge,C as Ht}from"./NotesTab-B0m9UeSB.js";import{f as Qe}from"./format-DIePDvv_.js";import{L as qt}from"./list-BmHhMrMH.js";import{U as Yt}from"./UpgradePrompt-Di7YwXSX.js";import"./tabs-CPxVDOUA.js";import"./index-Bg0uv8Ao.js";import"./dialog-DAKQ04LV.js";import"./entities-CpFcElq0.js";import"./base44Client-C-YMJfZQ.js";import"./lock-HwrOvULA.js";import"./truck-BLJ8j6Xz.js";import"./label-DG3PjO1S.js";import"./functions-BWeQRtE-.js";import"./plus-Bbq3mkyg.js";import"./users-4kj50SU9.js";import"./message-square-D1T0iJTt.js";import"./trash-2-D6OKDbr7.js";import"./textarea-IzHi5zKC.js";import"./crown-DQMIdL9L.js";import"./zap-DrDka4a3.js";import"./arrow-right-CJ41cODG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qt=ze("ChevronLeft",Gt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Xt=ze("LayoutGrid",Wt);class Zt extends o.Component{getSnapshotBeforeUpdate(r){const a=this.props.childRef.current;if(a&&r.isPresent&&!this.props.isPresent){const l=a.offsetParent,n=Bt(l)&&l.offsetWidth||0,i=this.props.sizeRef.current;i.height=a.offsetHeight||0,i.width=a.offsetWidth||0,i.top=a.offsetTop,i.left=a.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Jt({children:t,isPresent:r,anchorX:a,root:l}){const n=o.useId(),i=o.useRef(null),d=o.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=o.useContext($t);return o.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:s,right:c}=d.current;if(r||!i.current||!h||!f)return;const m=a==="left"?`left: ${s}`:`right: ${c}`;i.current.dataset.motionPopId=n;const g=document.createElement("style");x&&(g.nonce=x);const u=l??document.head;return u.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${m}px !important;
            top: ${p}px !important;
          }
        `),()=>{u.contains(g)&&u.removeChild(g)}},[r]),e.jsx(Zt,{isPresent:r,childRef:i,sizeRef:d,children:o.cloneElement(t,{ref:i})})}const es=({children:t,initial:r,isPresent:a,onExitComplete:l,custom:n,presenceAffectsLayout:i,mode:d,anchorX:x,root:h})=>{const f=Ue(ts),p=o.useId();let s=!0,c=o.useMemo(()=>(s=!1,{id:p,initial:r,isPresent:a,custom:n,onExitComplete:m=>{f.set(m,!0);for(const g of f.values())if(!g)return;l&&l()},register:m=>(f.set(m,!1),()=>f.delete(m))}),[a,f,l]);return i&&s&&(c={...c}),o.useMemo(()=>{f.forEach((m,g)=>f.set(g,!1))},[a]),o.useEffect(()=>{!a&&!f.size&&l&&l()},[a]),d==="popLayout"&&(t=e.jsx(Jt,{isPresent:a,anchorX:x,root:h,children:t})),e.jsx(Ot.Provider,{value:c,children:t})};function ts(){return new Map}const ae=t=>t.key||"";function Ie(t){const r=[];return o.Children.forEach(t,a=>{o.isValidElement(a)&&r.push(a)}),r}const ss=({children:t,custom:r,initial:a=!0,onExitComplete:l,presenceAffectsLayout:n=!0,mode:i="sync",propagate:d=!1,anchorX:x="left",root:h})=>{const[f,p]=Vt(d),s=o.useMemo(()=>Ie(t),[t]),c=d&&!f?[]:s.map(ae),m=o.useRef(!0),g=o.useRef(s),u=Ue(()=>new Map),[w,y]=o.useState(s),[S,_]=o.useState(s);Kt(()=>{m.current=!1,g.current=s;for(let k=0;k<S.length;k++){const N=ae(S[k]);c.includes(N)?u.delete(N):u.get(N)!==!0&&u.set(N,!1)}},[S,c.length,c.join("-")]);const v=[];if(s!==w){let k=[...s];for(let N=0;N<S.length;N++){const M=S[N],U=ae(M);c.includes(U)||(k.splice(N,0,M),v.push(M))}return i==="wait"&&v.length&&(k=v),_(Ie(k)),y(s),null}const{forceRender:R}=o.useContext(Ut);return e.jsx(e.Fragment,{children:S.map(k=>{const N=ae(k),M=d&&!f?!1:s===S||c.includes(N),U=()=>{if(u.has(N))u.set(N,!0);else return;let I=!0;u.forEach(A=>{A||(I=!1)}),I&&(R==null||R(),_(g.current),d&&(p==null||p()),l&&l())};return e.jsx(es,{isPresent:M,initial:!m.current||a?void 0:!1,custom:r,presenceAffectsLayout:n,mode:i,root:h,onExitComplete:M?void 0:U,anchorX:x,children:k},N)})})};var We=["PageUp","PageDown"],Xe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ze={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},X="Slider",[le,rs,as]=zt(X),[Je,dr]=It(X,[as]),[ns,ne]=Je(X),et=o.forwardRef((t,r)=>{const{name:a,min:l=0,max:n=100,step:i=1,orientation:d="horizontal",disabled:x=!1,minStepsBetweenThumbs:h=0,defaultValue:f=[l],value:p,onValueChange:s=()=>{},onValueCommit:c=()=>{},inverted:m=!1,form:g,...u}=t,w=o.useRef(new Set),y=o.useRef(0),_=d==="horizontal"?is:os,[v=[],R]=Tt({prop:p,defaultProp:f,onChange:A=>{var B;(B=[...w.current][y.current])==null||B.focus(),s(A)}}),k=o.useRef(v);function N(A){const z=us(v,A);I(A,z)}function M(A){I(A,y.current)}function U(){const A=k.current[y.current];v[y.current]!==A&&c(v)}function I(A,z,{commit:B}={commit:!1}){const ee=fs(i),Z=gs(Math.round((A-l)/i)*i+l,ee),G=Be(Z,[l,n]);R((O=[])=>{const V=cs(O,G,z);if(ps(V,h*i)){y.current=V.indexOf(G);const te=String(V)!==String(O);return te&&B&&c(V),te?V:O}else return O})}return e.jsx(ns,{scope:t.__scopeSlider,name:a,disabled:x,min:l,max:n,valueIndexToChangeRef:y,thumbs:w.current,values:v,orientation:d,form:g,children:e.jsx(le.Provider,{scope:t.__scopeSlider,children:e.jsx(le.Slot,{scope:t.__scopeSlider,children:e.jsx(_,{"aria-disabled":x,"data-disabled":x?"":void 0,...u,ref:r,onPointerDown:Q(u.onPointerDown,()=>{x||(k.current=v)}),min:l,max:n,inverted:m,onSlideStart:x?void 0:N,onSlideMove:x?void 0:M,onSlideEnd:x?void 0:U,onHomeKeyDown:()=>!x&&I(l,0,{commit:!0}),onEndKeyDown:()=>!x&&I(n,v.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:z})=>{if(!x){const Z=We.includes(A.key)||A.shiftKey&&Xe.includes(A.key)?10:1,G=y.current,O=v[G],V=i*Z*z;I(O+V,G,{commit:!0})}}})})})})});et.displayName=X;var[tt,st]=Je(X,{startEdge:"left",endEdge:"right",size:"width",direction:1}),is=o.forwardRef((t,r)=>{const{min:a,max:l,dir:n,inverted:i,onSlideStart:d,onSlideMove:x,onSlideEnd:h,onStepKeyDown:f,...p}=t,[s,c]=o.useState(null),m=W(r,_=>c(_)),g=o.useRef(void 0),u=Ft(n),w=u==="ltr",y=w&&!i||!w&&i;function S(_){const v=g.current||s.getBoundingClientRect(),R=[0,v.width],N=ue(R,y?[a,l]:[l,a]);return g.current=v,N(_-v.left)}return e.jsx(tt,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(rt,{dir:u,"data-orientation":"horizontal",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const v=S(_.clientX);d==null||d(v)},onSlideMove:_=>{const v=S(_.clientX);x==null||x(v)},onSlideEnd:()=>{g.current=void 0,h==null||h()},onStepKeyDown:_=>{const R=Ze[y?"from-left":"from-right"].includes(_.key);f==null||f({event:_,direction:R?-1:1})}})})}),os=o.forwardRef((t,r)=>{const{min:a,max:l,inverted:n,onSlideStart:i,onSlideMove:d,onSlideEnd:x,onStepKeyDown:h,...f}=t,p=o.useRef(null),s=W(r,p),c=o.useRef(void 0),m=!n;function g(u){const w=c.current||p.current.getBoundingClientRect(),y=[0,w.height],_=ue(y,m?[l,a]:[a,l]);return c.current=w,_(u-w.top)}return e.jsx(tt,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:e.jsx(rt,{"data-orientation":"vertical",...f,ref:s,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:u=>{const w=g(u.clientY);i==null||i(w)},onSlideMove:u=>{const w=g(u.clientY);d==null||d(w)},onSlideEnd:()=>{c.current=void 0,x==null||x()},onStepKeyDown:u=>{const y=Ze[m?"from-bottom":"from-top"].includes(u.key);h==null||h({event:u,direction:y?-1:1})}})})}),rt=o.forwardRef((t,r)=>{const{__scopeSlider:a,onSlideStart:l,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:d,onEndKeyDown:x,onStepKeyDown:h,...f}=t,p=ne(X,a);return e.jsx(J.span,{...f,ref:r,onKeyDown:Q(t.onKeyDown,s=>{s.key==="Home"?(d(s),s.preventDefault()):s.key==="End"?(x(s),s.preventDefault()):We.concat(Xe).includes(s.key)&&(h(s),s.preventDefault())}),onPointerDown:Q(t.onPointerDown,s=>{const c=s.target;c.setPointerCapture(s.pointerId),s.preventDefault(),p.thumbs.has(c)?c.focus():l(s)}),onPointerMove:Q(t.onPointerMove,s=>{s.target.hasPointerCapture(s.pointerId)&&n(s)}),onPointerUp:Q(t.onPointerUp,s=>{const c=s.target;c.hasPointerCapture(s.pointerId)&&(c.releasePointerCapture(s.pointerId),i(s))})})}),at="SliderTrack",nt=o.forwardRef((t,r)=>{const{__scopeSlider:a,...l}=t,n=ne(at,a);return e.jsx(J.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...l,ref:r})});nt.displayName=at;var de="SliderRange",it=o.forwardRef((t,r)=>{const{__scopeSlider:a,...l}=t,n=ne(de,a),i=st(de,a),d=o.useRef(null),x=W(r,d),h=n.values.length,f=n.values.map(c=>dt(c,n.min,n.max)),p=h>1?Math.min(...f):0,s=100-Math.max(...f);return e.jsx(J.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...l,ref:x,style:{...t.style,[i.startEdge]:p+"%",[i.endEdge]:s+"%"}})});it.displayName=de;var ce="SliderThumb",ot=o.forwardRef((t,r)=>{const a=rs(t.__scopeSlider),[l,n]=o.useState(null),i=W(r,x=>n(x)),d=o.useMemo(()=>l?a().findIndex(x=>x.ref.current===l):-1,[a,l]);return e.jsx(ls,{...t,ref:i,index:d})}),ls=o.forwardRef((t,r)=>{const{__scopeSlider:a,index:l,name:n,...i}=t,d=ne(ce,a),x=st(ce,a),[h,f]=o.useState(null),p=W(r,S=>f(S)),s=h?d.form||!!h.closest("form"):!0,c=Et(h),m=d.values[l],g=m===void 0?0:dt(m,d.min,d.max),u=ms(l,d.values.length),w=c==null?void 0:c[x.size],y=w?hs(w,g,x.direction):0;return o.useEffect(()=>{if(h)return d.thumbs.add(h),()=>{d.thumbs.delete(h)}},[h,d.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[x.startEdge]:`calc(${g}% + ${y}px)`},children:[e.jsx(le.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(J.span,{role:"slider","aria-label":t["aria-label"]||u,"aria-valuemin":d.min,"aria-valuenow":m,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...i,ref:p,style:m===void 0?{display:"none"}:t.style,onFocus:Q(t.onFocus,()=>{d.valueIndexToChangeRef.current=l})})}),s&&e.jsx(lt,{name:n??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:m},l)]})});ot.displayName=ce;var ds="RadioBubbleInput",lt=o.forwardRef(({__scopeSlider:t,value:r,...a},l)=>{const n=o.useRef(null),i=W(n,l),d=Mt(r);return o.useEffect(()=>{const x=n.current;if(!x)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==r&&p){const s=new Event("input",{bubbles:!0});p.call(x,r),x.dispatchEvent(s)}},[d,r]),e.jsx(J.input,{style:{display:"none"},...a,ref:i,defaultValue:r})});lt.displayName=ds;function cs(t=[],r,a){const l=[...t];return l[a]=r,l.sort((n,i)=>n-i)}function dt(t,r,a){const i=100/(a-r)*(t-r);return Be(i,[0,100])}function ms(t,r){return r>2?`Value ${t+1} of ${r}`:r===2?["Minimum","Maximum"][t]:void 0}function us(t,r){if(t.length===1)return 0;const a=t.map(n=>Math.abs(n-r)),l=Math.min(...a);return a.indexOf(l)}function hs(t,r,a){const l=t/2,i=ue([0,50],[0,l]);return(l-i(r)*a)*a}function xs(t){return t.slice(0,-1).map((r,a)=>t[a+1]-r)}function ps(t,r){if(r>0){const a=xs(t);return Math.min(...a)>=r}return!0}function ue(t,r){return a=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const l=(r[1]-r[0])/(t[1]-t[0]);return r[0]+l*(a-t[0])}}function fs(t){return(String(t).split(".")[1]||"").length}function gs(t,r){const a=Math.pow(10,r);return Math.round(t*a)/a}var ct=et,bs=nt,ys=it,vs=ot;const mt=o.forwardRef(({className:t,...r},a)=>e.jsxs(ct,{ref:a,className:Nt("relative flex w-full touch-none select-none items-center",t),...r,children:[e.jsx(bs,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(ys,{className:"absolute h-full bg-primary"})}),e.jsx(vs,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));mt.displayName=ct.displayName;function js(t){if(!t)return{};const r=t.data?t.data:t;return{origin_countries:Array.isArray(r.origin_countries)?r.origin_countries:Array.isArray(r.origins)?r.origins:[],destination_countries:Array.isArray(r.destination_countries)?r.destination_countries:Array.isArray(r.destinations)?r.destinations:[],modes:Array.isArray(r.modes)?r.modes:[],carriers:Array.isArray(r.carriers)?r.carriers:[],hs_prefixes:Array.isArray(r.hs_prefixes)?r.hs_prefixes:Array.isArray(r.hs_codes)?r.hs_codes:[]}}function Ss({onChange:t}){const[r,a]=o.useState({origins:[],destinations:[],modes:[],carriers:[],hs:[]}),[l,n]=o.useState(!1),[i,d]=o.useState({origin:"",destination:"",mode:"any",date_start:"",date_end:"",carrier:"",hs:[],hs_text:"",origin_city:"",origin_state:"",origin_zip:"",dest_city:"",dest_state:"",dest_zip:"",value_min:0,value_max:0}),{data:x,isLoading:h,error:f}=Le({queryKey:["filter-options"],queryFn:()=>Pt({}),staleTime:1e3*60*10});o.useEffect(()=>{if(x){const s=js(x);a({origins:s.origin_countries.sort(),destinations:s.destination_countries.sort(),modes:s.modes.sort(),carriers:s.carriers.sort(),hs:s.hs_prefixes.sort()})}},[x]),o.useEffect(()=>{const s=setTimeout(()=>{t==null||t(i)},300);return()=>clearTimeout(s)},[i,t]);const p=(s,c)=>{if(s==="origin_city"||s==="dest_city"){d(m=>({...m,[s]:c}));return}if(s==="origin_state"||s==="dest_state"){const m=(c||"").toUpperCase().slice(0,2);d(g=>({...g,[s]:m}));return}if(s==="origin_zip"||s==="dest_zip"){const m=String(c||"").replace(/[^0-9]/g,"").slice(0,10);d(g=>({...g,[s]:m}));return}d(m=>({...m,[s]:c}))};return f?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md my-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Oe,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:["Could not load search filters. Please try again later. (",f.message||String(f),")"]})})]})}):h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:Array.from({length:5}).map((s,c)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{className:"h-4 w-24"}),e.jsx(Te,{className:"h-10 w-full"})]},c))}):e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{type:"button",className:"md:hidden inline-flex items-center px-3 py-2 text-sm rounded-lg border bg-white",onClick:()=>n(s=>!s),children:l?"Hide Filters":"Show Filters"}),e.jsx("div",{})]}),e.jsxs("div",{className:`${l?"grid":"hidden"} md:grid grid-cols-1 md:grid-cols-6 gap-4`,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin Country"}),e.jsxs("select",{id:"origin",value:i.origin,onChange:s=>p("origin",s.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Origin"}),r.origins.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Country"}),e.jsxs("select",{id:"destination",value:i.destination,onChange:s=>p("destination",s.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Destination"}),r.destinations.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin City"}),e.jsx("input",{id:"origin_city",type:"text",value:i.origin_city,onChange:s=>p("origin_city",s.target.value),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., Los Angeles"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin State"}),e.jsx("input",{id:"origin_state",type:"text",value:i.origin_state,onChange:s=>p("origin_state",s.target.value.toUpperCase().slice(0,2)),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., CA"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin_zip",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin ZIP"}),e.jsx("input",{id:"origin_zip",type:"text",inputMode:"numeric",pattern:"\\\\d*",value:i.origin_zip,onChange:s=>p("origin_zip",s.target.value.replace(/[^0-9]/g,"").slice(0,10)),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., 90001"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dest_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination City"}),e.jsx("input",{id:"dest_city",type:"text",value:i.dest_city,onChange:s=>p("dest_city",s.target.value),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., Shanghai"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dest_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination State"}),e.jsx("input",{id:"dest_state",type:"text",value:i.dest_state,onChange:s=>p("dest_state",s.target.value.toUpperCase().slice(0,2)),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., NY"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dest_zip",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination ZIP"}),e.jsx("input",{id:"dest_zip",type:"text",inputMode:"numeric",pattern:"\\\\d*",value:i.dest_zip,onChange:s=>p("dest_zip",s.target.value.replace(/[^0-9]/g,"").slice(0,10)),disabled:h,className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"e.g., 10001"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode"}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:["any","air","ocean"].map(s=>e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"mode",value:s,checked:i.mode===s,onChange:c=>p("mode",c.target.value)}),e.jsx("span",{className:"capitalize",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"carrier",className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier"}),e.jsxs("select",{id:"carrier",value:i.carrier,onChange:s=>p("carrier",s.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Carrier"}),r.carriers.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hs_text",className:"block text-sm font-medium text-gray-700 mb-1",children:"HS Codes"}),e.jsx("input",{id:"hs_text",type:"text",value:i.hs_text,onChange:s=>p("hs_text",s.target.value),placeholder:"Enter HS codes (comma-separated), e.g., 8471, 8517, 9403",className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shipment Value (USD)"}),e.jsxs("div",{className:"px-2",children:[e.jsx(mt,{min:0,max:1e6,step:1e4,value:[i.value_min,i.value_max||1e6],onValueChange:([s,c])=>d(m=>({...m,value_min:s,value_max:c}))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsxs("span",{children:["$","{",i.value_min.toLocaleString(),"}"]}),e.jsxs("span",{children:["$","{",(i.value_max||1e6).toLocaleString(),"}"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_start",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Start"}),e.jsx("input",{type:"date",id:"date_start",value:i.date_start,onChange:s=>p("date_start",s.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_end",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date End"}),e.jsx("input",{type:"date",id:"date_end",value:i.date_end,onChange:s=>p("date_end",s.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]})]})}function ws({company:t,onSelect:r,onSave:a,isSaving:l,isSaved:n,isNew:i,onStartOutreach:d,onDraftRFP:x,savingCompanyId:h}){const f=u=>u?u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(0)}K`:u.toLocaleString():"0",p=h===t.id,{shipments12m:s,lastActivity:c,originsTop:m,carriersTop:g}=$e({company_id:t.company_id||t.id||null,company_name:t.company_name||t.name||"Unknown",shipments_12m:t.shipments_12m,shipments12m:t.shipments_12m,shipments:t.shipments,last_activity:t.last_seen,lastActivity:t.last_seen,lastShipmentDate:t.last_seen,origins_top:t.origins_top,originsTop:t.originsTop,dests_top:t.dests_top,destsTop:t.destsTop,carriers_top:t.carriers_top,carriersTop:t.carriersTop});return e.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},className:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 md:p-5 shadow-lg border border-gray-200/60 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>r(t),children:[i&&e.jsx("div",{className:"mb-3",children:e.jsx(Ke,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:"New Shipper"})}),e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate text-lg mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsxs("span",{children:["ID: ",t.id]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 font-medium mb-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),"Shipments (12M)"]}),e.jsx("div",{className:"text-lg font-bold text-blue-900",children:f(s)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 font-medium mb-1",children:[e.jsx(He,{className:"w-3 h-3"}),"Last Activity"]}),e.jsx("div",{className:"text-sm font-bold text-purple-900",children:c?Qe(new Date(c),"MMM d"):"N/A"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Route:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:m!=null&&m[0]?`${m[0]} → `:t.origin&&t.destination?`${t.origin} → ${t.destination}`:"Various routes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Carrier:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:(g==null?void 0:g[0])||"Multiple carriers"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-1",onClick:u=>u.stopPropagation(),children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>a(t),disabled:p||n,className:"flex-1",children:[p&&e.jsx(Ye,{className:"mr-2 h-3 w-3 animate-spin"}),n?e.jsx(Ve,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(Ge,{className:"w-3 h-3 mr-1"}),n?"Saved":"Save"]}),e.jsx($,{size:"sm",onClick:u=>{u.stopPropagation(),n?window.location.href=`/app/companies/${t.id||t.company_id}`:r(t)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})}function _s({company:t,onSelect:r,onSave:a,isSaving:l,isSaved:n,isNew:i,onStartOutreach:d,onDraftRFP:x,savingCompanyId:h,index:f=0}){const p=u=>u?u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(0)}K`:u.toLocaleString():"0",s=h===t.id,{shipments12m:c,lastActivity:m,originsTop:g}=$e({company_id:t.company_id||t.id||null,company_name:t.company_name||t.name||"Unknown",shipments_12m:t.shipments_12m,shipments12m:t.shipments_12m,shipments:t.shipments,last_activity:t.last_seen,lastActivity:t.last_seen,lastShipmentDate:t.last_seen,origins_top:t.origins_top,originsTop:t.originsTop,dests_top:t.dests_top,destsTop:t.destsTop,carriers_top:t.carriers_top,carriersTop:t.carriersTop});return e.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:f*.05},className:"p-4 hover:bg-gray-50 transition-all duration-200 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>r(t),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:t.company_name||t.name}),i&&e.jsx(Ke,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs",children:"New"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["ID: ",t.company_id||t.id]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:(t.summary||t.description||`Top route ${t.top_route||"various"}; top carrier ${t.top_carrier||"various"}.`).toString()}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"})," Shipments (12M): ",e.jsx("b",{className:"text-gray-900 ml-1",children:p(c)})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"w-3 h-3"})," Last: ",e.jsx("b",{className:"text-gray-900 ml-1",children:m?Qe(new Date(m),"MMM d"):"N/A"})]}),e.jsxs("span",{className:"hidden md:flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"})," Route: ",e.jsx("b",{className:"text-gray-900 ml-1 truncate max-w-[220px]",children:(g==null?void 0:g[0])||t.top_route||"Various"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:u=>u.stopPropagation(),children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>a(t),disabled:s||n,children:[s&&e.jsx(Ye,{className:"mr-2 h-3 w-3 animate-spin"}),n?e.jsx(Ve,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(Ge,{className:"w-3 h-3 mr-1"}),n?"Saved":"Save"]}),e.jsx($,{size:"sm",onClick:()=>{n?window.location.href=`/app/companies/${t.id||t.company_id}`:r(t)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})})}function Ns({searchResults:t,totalResults:r,isLoading:a,onCompanySelect:l,onSave:n,onStartOutreach:i,onDraftRFP:d,user:x,newShipperEvents:h,savedCompanyIds:f,savingCompanyId:p,viewMode:s,setViewMode:c,currentPage:m,totalPages:g,onPageChange:u}){const w=t&&t.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Search Results"}),!a&&e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Found ",Number(r||0).toLocaleString()," companies • Showing ",(t==null?void 0:t.length)||0," on this page"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsxs($,{size:"sm",variant:s==="grid"?"secondary":"ghost",onClick:()=>c("grid"),className:"h-8 px-3",children:[e.jsx(Xt,{className:"w-4 h-4 mr-1"}),"Cards"]}),e.jsxs($,{size:"sm",variant:s==="list"?"secondary":"ghost",onClick:()=>c("list"),className:"h-8 px-3",children:[e.jsx(qt,{className:"w-4 h-4 mr-1"}),"List"]})]}),g>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"outline",size:"sm",onClick:()=>u(m-1),disabled:m===1||a,className:"h-8",children:e.jsx(Qt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 px-2",children:["Page ",m," of ",g]}),e.jsx($,{variant:"outline",size:"sm",onClick:()=>u(m+1),disabled:m>=g||a,className:"h-8",children:e.jsx(Ht,{className:"h-4 w-4"})})]})]})]}),a?e.jsx("div",{className:`grid gap-4 md:gap-6 ${s==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:Array.from({length:12}).map((y,S)=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"})]})]},S))}):w?e.jsxs("div",{className:`grid gap-4 md:gap-6 ${s==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:[e.jsx(ss,{children:t.map(y=>{const S=y.company_id||y.id,_=p===S,v=f.has(S),R=h.includes(S);return s==="grid"?e.jsx(ws,{company:y,onSelect:l,onSave:n,isSaving:_,isSaved:v,isNew:R,onStartOutreach:i,onDraftRFP:d,savingCompanyId:p},S):e.jsx(_s,{company:y,onSelect:l,onSave:n,isSaving:_,isSaved:v,isNew:R,onStartOutreach:i,onDraftRFP:d,savingCompanyId:p},S)})}),m<g&&e.jsx("div",{className:"col-span-full flex justify-center mt-2",children:e.jsx($,{variant:"outline",onClick:()=>u(m+1),disabled:a,children:"Load More"})})]}):e.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(Oe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No results found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-sm mx-auto",children:"Try adjusting your search query or filters to find companies."})]})]})}const K=50;function cr(){var pe,fe,ge,be,ye;const t=Ct(),{user:r}=kt(),[a,l]=o.useState(""),[n,i]=o.useState({mode:"any",origin:"",destination:"",carrier:"",hs:[],date_start:null,date_end:null}),[d,x]=o.useState([]),[h,f]=o.useState(!1),[p,s]=o.useState(""),[c,m]=o.useState(null),[g,u]=o.useState(!1),[w,y]=o.useState(!1),[S,_]=o.useState(""),[v,R]=o.useState(1),[k,N]=o.useState(0),[M,U]=o.useState(new Set),[I,A]=o.useState(null),[z,B]=o.useState(null),[ee,Z]=o.useState("grid"),[G,O]=o.useState(!1),[V,te]=o.useState(""),[ie,ut]=o.useState(!1);o.useEffect(()=>{const b=setTimeout(()=>s(a),300);return()=>clearTimeout(b)},[a]),o.useEffect(()=>{ie&&se(1)},[p,n]);const ht=o.useMemo(()=>Math.max(1,Math.ceil((k||0)/K)),[k]),se=o.useCallback(async b=>{const P=b||1;f(!0),B(null),R(P),ut(!0);try{const D=(P-1)*K,T=C=>String(C).replace(/["']/g,"").trim(),E=(n.hs_text||"").split(",").map(T).filter(Boolean),L=((Array.isArray(n.hs)?Array.from(new Set([...n.hs,...E])):E)||[]).map(C=>C.replace(/[^0-9]/g,"")).filter(Boolean),H=n.mode&&n.mode!=="any"?n.mode==="air"?"air":"ocean":void 0,q=n.origin?[T(n.origin)]:[],bt=n.destination?[T(n.destination)]:[],ve=T(a||""),yt={...ve?{q:ve}:{},...H?{mode:H}:{},origin:q,dest:bt,hs:L,limit:K,offset:D},Y=await Ee(yt),je=Array.isArray(Y==null?void 0:Y.items)?Y.items:[],vt=typeof(Y==null?void 0:Y.total)=="number"?Y.total:je.length,jt=je.map(C=>{var we,_e,Ne,Ce,ke,Ae,Pe;const re=C.company_id||C.id||((Ce=(_e=(we=C.company_name||"").toLowerCase)==null?void 0:(Ne=_e.call(we)).replace)==null?void 0:Ce.call(Ne,/[^a-z0-9]+/g,"-"))||void 0,St=C.company_name||"Unknown",wt=Array.isArray(C.originsTop)&&Array.isArray(C.destsTop)?`${((ke=C.originsTop[0])==null?void 0:ke.v)||""} → ${((Ae=C.destsTop[0])==null?void 0:Ae.v)||""}`.trim():void 0,_t=Array.isArray(C.carriersTop)&&((Pe=C.carriersTop[0])==null?void 0:Pe.v)||void 0;return{id:re,company_id:C.company_id||null,name:St,shipments_12m:C.shipments||0,last_seen:C.lastShipmentDate||null,top_route:wt,top_carrier:_t}}),Se=new Set,oe=[];for(const C of jt){const re=C.company_id||`name:${C.name}`;if(!Se.has(re)&&(Se.add(re),oe.push(C),oe.length>=K))break}x(oe),N(vt)}catch(D){console.error("Search error:",D),B((D==null?void 0:D.message)&&String(D.message)||"Search failed. Please try again."),x([]),N(0)}finally{f(!1)}},[a,n]),he=o.useMemo(()=>{const b=q=>String(q).replace(/["']/g,"").trim(),P=(n.hs_text||"").split(",").map(b).filter(Boolean),T=((Array.isArray(n.hs)?Array.from(new Set([...n.hs,...P])):P)||[]).map(q=>q.replace(/[^0-9]/g,"")).filter(Boolean),E=n.mode&&n.mode!=="any"?n.mode==="air"?"AIR":"OCEAN":void 0,j=n.origin?[b(n.origin)]:void 0,L=n.destination?[b(n.destination)]:void 0,H=b(a||"");return{...H?{q:H}:{},...E?{mode:E}:{},...j?{origin:j}:{},...L?{dest:L}:{},...T.length?{hs:T}:{},limit:K,offset:(v-1)*K}},[n,v,a]),F=Le({queryKey:["searchCompanies",he],queryFn:async()=>{const b=await Ee(he),D=(Array.isArray(b==null?void 0:b.items)?b.items:[]).map(j=>{var L,H,q;return{id:j.company_id||(j.company_name||"").toLowerCase().replace(/[^a-z0-9]+/g,"-"),company_id:j.company_id||null,name:j.company_name||"Unknown",shipments_12m:j.shipments||0,last_seen:j.lastShipmentDate||null,top_route:Array.isArray(j.originsTop)&&Array.isArray(j.destsTop)?`${((L=j.originsTop[0])==null?void 0:L.v)||""} → ${((H=j.destsTop[0])==null?void 0:H.v)||""}`.trim():void 0,top_carrier:Array.isArray(j.carriersTop)&&((q=j.carriersTop[0])==null?void 0:q.v)||void 0}}),T=new Set,E=[];for(const j of D){const L=j.company_id||`name:${j.name}`;if(!T.has(L)&&(T.add(L),E.push(j),E.length>=K))break}return{rows:E,meta:{total:b.total||E.length,page:v,page_size:K}}},keepPreviousData:!0,enabled:ie}),xt=o.useCallback(b=>{m(b),te(String((b==null?void 0:b.id)||(b==null?void 0:b.company_id)||"")),O(!0)},[]),xe=async b=>{if(I)return;const P=b.id;A(P);const D=new Set(M),T=D.has(P),E=new Set(D);T||E.add(P),U(E);try{const j=await Rt({company_id:String(b.company_id||b.id||""),company_name:String(b.name||b.company_name||"Unknown"),source:"search"});if(!j||!(j.status==="created"||j.status==="exists"))throw new Error("Save failed")}catch(j){console.error("Failed to save company:",j),U(D),alert("Failed to save company. Please try again.")}finally{A(null)}},pt=b=>{const P=b.id;P&&t(Me("EmailCenter?company_id="+P))},ft=b=>{const P=b.id;P&&t(Me("RFPStudio?company_id="+P))},gt=b=>{b>=1&&b<=ht&&!h&&se(b)};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Trade Intelligence Discovery"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Search companies by trade activity, routes, commodities, and shipping patterns"})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 md:p-6 mb-6 md:mb-8 border border-gray-200/60",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Dt,{value:a,onChange:b=>l(b.target.value),placeholder:"Search by company name or alias (e.g., UPS, Maersk)...",className:"pl-4 pr-12 py-3 text-base md:text-lg bg-gray-50 border-0 rounded-xl",onKeyDown:b=>{b.key==="Enter"&&se(1)}}),e.jsx(De,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsx($,{onClick:()=>se(1),disabled:h,className:"px-6 md:px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl",children:h?"Searching...":"Search"})]})}),e.jsx(Ss,{onChange:i}),z&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Search Error:"}),e.jsx("span",{children:z})]})}),ie?e.jsx(Ns,{searchResults:(pe=F.data)!=null&&pe.rows&&F.data.rows.length>0?F.data.rows:d,totalResults:(ge=(fe=F.data)==null?void 0:fe.meta)!=null&&ge.total&&F.data.meta.total>0?F.data.meta.total:k,isLoading:h||F.isLoading,onCompanySelect:xt,onSave:xe,onStartOutreach:pt,onDraftRFP:ft,user:r,newShipperEvents:[],savedCompanyIds:M,savingCompanyId:I,viewMode:ee,setViewMode:Z,currentPage:v,totalPages:Math.max(1,Math.ceil(((ye=(be=F.data)==null?void 0:be.meta)!=null&&ye.total&&F.data.meta.total>0?F.data.meta.total:k)/K||1)),onPageChange:gt}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(De,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Search"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"Enter a company name or use the filters above to search for trade intelligence data."})]}),e.jsx(Yt,{isOpen:w,onClose:()=>y(!1),feature:S,currentPlan:r==null?void 0:r.plan}),e.jsx(Lt,{company:c,isOpen:g,onClose:()=>u(!1),onSave:xe,user:r,isSaved:M.has(c==null?void 0:c.id)})]}),e.jsx(At,{id:V,open:G,onOpenChange:O})]})}export{cr as default};
