import{r as l,j as e,G,A,u as te,R as ae,C as I,b as re,d as ne,e as E,B as M,S as O,a as ce}from"./main-CNsx_jBw.js";import{I as T}from"./input-CZhCpLPM.js";import{u as le,S as U,a as q,b as z,c as H,d as K}from"./select-hrfw1EN-.js";import{B as P}from"./badge-DNWgXw15.js";import{c as ie,P as B,f as oe,d as V}from"./index-tYCPTy-V.js";import{e as de,d as me}from"./Combination-CncVcp3P.js";import{P as he}from"./index-BaYbZBEn.js";import{User as ue,Company as xe,Contact as pe}from"./entities-BF_CoRhL.js";import{c as $}from"./index-A7ElDbZk.js";import{d as fe}from"./functions-BQNzBwtX.js";import{T as ge}from"./target-D4F_5uFl.js";import{D as je}from"./download-DCQdHE3E.js";import"./base44Client-C-YMJfZQ.js";var R="Checkbox",[be]=ie(R),[ve,D]=be(R);function ye(r){const{__scopeCheckbox:h,checked:d,children:n,defaultChecked:i,disabled:t,form:f,name:c,onCheckedChange:o,required:g,value:j="on",internal_do_not_use_render:x}=r,[p,C]=oe({prop:d,defaultProp:i??!1,onChange:o,caller:R}),[b,v]=l.useState(null),[k,m]=l.useState(null),u=l.useRef(!1),_=b?!!f||!!b.closest("form"):!0,w={checked:p,disabled:t,setChecked:C,control:b,setControl:v,name:c,form:f,value:j,hasConsumerStoppedPropagationRef:u,required:g,defaultChecked:y(i)?!1:i,isFormControl:_,bubbleInput:k,setBubbleInput:m};return e.jsx(ve,{scope:h,...w,children:Ce(x)?x(w):n})}var X="CheckboxTrigger",J=l.forwardRef(({__scopeCheckbox:r,onKeyDown:h,onClick:d,...n},i)=>{const{control:t,value:f,disabled:c,checked:o,required:g,setControl:j,setChecked:x,hasConsumerStoppedPropagationRef:p,isFormControl:C,bubbleInput:b}=D(X,r),v=G(i,j),k=l.useRef(o);return l.useEffect(()=>{const m=t==null?void 0:t.form;if(m){const u=()=>x(k.current);return m.addEventListener("reset",u),()=>m.removeEventListener("reset",u)}},[t,x]),e.jsx(B.button,{type:"button",role:"checkbox","aria-checked":y(o)?"mixed":o,"aria-required":g,"data-state":ee(o),"data-disabled":c?"":void 0,disabled:c,value:f,...n,ref:v,onKeyDown:V(h,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:V(d,m=>{x(u=>y(u)?!0:!u),b&&C&&(p.current=m.isPropagationStopped(),p.current||m.stopPropagation())})})});J.displayName=X;var F=l.forwardRef((r,h)=>{const{__scopeCheckbox:d,name:n,checked:i,defaultChecked:t,required:f,disabled:c,value:o,onCheckedChange:g,form:j,...x}=r;return e.jsx(ye,{__scopeCheckbox:d,checked:i,defaultChecked:t,disabled:c,required:f,onCheckedChange:g,name:n,form:j,value:o,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(J,{...x,ref:h,__scopeCheckbox:d}),p&&e.jsx(Z,{__scopeCheckbox:d})]})})});F.displayName=R;var W="CheckboxIndicator",Y=l.forwardRef((r,h)=>{const{__scopeCheckbox:d,forceMount:n,...i}=r,t=D(W,d);return e.jsx(he,{present:n||y(t.checked)||t.checked===!0,children:e.jsx(B.span,{"data-state":ee(t.checked),"data-disabled":t.disabled?"":void 0,...i,ref:h,style:{pointerEvents:"none",...r.style}})})});Y.displayName=W;var Q="CheckboxBubbleInput",Z=l.forwardRef(({__scopeCheckbox:r,...h},d)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:t,defaultChecked:f,required:c,disabled:o,name:g,value:j,form:x,bubbleInput:p,setBubbleInput:C}=D(Q,r),b=G(d,C),v=le(t),k=de(n);l.useEffect(()=>{const u=p;if(!u)return;const _=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(_,"checked").set,a=!i.current;if(v!==t&&s){const N=new Event("click",{bubbles:a});u.indeterminate=y(t),s.call(u,y(t)?!1:t),u.dispatchEvent(N)}},[p,v,t,i]);const m=l.useRef(y(t)?!1:t);return e.jsx(B.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??m.current,required:c,disabled:o,name:g,value:j,form:x,...h,tabIndex:-1,ref:b,style:{...h.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Z.displayName=Q;function Ce(r){return typeof r=="function"}function y(r){return r==="indeterminate"}function ee(r){return y(r)?"indeterminate":r?"checked":"unchecked"}const L=l.forwardRef(({className:r,...h},d)=>e.jsx(F,{ref:d,className:A("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...h,children:e.jsx(Y,{className:A("flex items-center justify-center text-current"),children:e.jsx(me,{className:"h-4 w-4"})})}));L.displayName=F.displayName;function Fe(){const r=te(),[h,d]=l.useState(null),[n,i]=l.useState({industry:"",employee_count_min:"",employee_count_max:"",revenue_min:"",revenue_max:"",location:"",keywords:"",job_titles:"CEO,President,VP Sales,Sales Manager,Logistics Manager,Operations Manager",company_size:"",technology_used:""}),[t,f]=l.useState([]),[c,o]=l.useState([]),[g,j]=l.useState(!1),[x,p]=l.useState(!1),[C,b]=l.useState(!1);ae.useEffect(()=>{(async()=>{try{const a=await ue.me();if(a.role!=="admin"){r($("Dashboard"));return}d(a)}catch{r($("Dashboard"))}})()},[r]);const v=["Freight Forwarding","Logistics","3PL","Shipping","Transportation","Supply Chain","Warehousing","Manufacturing","Import/Export","Trucking","Ocean Freight","Air Freight","Rail Transport"],k=[{label:"1-10 employees",value:"1,10"},{label:"11-50 employees",value:"11,50"},{label:"51-200 employees",value:"51,200"},{label:"201-1000 employees",value:"201,1000"},{label:"1000+ employees",value:"1000,10000"}],m=async()=>{j(!0);try{const s=await fe(n);s.status===200?(f(s.data.results||[]),b(!0)):alert("Search failed. Please try again.")}catch(s){console.error("Search error:",s),alert("Search failed. Please check your criteria and try again.")}j(!1)},u=s=>{o(s?t.map(a=>a.id):[])},_=(s,a)=>{o(a?[...c,s]:c.filter(N=>N!==s))},w=async()=>{if(c.length===0){alert("Please select companies to import.");return}p(!0);try{const s=t.filter(a=>c.includes(a.id));for(const a of s){const N={name:a.name,domain:a.domain,hq_city:a.city,hq_country:a.country,industry:a.industry,employee_count:a.employee_count,annual_revenue:a.annual_revenue,enrichment_status:"enriched",enrichment_data:{source:"apollo_prospecting",imported_date:new Date().toISOString(),...a}},se=await xe.create(N);if(a.contacts&&a.contacts.length>0)for(const S of a.contacts)await pe.create({company_id:se.id,full_name:S.name,title:S.title,dept:S.department,email:S.email,phone:S.phone,linkedin:S.linkedin_url,source:"apollo",verified:S.email_verified||!1})}alert(`Successfully imported ${c.length} companies and their contacts.`),o([])}catch(s){console.error("Import error:",s),alert("Import failed. Some companies may have been imported successfully.")}p(!1)};return h?e.jsx("div",{className:"p-6 md:p-8 bg-gradient-to-br from-purple-50 to-pink-50/30 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Lead Prospecting"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Search and import potential LIT subscribers from Apollo.io"})]}),e.jsx(P,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(I,{className:"sticky top-4",children:[e.jsx(re,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Search Criteria"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Industry"}),e.jsxs(U,{value:n.industry,onValueChange:s=>i({...n,industry:s}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select industry"})}),e.jsx(H,{children:v.map(s=>e.jsx(K,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Size"}),e.jsxs(U,{value:n.company_size,onValueChange:s=>i({...n,company_size:s}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select company size"})}),e.jsx(H,{children:k.map(s=>e.jsx(K,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx(T,{placeholder:"e.g., United States, New York",value:n.location,onChange:s=>i({...n,location:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keywords"}),e.jsx(T,{placeholder:"e.g., freight, logistics, shipping",value:n.keywords,onChange:s=>i({...n,keywords:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Target Job Titles"}),e.jsx(T,{placeholder:"Comma-separated titles",value:n.job_titles,onChange:s=>i({...n,job_titles:s.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default includes decision makers"})]}),e.jsx(M,{onClick:m,disabled:g,className:"w-full",children:g?e.jsx(e.Fragment,{children:"Searching..."}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Search Leads"]})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:C?t.length===0?e.jsx(I,{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{checked:c.length===t.length,onCheckedChange:u}),e.jsxs("span",{className:"font-medium",children:[t.length," companies found"]}),c.length>0&&e.jsxs(P,{variant:"secondary",children:[c.length," selected"]})]}),e.jsx(M,{onClick:w,disabled:c.length===0||x,className:"bg-green-600 hover:bg-green-700",children:x?e.jsx(e.Fragment,{children:"Importing..."}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Import Selected"]})})]})})}),e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsx(I,{className:"hover:shadow-md transition-shadow",children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(L,{checked:c.includes(s.id),onCheckedChange:a=>_(s.id,a)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("div",{className:"flex items-center gap-2",children:s.domain&&e.jsx(P,{variant:"outline",children:s.domain})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Industry:"})," ",s.industry||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",s.city,", ",s.country]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Employees:"})," ",s.employee_count||"Unknown"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Revenue:"})," ",s.annual_revenue?`$${s.annual_revenue.toLocaleString()}`:"Unknown"]}),s.contacts&&e.jsxs("p",{children:[e.jsx("strong",{children:"Contacts:"})," ",s.contacts.length," found"]})]})]}),s.contacts&&s.contacts.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Key Contacts:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.contacts.slice(0,3).map((a,N)=>e.jsxs(P,{variant:"secondary",className:"text-xs",children:[a.name," • ",a.title]},N)),s.contacts.length>3&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:["+",s.contacts.length-3," more"]})]})]})]})]})})},s.id))})]}):e.jsx(I,{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Search for Leads"}),e.jsx("p",{className:"text-gray-500",children:"Configure your search criteria and find potential LIT subscribers"})]})})})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}export{Fe as default};
