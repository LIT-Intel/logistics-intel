import{aj as u}from"./main-IxhAqWnM.js";const p={VITE_API_BASE:"https://lit-caller-gw-2e68g4k3.uc.gateway.dev"};var g={};const d=(()=>{const n=p||{},t=n.VITE_API_BASE||n.VITE_PROXY_BASE||"/api/public";return t.endsWith("/public")?t:t.endsWith("/public/")?t.slice(0,-1):t==="/api/public"?t:t.replace(/\/$/,"")+"/public"})(),f="https://lit-caller-gw-2e68g4k3.uc.gateway.dev".replace(/\/public\/?$/,"");async function y(n){const t=await n;if(!t.ok){const e=await t.text().catch(()=>String(t.status));throw new Error(e||String(t.status))}return t.json()}const l={async get(n,t){var c,o,r;const e=`${f}${n}`,a=await((r=(o=(c=u)==null?void 0:c.currentUser)==null?void 0:o.getIdToken)==null?void 0:r.call(o).catch(()=>null)),s={accept:"application/json",...a?{Authorization:`Bearer ${a}`}:{},...(t==null?void 0:t.headers)||{}};return y(fetch(e,{...t||{},headers:s,credentials:"omit",cache:"no-store"}))},async post(n,t,e){var o,r,h;const a=`${f}${n}`,s=await((h=(r=(o=u)==null?void 0:o.currentUser)==null?void 0:r.getIdToken)==null?void 0:h.call(r).catch(()=>null)),c={"content-type":"application/json",accept:"application/json",...s?{Authorization:`Bearer ${s}`}:{},...(e==null?void 0:e.headers)||{}};return y(fetch(a,{method:"POST",headers:c,body:JSON.stringify(t??{}),credentials:"omit",cache:"no-store",...e}))}};function m(n){const t=Number(n.shipments12m??n.shipments_12m??n.shipments??0),e=(n.lastActivity??n.last_activity??n.lastShipmentDate)||null,a=n.originsTop??n.origins_top??[],s=n.destsTop??n.dests_top??[],c=n.carriersTop??n.carriers_top??[];return{shipments12m:t,lastActivity:e,originsTop:a,destsTop:s,carriersTop:c}}const i="https://lit-caller-gw-2e68g4k3.uc.gateway.dev".replace(/\/$/,"");async function S(n,t){return l.post("/public/searchCompanies",n,{signal:t})}async function $(n,t){const{company_id:e,limit:a=50,offset:s=0}=n,c=new URLSearchParams({company_id:e,limit:String(a),offset:String(s)});return l.get(`/public/getCompanyShipments?${c.toString()}`,{signal:t})}async function j(n={},t){return l.get("/public/getFilterOptions",{signal:t})}async function T(n,t){const e=await fetch(`${d}/widgets/tariff/calc`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n||{}),signal:t});if(!e.ok)throw new Error(`calcTariff ${e.status}`);return e.json()}async function O(n,t){const e=await fetch(`${d}/widgets/quote/generate`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n||{}),signal:t});if(!e.ok)throw new Error(`generateQuote ${e.status}`);return e.json()}async function E(n){const t=await fetch(`${i}/crm/saveCompany`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({...n,source:n.source??"search"})});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`saveCompany ${t.status}:${e.slice(0,200)}`)}return t.json()}async function b(n){const t=await fetch(`${i}/crm/enrich`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`enrich ${t.status}:${e.slice(0,200)}`)}return t.json()}async function k(n){const t=g.NEXT_PUBLIC_AI_VENDOR||(p==null?void 0:p.VITE_AI_VENDOR)||"gemini",e=await fetch(`${i}/ai/recall`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json","x-ai-vendor":String(t)},body:JSON.stringify(n)});if(!e.ok){const a=await e.text().catch(()=>"");throw new Error(`recall ${e.status}:${a.slice(0,200)}`)}return e.json()}async function A(n){const t=await fetch(`${i}/crm/campaigns`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`saveCampaign ${t.status}:${e.slice(0,200)}`)}return t.json()}async function _(n){const t=await fetch(`${i}/crm/company.create`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n||{})});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`company.create ${t.status}:${e.slice(0,200)}`)}return t.json()}export{l as a,$ as b,A as c,T as d,b as e,O as f,j as g,_ as h,m as k,S as p,k as r,E as s};
