import{a4 as w}from"./main-D6vxZYeV.js";const v={VITE_API_BASE:"https://lit-caller-gw-2e68g4k3.uc.gateway.dev"},$=(()=>{const t=v||{},e=t.VITE_API_BASE||t.VITE_PROXY_BASE||"/api/public";return e.endsWith("/public")?e:e.endsWith("/public/")?e.slice(0,-1):e==="/api/public"?e:e.replace(/\/$/,"")+"/public"})(),S="https://lit-caller-gw-2e68g4k3.uc.gateway.dev".replace(/\/public\/?$/,"");async function _(t){const e=await t;if(!e.ok){const a=await e.text().catch(()=>String(e.status));throw new Error(a||String(e.status))}return e.json()}const p={async get(t,e){var s,n,r;const a=`${S}${t}`,i=await((r=(n=(s=w)==null?void 0:s.currentUser)==null?void 0:n.getIdToken)==null?void 0:r.call(n).catch(()=>null)),o={accept:"application/json",...i?{Authorization:`Bearer ${i}`}:{},...(e==null?void 0:e.headers)||{}};return _(fetch(a,{...e||{},headers:o,credentials:"omit",cache:"no-store"}))},async post(t,e,a){var n,r,c;const i=`${S}${t}`,o=await((c=(r=(n=w)==null?void 0:n.currentUser)==null?void 0:r.getIdToken)==null?void 0:c.call(r).catch(()=>null)),s={"content-type":"application/json",accept:"application/json",...o?{Authorization:`Bearer ${o}`}:{},...(a==null?void 0:a.headers)||{}};return _(fetch(i,{method:"POST",headers:s,body:JSON.stringify(e??{}),credentials:"omit",cache:"no-store",...a}))}};async function j(t,e){return p.post("/public/searchCompanies",t,{signal:e})}async function E(t,e){const{company_id:a,limit:i=50,offset:o=0}=t,s=new URLSearchParams({company_id:a,limit:String(i),offset:String(o)});return p.get(`/public/getCompanyShipments?${s.toString()}`,{signal:e})}async function y(t={},e){return p.get("/public/getFilterOptions",{signal:e})}async function O(t,e){var s,n,r,c,l,u,f,g,h,m,d;const a=((s=t.pagination)==null?void 0:s.limit)??10,i=((n=t.pagination)==null?void 0:n.offset)??0,o={q:t.q??"",mode:t.mode&&t.mode!=="all"?t.mode:void 0,hs:Array.isArray((r=t.filters)==null?void 0:r.hs)?(c=t.filters)==null?void 0:c.hs:void 0,origins:(l=t.filters)!=null&&l.origin?[t.filters.origin]:void 0,destinations:(u=t.filters)!=null&&u.destination?[t.filters.destination]:void 0,carriers:(f=t.filters)!=null&&f.carrier?[t.filters.carrier]:void 0,startDate:((g=t.dateRange)==null?void 0:g.from)||void 0,endDate:((h=t.dateRange)==null?void 0:h.to)||void 0,page:Math.floor((((m=t.pagination)==null?void 0:m.offset)??0)/(((d=t.pagination)==null?void 0:d.limit)??a))+1,page_size:a,limit:a,offset:i};return p.post("/search",o,{signal:e})}async function T(t,e){const a=await fetch(`${$}/widgets/tariff/calc`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(t||{}),signal:e});if(!a.ok)throw new Error(`calcTariff ${a.status}`);return a.json()}async function k(t,e){const a=await fetch(`${$}/widgets/quote/generate`,{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(t||{}),signal:e});if(!a.ok)throw new Error(`generateQuote ${a.status}`);return a.json()}export{p as a,k as b,T as c,E as d,y as g,j as p,O as s};
