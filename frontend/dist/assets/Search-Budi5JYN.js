var Ge=e=>{throw TypeError(e)};var Ne=(e,s,r)=>s.has(e)||Ge("Cannot "+r);var l=(e,s,r)=>(Ne(e,s,"read from private field"),r?r.call(e):s.get(e)),T=(e,s,r)=>s.has(e)?Ge("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,r),_=(e,s,r,i)=>(Ne(e,s,"write to private field"),i?i.call(e,r):s.set(e,r),r),P=(e,s,r)=>(Ne(e,s,"access private method"),r);import{f as qt,p as We,g as V,s as _e,h as xe,n as Re,i as Ee,k as qe,t as Xt,l as Se,m as Jt,o as Zt,q as Xe,v as nt,r as d,w as es,x as ts,c as ot,j as t,y as lt,z as le,a as Je,T as ct,B as z,u as ss,S as Ze}from"./main-BwGWMDCi.js";import{User as rs}from"./entities-CnsKiLH-.js";import{I as as}from"./input-Dw7a9WQL.js";import{c as et}from"./index-DR9D_4bA.js";import{g as is,s as ns}from"./api-Cdr5VjY4.js";import{C as os}from"./checkbox-CdHvbG3J.js";import{c as dt,u as ls,a as cs}from"./select-BVIETwTL.js";import{u as ds,c as us,a as hs,b as re,P as be,d as ms}from"./index-v5Hq-Jwm.js";import{C as ut}from"./circle-alert-BpzwTfDp.js";import{B as ht,C as fs,c as xs}from"./CompanyDetailModal-DQJosPmD.js";import{B as mt}from"./badge-u5ZeETXz.js";import{m as Be}from"./proxy-DRIoWjtJ.js";import{C as ft}from"./calendar-Detx8fRN.js";import{S as xt}from"./ship-CzOlKfq2.js";import{L as pt}from"./loader-circle-C-mQTauK.js";import{B as gt,C as ps}from"./NotesTab-B_nF1Pwf.js";import{f as bt}from"./format-DIePDvv_.js";import{L as gs}from"./list-B1QALGKY.js";import{A as bs}from"./index-CGLJIyoO.js";import{U as vs}from"./UpgradePrompt-X7jmYcgT.js";import"./functions-DLmuSLgl.js";import"./base44Client-C-YMJfZQ.js";import"./index-B1OJoX7J.js";import"./dialog-C_kz_kbv.js";import"./tabs-CUfPoQKT.js";import"./textarea-BtZvDFSN.js";import"./truck-BzQ1-Eds.js";import"./label-B_k9YyLN.js";import"./plus-ZQB9w3xX.js";import"./users-rmwcVKVM.js";import"./message-square-DIcLcI0k.js";import"./trash-2-BRf9Ug2A.js";import"./planLimits-C4PMM81i.js";import"./crown-CrBRgMro.js";import"./zap-BicKmCma.js";import"./arrow-right-BCoVdI65.js";var U,b,pe,O,Z,ae,$,q,ge,ie,ne,ee,te,X,oe,y,fe,ke,Ie,Pe,De,Me,Te,Ae,vt,it,ys=(it=class extends qt{constructor(s,r){super();T(this,y);T(this,U);T(this,b);T(this,pe);T(this,O);T(this,Z);T(this,ae);T(this,$);T(this,q);T(this,ge);T(this,ie);T(this,ne);T(this,ee);T(this,te);T(this,X);T(this,oe,new Set);this.options=r,_(this,U,s),_(this,q,null),_(this,$,We()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(l(this,b).addObserver(this),tt(l(this,b),this.options)?P(this,y,fe).call(this):this.updateResult(),P(this,y,De).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Oe(l(this,b),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Oe(l(this,b),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,P(this,y,Me).call(this),P(this,y,Te).call(this),l(this,b).removeObserver(this)}setOptions(s){const r=this.options,i=l(this,b);if(this.options=l(this,U).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof V(this.options.enabled,l(this,b))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");P(this,y,Ae).call(this),l(this,b).setOptions(this.options),r._defaulted&&!_e(this.options,r)&&l(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:l(this,b),observer:this});const o=this.hasListeners();o&&st(l(this,b),i,this.options,r)&&P(this,y,fe).call(this),this.updateResult(),o&&(l(this,b)!==i||V(this.options.enabled,l(this,b))!==V(r.enabled,l(this,b))||xe(this.options.staleTime,l(this,b))!==xe(r.staleTime,l(this,b)))&&P(this,y,ke).call(this);const n=P(this,y,Ie).call(this);o&&(l(this,b)!==i||V(this.options.enabled,l(this,b))!==V(r.enabled,l(this,b))||n!==l(this,X))&&P(this,y,Pe).call(this,n)}getOptimisticResult(s){const r=l(this,U).getQueryCache().build(l(this,U),s),i=this.createResult(r,s);return js(this,i)&&(_(this,O,i),_(this,ae,this.options),_(this,Z,l(this,b).state)),i}getCurrentResult(){return l(this,O)}trackResult(s,r){return new Proxy(s,{get:(i,o)=>(this.trackProp(o),r==null||r(o),o==="promise"&&!this.options.experimental_prefetchInRender&&l(this,$).status==="pending"&&l(this,$).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,o))})}trackProp(s){l(this,oe).add(s)}getCurrentQuery(){return l(this,b)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=l(this,U).defaultQueryOptions(s),i=l(this,U).getQueryCache().build(l(this,U),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(s){return P(this,y,fe).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),l(this,O)))}createResult(s,r){var W;const i=l(this,b),o=this.options,n=l(this,O),c=l(this,Z),f=l(this,ae),x=s!==i?s.state:l(this,pe),{state:p}=s;let a={...p},m=!1,u;if(r._optimisticResults){const E=this.hasListeners(),R=!E&&tt(s,r),M=E&&st(s,i,r,o);(R||M)&&(a={...a,...Zt(p.data,s.options)}),r._optimisticResults==="isRestoring"&&(a.fetchStatus="idle")}let{error:N,errorUpdatedAt:S,status:g}=a;u=a.data;let v=!1;if(r.placeholderData!==void 0&&u===void 0&&g==="pending"){let E;n!=null&&n.isPlaceholderData&&r.placeholderData===(f==null?void 0:f.placeholderData)?(E=n.data,v=!0):E=typeof r.placeholderData=="function"?r.placeholderData((W=l(this,ne))==null?void 0:W.state.data,l(this,ne)):r.placeholderData,E!==void 0&&(g="success",u=Xe(n==null?void 0:n.data,E,r),m=!0)}if(r.select&&u!==void 0&&!v)if(n&&u===(c==null?void 0:c.data)&&r.select===l(this,ge))u=l(this,ie);else try{_(this,ge,r.select),u=r.select(u),u=Xe(n==null?void 0:n.data,u,r),_(this,ie,u),_(this,q,null)}catch(E){_(this,q,E)}l(this,q)&&(N=l(this,q),u=l(this,ie),S=Date.now(),g="error");const k=a.fetchStatus==="fetching",C=g==="pending",j=g==="error",L=C&&k,Y=u!==void 0,A={status:g,fetchStatus:a.fetchStatus,isPending:C,isSuccess:g==="success",isError:j,isInitialLoading:L,isLoading:L,data:u,dataUpdatedAt:a.dataUpdatedAt,error:N,errorUpdatedAt:S,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>x.dataUpdateCount||a.errorUpdateCount>x.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:j&&!Y,isPaused:a.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&Y,isStale:Qe(s,r),refetch:this.refetch,promise:l(this,$),isEnabled:V(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const E=F=>{A.status==="error"?F.reject(A.error):A.data!==void 0&&F.resolve(A.data)},R=()=>{const F=_(this,$,A.promise=We());E(F)},M=l(this,$);switch(M.status){case"pending":s.queryHash===i.queryHash&&E(M);break;case"fulfilled":(A.status==="error"||A.data!==M.value)&&R();break;case"rejected":(A.status!=="error"||A.error!==M.reason)&&R();break}}return A}updateResult(){const s=l(this,O),r=this.createResult(l(this,b),this.options);if(_(this,Z,l(this,b).state),_(this,ae,this.options),l(this,Z).data!==void 0&&_(this,ne,l(this,b)),_e(r,s))return;_(this,O,r);const i=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,n=typeof o=="function"?o():o;if(n==="all"||!n&&!l(this,oe).size)return!0;const c=new Set(n??l(this,oe));return this.options.throwOnError&&c.add("error"),Object.keys(l(this,O)).some(f=>{const h=f;return l(this,O)[h]!==s[h]&&c.has(h)})};P(this,y,vt).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&P(this,y,De).call(this)}},U=new WeakMap,b=new WeakMap,pe=new WeakMap,O=new WeakMap,Z=new WeakMap,ae=new WeakMap,$=new WeakMap,q=new WeakMap,ge=new WeakMap,ie=new WeakMap,ne=new WeakMap,ee=new WeakMap,te=new WeakMap,X=new WeakMap,oe=new WeakMap,y=new WeakSet,fe=function(s){P(this,y,Ae).call(this);let r=l(this,b).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Re)),r},ke=function(){P(this,y,Me).call(this);const s=xe(this.options.staleTime,l(this,b));if(Ee||l(this,O).isStale||!qe(s))return;const i=Xt(l(this,O).dataUpdatedAt,s)+1;_(this,ee,Se.setTimeout(()=>{l(this,O).isStale||this.updateResult()},i))},Ie=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(l(this,b)):this.options.refetchInterval)??!1},Pe=function(s){P(this,y,Te).call(this),_(this,X,s),!(Ee||V(this.options.enabled,l(this,b))===!1||!qe(l(this,X))||l(this,X)===0)&&_(this,te,Se.setInterval(()=>{(this.options.refetchIntervalInBackground||Jt.isFocused())&&P(this,y,fe).call(this)},l(this,X)))},De=function(){P(this,y,ke).call(this),P(this,y,Pe).call(this,P(this,y,Ie).call(this))},Me=function(){l(this,ee)&&(Se.clearTimeout(l(this,ee)),_(this,ee,void 0))},Te=function(){l(this,te)&&(Se.clearInterval(l(this,te)),_(this,te,void 0))},Ae=function(){const s=l(this,U).getQueryCache().build(l(this,U),this.options);if(s===l(this,b))return;const r=l(this,b);_(this,b,s),_(this,pe,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},vt=function(s){nt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(l(this,O))}),l(this,U).getQueryCache().notify({query:l(this,b),type:"observerResultsUpdated"})})},it);function Ss(e,s){return V(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function tt(e,s){return Ss(e,s)||e.state.data!==void 0&&Oe(e,s,s.refetchOnMount)}function Oe(e,s,r){if(V(s.enabled,e)!==!1&&xe(s.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Qe(e,s)}return!1}function st(e,s,r,i){return(e!==s||V(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Qe(e,r)}function Qe(e,s){return V(s.enabled,e)!==!1&&e.isStaleByTime(xe(s.staleTime,e))}function js(e,s){return!_e(e.getCurrentResult(),s)}var yt=d.createContext(!1),ws=()=>d.useContext(yt);yt.Provider;function Ns(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Cs=d.createContext(Ns()),_s=()=>d.useContext(Cs),Rs=(e,s)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(s.isReset()||(e.retryOnMount=!1))},Es=e=>{d.useEffect(()=>{e.clearReset()},[e])},ks=({result:e,errorResetBoundary:s,throwOnError:r,query:i,suspense:o})=>e.isError&&!s.isReset()&&!e.isFetching&&i&&(o&&e.data===void 0||es(r,[e.error,i])),Is=e=>{if(e.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...o)=>r(i(...o)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ps=(e,s)=>e.isLoading&&e.isFetching&&!s,Ds=(e,s)=>(e==null?void 0:e.suspense)&&s.isPending,rt=(e,s,r)=>s.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ms(e,s,r){var a,m,u,N,S;const i=ws(),o=_s(),n=ts(),c=n.defaultQueryOptions(e);(m=(a=n.getDefaultOptions().queries)==null?void 0:a._experimental_beforeQuery)==null||m.call(a,c),c._optimisticResults=i?"isRestoring":"optimistic",Is(c),Rs(c,o),Es(o);const f=!n.getQueryCache().get(c.queryHash),[h]=d.useState(()=>new s(n,c)),x=h.getOptimisticResult(c),p=!i&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(g=>{const v=p?h.subscribe(nt.batchCalls(g)):Re;return h.updateResult(),v},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),d.useEffect(()=>{h.setOptions(c)},[c,h]),Ds(c,x))throw rt(c,h,o);if(ks({result:x,errorResetBoundary:o,throwOnError:c.throwOnError,query:n.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw x.error;if((N=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_afterQuery)==null||N.call(u,c,x),c.experimental_prefetchInRender&&!Ee&&Ps(x,i)){const g=f?rt(c,h,o):(S=n.getQueryCache().get(c.queryHash))==null?void 0:S.promise;g==null||g.catch(Re).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?x:h.trackResult(x)}function Ts(e,s){return Ms(e,ys)}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Os=ot("ChevronLeft",As);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Us=ot("LayoutGrid",Fs);function at({className:e,...s}){return t.jsx("div",{className:lt("animate-pulse rounded-md bg-primary/10",e),...s})}var St=["PageUp","PageDown"],jt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ce="Slider",[Fe,Ls,Bs]=hs(ce),[Nt,Hr]=us(ce,[Bs]),[Qs,je]=Nt(ce),Ct=d.forwardRef((e,s)=>{const{name:r,min:i=0,max:o=100,step:n=1,orientation:c="horizontal",disabled:f=!1,minStepsBetweenThumbs:h=0,defaultValue:x=[i],value:p,onValueChange:a=()=>{},onValueCommit:m=()=>{},inverted:u=!1,form:N,...S}=e,g=d.useRef(new Set),v=d.useRef(0),C=c==="horizontal"?Vs:zs,[j=[],L]=ds({prop:p,defaultProp:x,onChange:R=>{var F;(F=[...g.current][v.current])==null||F.focus(),a(R)}}),Y=d.useRef(j);function G(R){const M=Gs(j,R);E(R,M)}function A(R){E(R,v.current)}function W(){const R=Y.current[v.current];j[v.current]!==R&&m(j)}function E(R,M,{commit:F}={commit:!1}){const de=Js(n),ue=Zs(Math.round((R-i)/n)*n+i,de),J=dt(ue,[i,o]);L((K=[])=>{const H=$s(K,J,M);if(Xs(H,h*n)){v.current=H.indexOf(J);const he=String(H)!==String(K);return he&&F&&m(H),he?H:K}else return K})}return t.jsx(Qs,{scope:e.__scopeSlider,name:r,disabled:f,min:i,max:o,valueIndexToChangeRef:v,thumbs:g.current,values:j,orientation:c,form:N,children:t.jsx(Fe.Provider,{scope:e.__scopeSlider,children:t.jsx(Fe.Slot,{scope:e.__scopeSlider,children:t.jsx(C,{"aria-disabled":f,"data-disabled":f?"":void 0,...S,ref:s,onPointerDown:re(S.onPointerDown,()=>{f||(Y.current=j)}),min:i,max:o,inverted:u,onSlideStart:f?void 0:G,onSlideMove:f?void 0:A,onSlideEnd:f?void 0:W,onHomeKeyDown:()=>!f&&E(i,0,{commit:!0}),onEndKeyDown:()=>!f&&E(o,j.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:M})=>{if(!f){const ue=St.includes(R.key)||R.shiftKey&&jt.includes(R.key)?10:1,J=v.current,K=j[J],H=n*ue*M;E(K+H,J,{commit:!0})}}})})})})});Ct.displayName=ce;var[_t,Rt]=Nt(ce,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vs=d.forwardRef((e,s)=>{const{min:r,max:i,dir:o,inverted:n,onSlideStart:c,onSlideMove:f,onSlideEnd:h,onStepKeyDown:x,...p}=e,[a,m]=d.useState(null),u=le(s,C=>m(C)),N=d.useRef(void 0),S=ms(o),g=S==="ltr",v=g&&!n||!g&&n;function k(C){const j=N.current||a.getBoundingClientRect(),L=[0,j.width],G=Ve(L,v?[r,i]:[i,r]);return N.current=j,G(C-j.left)}return t.jsx(_t,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:t.jsx(Et,{dir:S,"data-orientation":"horizontal",...p,ref:u,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const j=k(C.clientX);c==null||c(j)},onSlideMove:C=>{const j=k(C.clientX);f==null||f(j)},onSlideEnd:()=>{N.current=void 0,h==null||h()},onStepKeyDown:C=>{const L=wt[v?"from-left":"from-right"].includes(C.key);x==null||x({event:C,direction:L?-1:1})}})})}),zs=d.forwardRef((e,s)=>{const{min:r,max:i,inverted:o,onSlideStart:n,onSlideMove:c,onSlideEnd:f,onStepKeyDown:h,...x}=e,p=d.useRef(null),a=le(s,p),m=d.useRef(void 0),u=!o;function N(S){const g=m.current||p.current.getBoundingClientRect(),v=[0,g.height],C=Ve(v,u?[i,r]:[r,i]);return m.current=g,C(S-g.top)}return t.jsx(_t,{scope:e.__scopeSlider,startEdge:u?"bottom":"top",endEdge:u?"top":"bottom",size:"height",direction:u?1:-1,children:t.jsx(Et,{"data-orientation":"vertical",...x,ref:a,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const g=N(S.clientY);n==null||n(g)},onSlideMove:S=>{const g=N(S.clientY);c==null||c(g)},onSlideEnd:()=>{m.current=void 0,f==null||f()},onStepKeyDown:S=>{const v=wt[u?"from-bottom":"from-top"].includes(S.key);h==null||h({event:S,direction:v?-1:1})}})})}),Et=d.forwardRef((e,s)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:o,onSlideEnd:n,onHomeKeyDown:c,onEndKeyDown:f,onStepKeyDown:h,...x}=e,p=je(ce,r);return t.jsx(be.span,{...x,ref:s,onKeyDown:re(e.onKeyDown,a=>{a.key==="Home"?(c(a),a.preventDefault()):a.key==="End"?(f(a),a.preventDefault()):St.concat(jt).includes(a.key)&&(h(a),a.preventDefault())}),onPointerDown:re(e.onPointerDown,a=>{const m=a.target;m.setPointerCapture(a.pointerId),a.preventDefault(),p.thumbs.has(m)?m.focus():i(a)}),onPointerMove:re(e.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&o(a)}),onPointerUp:re(e.onPointerUp,a=>{const m=a.target;m.hasPointerCapture(a.pointerId)&&(m.releasePointerCapture(a.pointerId),n(a))})})}),kt="SliderTrack",It=d.forwardRef((e,s)=>{const{__scopeSlider:r,...i}=e,o=je(kt,r);return t.jsx(be.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...i,ref:s})});It.displayName=kt;var Ue="SliderRange",Pt=d.forwardRef((e,s)=>{const{__scopeSlider:r,...i}=e,o=je(Ue,r),n=Rt(Ue,r),c=d.useRef(null),f=le(s,c),h=o.values.length,x=o.values.map(m=>Tt(m,o.min,o.max)),p=h>1?Math.min(...x):0,a=100-Math.max(...x);return t.jsx(be.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...i,ref:f,style:{...e.style,[n.startEdge]:p+"%",[n.endEdge]:a+"%"}})});Pt.displayName=Ue;var Le="SliderThumb",Dt=d.forwardRef((e,s)=>{const r=Ls(e.__scopeSlider),[i,o]=d.useState(null),n=le(s,f=>o(f)),c=d.useMemo(()=>i?r().findIndex(f=>f.ref.current===i):-1,[r,i]);return t.jsx(Ks,{...e,ref:n,index:c})}),Ks=d.forwardRef((e,s)=>{const{__scopeSlider:r,index:i,name:o,...n}=e,c=je(Le,r),f=Rt(Le,r),[h,x]=d.useState(null),p=le(s,k=>x(k)),a=h?c.form||!!h.closest("form"):!0,m=ls(h),u=c.values[i],N=u===void 0?0:Tt(u,c.min,c.max),S=Ys(i,c.values.length),g=m==null?void 0:m[f.size],v=g?Ws(g,N,f.direction):0;return d.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[f.startEdge]:`calc(${N}% + ${v}px)`},children:[t.jsx(Fe.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(be.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":c.min,"aria-valuenow":u,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...n,ref:p,style:u===void 0?{display:"none"}:e.style,onFocus:re(e.onFocus,()=>{c.valueIndexToChangeRef.current=i})})}),a&&t.jsx(Mt,{name:o??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:u},i)]})});Dt.displayName=Le;var Hs="RadioBubbleInput",Mt=d.forwardRef(({__scopeSlider:e,value:s,...r},i)=>{const o=d.useRef(null),n=le(o,i),c=cs(s);return d.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==s&&p){const a=new Event("input",{bubbles:!0});p.call(f,s),f.dispatchEvent(a)}},[c,s]),t.jsx(be.input,{style:{display:"none"},...r,ref:n,defaultValue:s})});Mt.displayName=Hs;function $s(e=[],s,r){const i=[...e];return i[r]=s,i.sort((o,n)=>o-n)}function Tt(e,s,r){const n=100/(r-s)*(e-s);return dt(n,[0,100])}function Ys(e,s){return s>2?`Value ${e+1} of ${s}`:s===2?["Minimum","Maximum"][e]:void 0}function Gs(e,s){if(e.length===1)return 0;const r=e.map(o=>Math.abs(o-s)),i=Math.min(...r);return r.indexOf(i)}function Ws(e,s,r){const i=e/2,n=Ve([0,50],[0,i]);return(i-n(s)*r)*r}function qs(e){return e.slice(0,-1).map((s,r)=>e[r+1]-s)}function Xs(e,s){if(s>0){const r=qs(e);return Math.min(...r)>=s}return!0}function Ve(e,s){return r=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const i=(s[1]-s[0])/(e[1]-e[0]);return s[0]+i*(r-e[0])}}function Js(e){return(String(e).split(".")[1]||"").length}function Zs(e,s){const r=Math.pow(10,s);return Math.round(e*r)/r}var At=Ct,er=It,tr=Pt,sr=Dt;const Ot=d.forwardRef(({className:e,...s},r)=>t.jsxs(At,{ref:r,className:lt("relative flex w-full touch-none select-none items-center",e),...s,children:[t.jsx(er,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:t.jsx(tr,{className:"absolute h-full bg-primary"})}),t.jsx(sr,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ot.displayName=At.displayName;function rr(e){if(!e)return{};const s=e.data?e.data:e;return{origin_countries:Array.isArray(s.origin_countries)?s.origin_countries:[],destination_countries:Array.isArray(s.destination_countries)?s.destination_countries:[],modes:Array.isArray(s.modes)?s.modes:[],carriers:Array.isArray(s.carriers)?s.carriers:[],hs_prefixes:Array.isArray(s.hs_prefixes)?s.hs_prefixes:[]}}function ar({onChange:e}){const[s,r]=d.useState({origins:[],destinations:[],modes:[],carriers:[],hs:[]}),[i,o]=d.useState(!1),[n,c]=d.useState({origin:"",destination:"",mode:"any",date_start:"",date_end:"",carrier:"",hs:[],value_min:0,value_max:0}),{data:f,isLoading:h,error:x}=Ts({queryKey:["filter-options"],queryFn:()=>is({}),staleTime:1e3*60*10});d.useEffect(()=>{if(f){const a=rr(f);r({origins:a.origin_countries.sort(),destinations:a.destination_countries.sort(),modes:a.modes.sort(),carriers:a.carriers.sort(),hs:a.hs_prefixes.sort()})}},[f]),d.useEffect(()=>{const a=setTimeout(()=>{e==null||e(n)},300);return()=>clearTimeout(a)},[n,e]);const p=(a,m)=>{c(u=>({...u,[a]:m}))};return x?t.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md my-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(ut,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),t.jsx("div",{className:"ml-3",children:t.jsxs("p",{className:"text-sm text-red-700",children:["Could not load search filters. Please try again later. (",x.message||String(x),")"]})})]})}):h?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:Array.from({length:5}).map((a,m)=>t.jsxs("div",{className:"space-y-2",children:[t.jsx(at,{className:"h-4 w-24"}),t.jsx(at,{className:"h-10 w-full"})]},m))}):t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("button",{type:"button",className:"md:hidden inline-flex items-center px-3 py-2 text-sm rounded-lg border bg-white",onClick:()=>o(a=>!a),children:i?"Hide Filters":"Show Filters"}),t.jsx("div",{})]}),t.jsxs("div",{className:`${i?"grid":"hidden"} md:grid grid-cols-1 md:grid-cols-6 gap-4`,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin Country"}),t.jsxs("select",{id:"origin",value:n.origin,onChange:a=>p("origin",a.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"",children:"Any Origin"}),s.origins.map(a=>t.jsx("option",{value:a,children:a},a))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Country"}),t.jsxs("select",{id:"destination",value:n.destination,onChange:a=>p("destination",a.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"",children:"Any Destination"}),s.destinations.map(a=>t.jsx("option",{value:a,children:a},a))]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode"}),t.jsx("div",{className:"flex items-center gap-4 text-sm",children:["any","air","ocean"].map(a=>t.jsxs("label",{className:"inline-flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"mode",value:a,checked:n.mode===a,onChange:m=>p("mode",m.target.value)}),t.jsx("span",{className:"capitalize",children:a})]},a))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"carrier",className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier"}),t.jsxs("select",{id:"carrier",value:n.carrier,onChange:a=>p("carrier",a.target.value),disabled:h,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"",children:"Any Carrier"}),s.carriers.map(a=>t.jsx("option",{value:a,children:a},a))]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HS Codes"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:s.hs.slice(0,12).map(a=>t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx(os,{checked:n.hs.includes(a),onCheckedChange:m=>{const u=new Set(n.hs);m?u.add(a):u.delete(a),p("hs",Array.from(u))}}),t.jsx("span",{children:a})]},a))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shipment Value (USD)"}),t.jsxs("div",{className:"px-2",children:[t.jsx(Ot,{min:0,max:1e6,step:1e4,value:[n.value_min,n.value_max||1e6],onValueChange:([a,m])=>c(u=>({...u,value_min:a,value_max:m}))}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[t.jsxs("span",{children:["$","{",n.value_min.toLocaleString(),"}"]}),t.jsxs("span",{children:["$","{",(n.value_max||1e6).toLocaleString(),"}"]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"date_start",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Start"}),t.jsx("input",{type:"date",id:"date_start",value:n.date_start,onChange:a=>p("date_start",a.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"date_end",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date End"}),t.jsx("input",{type:"date",id:"date_end",value:n.date_end,onChange:a=>p("date_end",a.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]})]})}function ir({company:e,onSelect:s,onSave:r,isSaving:i,isSaved:o,isNew:n,onStartOutreach:c,onDraftRFP:f,savingCompanyId:h}){const x=a=>a?a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(0)}K`:a.toLocaleString():"0",p=h===e.id;return t.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},className:"bg-white/90 backdrop-blur-sm rounded-2xl p-5 shadow-lg border border-gray-200/60 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>s(e),children:[n&&t.jsx("div",{className:"mb-3",children:t.jsx(mt,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:"New Shipper"})}),t.jsx("div",{className:"flex justify-between items-start mb-4",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-bold text-gray-900 truncate text-lg mb-1",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Je,{className:"w-3 h-3"}),t.jsxs("span",{children:["ID: ",e.id]})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 font-medium mb-1",children:[t.jsx(ct,{className:"w-3 h-3"}),"Shipments (12M)"]}),t.jsx("div",{className:"text-lg font-bold text-blue-900",children:x(e.shipments_12m)})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 font-medium mb-1",children:[t.jsx(ft,{className:"w-3 h-3"}),"Last Activity"]}),t.jsx("div",{className:"text-sm font-bold text-purple-900",children:e.last_seen?bt(new Date(e.last_seen),"MMM d"):"N/A"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xt,{className:"w-3 h-3 text-gray-500"}),t.jsx("span",{className:"text-gray-600",children:"Top Route:"}),t.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:e.top_route||"Various routes"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Je,{className:"w-3 h-3 text-gray-500"}),t.jsx("span",{className:"text-gray-600",children:"Top Carrier:"}),t.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:e.top_carrier||"Multiple carriers"})]})]}),t.jsxs("div",{className:"flex gap-2",onClick:a=>a.stopPropagation(),children:[t.jsxs(z,{size:"sm",variant:"outline",onClick:()=>r(e),disabled:p||o,className:"flex-1",children:[p&&t.jsx(pt,{className:"mr-2 h-3 w-3 animate-spin"}),o?t.jsx(ht,{className:"w-3 h-3 mr-1 text-blue-600"}):t.jsx(gt,{className:"w-3 h-3 mr-1"}),o?"Saved":"Save"]}),t.jsx(z,{size:"sm",onClick:a=>{a.stopPropagation(),o?window.location.href=`/app/companies/${e.id||e.company_id}`:s(e)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})}function nr({company:e,onSelect:s,onSave:r,isSaving:i,isSaved:o,isNew:n,onStartOutreach:c,onDraftRFP:f,savingCompanyId:h,index:x=0}){const p=m=>m?m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(0)}K`:m.toLocaleString():"0",a=h===e.id;return t.jsx(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:x*.05},className:"p-4 hover:bg-gray-50 transition-all duration-200 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>s(e),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),n&&t.jsx(mt,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs",children:"New"})]}),t.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["ID: ",e.id]}),t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:(e.summary||e.description||`Top route ${e.top_route||"various"}; top carrier ${e.top_carrier||"various"}.`).toString()}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ct,{className:"w-3 h-3"})," Shipments (12M): ",t.jsx("b",{className:"text-gray-900 ml-1",children:p(e.shipments_12m)})]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ft,{className:"w-3 h-3"})," Last: ",t.jsx("b",{className:"text-gray-900 ml-1",children:e.last_seen?bt(new Date(e.last_seen),"MMM d"):"N/A"})]}),t.jsxs("span",{className:"hidden md:flex items-center gap-1",children:[t.jsx(xt,{className:"w-3 h-3"})," Route: ",t.jsx("b",{className:"text-gray-900 ml-1 truncate max-w-[220px]",children:e.top_route||"Various"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:m=>m.stopPropagation(),children:[t.jsxs(z,{size:"sm",variant:"outline",onClick:()=>r(e),disabled:a||o,children:[a&&t.jsx(pt,{className:"mr-2 h-3 w-3 animate-spin"}),o?t.jsx(ht,{className:"w-3 h-3 mr-1 text-blue-600"}):t.jsx(gt,{className:"w-3 h-3 mr-1"}),o?"Saved":"Save"]}),t.jsx(z,{size:"sm",onClick:()=>{o?window.location.href=`/app/companies/${e.id||e.company_id}`:s(e)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})})}function or({searchResults:e,totalResults:s,isLoading:r,onCompanySelect:i,onSave:o,onStartOutreach:n,onDraftRFP:c,user:f,newShipperEvents:h,savedCompanyIds:x,savingCompanyId:p,viewMode:a,setViewMode:m,currentPage:u,totalPages:N,onPageChange:S}){const g=e&&e.length>0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Search Results"}),!r&&t.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Found ",Number(s||0).toLocaleString()," companies • Showing ",(e==null?void 0:e.length)||0," on this page"]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-lg",children:[t.jsxs(z,{size:"sm",variant:a==="grid"?"secondary":"ghost",onClick:()=>m("grid"),className:"h-8 px-3",children:[t.jsx(Us,{className:"w-4 h-4 mr-1"}),"Cards"]}),t.jsxs(z,{size:"sm",variant:a==="list"?"secondary":"ghost",onClick:()=>m("list"),className:"h-8 px-3",children:[t.jsx(gs,{className:"w-4 h-4 mr-1"}),"List"]})]}),N>1&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(z,{variant:"outline",size:"sm",onClick:()=>S(u-1),disabled:u===1||r,className:"h-8",children:t.jsx(Os,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-sm text-gray-600 px-2",children:["Page ",u," of ",N]}),t.jsx(z,{variant:"outline",size:"sm",onClick:()=>S(u+1),disabled:u>=N||r,className:"h-8",children:t.jsx(ps,{className:"h-4 w-4"})})]})]})]}),r?t.jsx("div",{className:`grid gap-4 md:gap-6 ${a==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:Array.from({length:12}).map((v,k)=>t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm animate-pulse",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mb-4"}),t.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),t.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"})]})]},k))}):g?t.jsxs("div",{className:`grid gap-4 md:gap-6 ${a==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:[t.jsx(bs,{children:e.map(v=>{const k=v.company_id||v.id,C=p===k,j=x.has(k),L=h.includes(k);return a==="grid"?t.jsx(ir,{company:v,onSelect:i,onSave:o,isSaving:C,isSaved:j,isNew:L,onStartOutreach:n,onDraftRFP:c,savingCompanyId:p},k):t.jsx(nr,{company:v,onSelect:i,onSave:o,isSaving:C,isSaved:j,isNew:L,onStartOutreach:n,onDraftRFP:c,savingCompanyId:p},k)})}),u<N&&t.jsx("div",{className:"col-span-full flex justify-center mt-2",children:t.jsx(z,{variant:"outline",onClick:()=>S(u+1),disabled:r,children:"Load More"})})]}):t.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[t.jsx(ut,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No results found"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-sm mx-auto",children:"Try adjusting your search query or filters to find companies."})]})]})}const Ce=25;function $r(){const e=ss(),[s,r]=d.useState(null),[i,o]=d.useState(""),[n,c]=d.useState({mode:"any",origin:"",destination:"",carrier:"",hs:[],date_start:null,date_end:null}),[f,h]=d.useState([]),[x,p]=d.useState(!1),[a,m]=d.useState(""),[u,N]=d.useState(null),[S,g]=d.useState(!1),[v,k]=d.useState(!1),[C,j]=d.useState(""),[L,Y]=d.useState(1),[G,A]=d.useState(0),[W,E]=d.useState(new Set),[R,M]=d.useState(null),[F,de]=d.useState(null),[ue,J]=d.useState("grid"),[K,H]=d.useState(!1);d.useEffect(()=>{const w=setTimeout(()=>m(i),300);return()=>clearTimeout(w)},[i]),d.useEffect(()=>{K&&ve(1)},[a,n]);const he=d.useMemo(()=>Math.max(1,Math.ceil((G||0)/Ce)),[G]),ze=d.useCallback(async()=>{try{const w=await rs.me();r(w)}catch(w){console.error("Error loading user:",w)}},[]);d.useEffect(()=>{ze()},[ze]);const ve=d.useCallback(async w=>{var se,ye,me;const B=w||1;p(!0),de(null),Y(B),H(!0);try{const Q=(B-1)*Ce,Qt={q:i||void 0,mode:n.mode&&n.mode!=="any"?n.mode:"all",filters:{origin:n.origin?[n.origin]:void 0,destination:n.destination?[n.destination]:void 0,carrier:n.carrier?[n.carrier]:void 0,hs:Array.isArray(n.hs)&&n.hs.length?n.hs:void 0},dateRange:{from:n.date_start||void 0,to:n.date_end||void 0},pagination:{limit:Ce,offset:Q}},I=await ns(Qt),Vt=(I==null?void 0:I.items)||(Array.isArray(I==null?void 0:I.results)?I.results:void 0)||((se=I==null?void 0:I.data)==null?void 0:se.items)||((ye=I==null?void 0:I.data)==null?void 0:ye.results)||[],zt=typeof(I==null?void 0:I.total)=="number"?I.total:((me=I==null?void 0:I.data)==null?void 0:me.total)||0,Kt=(Vt||[]).map(D=>{var He,$e,Ye;const we=D.name||D.company||D.company_name||"Unknown",Ht=D.id||D.company_id||(we?we.toLowerCase().replace(/[^a-z0-9]+/g,"-"):void 0),$t=D.shipments_12m||D.shipments||0,Yt=D.last_seen||D.lastShipmentDate||D.last_ship_date||null,Gt=D.top_carrier||Array.isArray(D.carriersTop)&&((He=D.carriersTop[0])==null?void 0:He.v)||void 0,Wt=D.top_route||(Array.isArray(D.originsTop)&&Array.isArray(D.destsTop)?`${(($e=D.originsTop[0])==null?void 0:$e.v)||"Origin"} → ${((Ye=D.destsTop[0])==null?void 0:Ye.v)||"Dest"}`:void 0);return{...D,id:Ht,name:we,shipments_12m:$t,last_seen:Yt,top_carrier:Gt,top_route:Wt}});h(Kt),A(zt)}catch(Q){console.error("Search error:",Q),de((Q==null?void 0:Q.message)&&String(Q.message)||"Search failed. Please try again."),h([]),A(0)}finally{p(!1)}},[i,n]),Ft=d.useCallback(w=>{N(w),g(!0)},[]),Ke=async w=>{if(R)return;const B=w.id;M(B);const se=new Set(W),ye=se.has(B),me=new Set(se);ye||me.add(B),E(me);try{const Q=await xs({name:w.name,website:w.website||void 0,external_ref:String(B)});if(!Q||!Q.id&&!Q.ok)throw new Error("Save failed")}catch(Q){console.error("Failed to save company:",Q),E(se),alert("Failed to save company. Please try again.")}finally{M(null)}},Ut=w=>{const B=w.id;B&&e(et("EmailCenter?company_id="+B))},Lt=w=>{const B=w.id;B&&e(et("RFPStudio?company_id="+B))},Bt=w=>{w>=1&&w<=he&&!x&&ve(w)};return t.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Trade Intelligence Discovery"}),t.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Search companies by trade activity, routes, commodities, and shipping patterns"})]})}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 md:p-6 mb-6 md:mb-8 border border-gray-200/60",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(as,{value:i,onChange:w=>o(w.target.value),placeholder:"Search by company name or alias (e.g., UPS, Maersk)...",className:"pl-4 pr-12 py-3 text-base md:text-lg bg-gray-50 border-0 rounded-xl",onKeyDown:w=>{w.key==="Enter"&&ve(1)}}),t.jsx(Ze,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),t.jsx(z,{onClick:()=>ve(1),disabled:x,className:"px-6 md:px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl",children:x?"Searching...":"Search"})]})}),t.jsx(ar,{onChange:c}),F&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:t.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[t.jsx("span",{className:"font-semibold",children:"Search Error:"}),t.jsx("span",{children:F})]})}),K?t.jsx(or,{searchResults:f,totalResults:G,isLoading:x,onCompanySelect:Ft,onSave:Ke,onStartOutreach:Ut,onDraftRFP:Lt,user:s,newShipperEvents:[],savedCompanyIds:W,savingCompanyId:R,viewMode:ue,setViewMode:J,currentPage:L,totalPages:he,onPageChange:Bt}):t.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[t.jsx(Ze,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Search"}),t.jsx("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"Enter a company name or use the filters above to search for trade intelligence data."})]}),t.jsx(vs,{isOpen:v,onClose:()=>k(!1),feature:C,currentPlan:s==null?void 0:s.plan}),t.jsx(fs,{company:u,isOpen:S,onClose:()=>g(!1),onSave:Ke,user:s,isSaved:W.has(u==null?void 0:u.id)})]})})}export{$r as default};
