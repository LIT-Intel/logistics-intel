var We=t=>{throw TypeError(t)};var Ne=(t,s,r)=>s.has(t)||We("Cannot "+r);var l=(t,s,r)=>(Ne(t,s,"read from private field"),r?r.call(t):s.get(t)),T=(t,s,r)=>s.has(t)?We("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),_=(t,s,r,a)=>(Ne(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),P=(t,s,r)=>(Ne(t,s,"access private method"),r);import{f as Xt,p as qe,g as Q,s as _e,h as xe,n as Re,i as Ee,k as Xe,t as Jt,l as Se,m as Zt,o as es,q as Je,v as lt,r as h,w as ts,x as ss,c as Be,j as e,y as ct,z as le,a as Ze,T as dt,B as z,u as rs,S as et}from"./main-CSxjyf2y.js";import{User as as}from"./entities-CnsKiLH-.js";import{I as is}from"./input-BsbiDyYk.js";import{c as tt}from"./index-DR9D_4bA.js";import{g as ns,s as os}from"./api-Cdr5VjY4.js";import{C as st}from"./checkbox-_ARe9K9n.js";import{c as ut,u as ls,a as cs}from"./select-CwXzHEgM.js";import{u as ds,c as us,a as hs,b as re,P as be,d as ms}from"./index-2Ri7XQMi.js";import{C as ht}from"./circle-alert-BQ9wWToS.js";import{C as fs,c as xs}from"./CompanyDetailModal-DXsxClfZ.js";import{B as mt}from"./badge-vZXRrHht.js";import{m as Ve}from"./proxy-BhxlvkZc.js";import{C as ft}from"./calendar-CIyf5pjZ.js";import{S as xt}from"./ship-lQw5zPSB.js";import{L as pt}from"./loader-circle-DZNa8K6w.js";import{B as gt,C as ps}from"./NotesTab-BVtcbGFY.js";import{f as bt}from"./format-DIePDvv_.js";import{L as gs}from"./list-CccpYxuZ.js";import{A as bs}from"./index-CwNvL8_L.js";import{U as ys}from"./UpgradePrompt-D-28NMZM.js";import"./functions-BiBq-vTN.js";import"./base44Client-C-YMJfZQ.js";import"./index-OfiTLaQ9.js";import"./dialog-Cdy6sIX4.js";import"./tabs-DN0jao0y.js";import"./textarea-BPbnhhV7.js";import"./truck-BfuYRewr.js";import"./label-SSDgzWKN.js";import"./plus-B1a7RQbV.js";import"./users-DMNCVANm.js";import"./message-square-B_MuTDHI.js";import"./trash-2-BclrRXfg.js";import"./planLimits-C4PMM81i.js";import"./crown-kYj8Head.js";import"./zap-D9O2qHoG.js";import"./arrow-right-cymEqdsf.js";var U,y,pe,O,Z,ae,$,W,ge,ie,ne,ee,te,q,oe,j,fe,ke,Ie,Pe,De,Me,Te,Ae,yt,ot,vs=(ot=class extends Xt{constructor(s,r){super();T(this,j);T(this,U);T(this,y);T(this,pe);T(this,O);T(this,Z);T(this,ae);T(this,$);T(this,W);T(this,ge);T(this,ie);T(this,ne);T(this,ee);T(this,te);T(this,q);T(this,oe,new Set);this.options=r,_(this,U,s),_(this,W,null),_(this,$,qe()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(l(this,y).addObserver(this),rt(l(this,y),this.options)?P(this,j,fe).call(this):this.updateResult(),P(this,j,De).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Oe(l(this,y),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Oe(l(this,y),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,P(this,j,Me).call(this),P(this,j,Te).call(this),l(this,y).removeObserver(this)}setOptions(s){const r=this.options,a=l(this,y);if(this.options=l(this,U).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Q(this.options.enabled,l(this,y))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");P(this,j,Ae).call(this),l(this,y).setOptions(this.options),r._defaulted&&!_e(this.options,r)&&l(this,U).getQueryCache().notify({type:"observerOptionsUpdated",query:l(this,y),observer:this});const c=this.hasListeners();c&&at(l(this,y),a,this.options,r)&&P(this,j,fe).call(this),this.updateResult(),c&&(l(this,y)!==a||Q(this.options.enabled,l(this,y))!==Q(r.enabled,l(this,y))||xe(this.options.staleTime,l(this,y))!==xe(r.staleTime,l(this,y)))&&P(this,j,ke).call(this);const n=P(this,j,Ie).call(this);c&&(l(this,y)!==a||Q(this.options.enabled,l(this,y))!==Q(r.enabled,l(this,y))||n!==l(this,q))&&P(this,j,Pe).call(this,n)}getOptimisticResult(s){const r=l(this,U).getQueryCache().build(l(this,U),s),a=this.createResult(r,s);return js(this,a)&&(_(this,O,a),_(this,ae,this.options),_(this,Z,l(this,y).state)),a}getCurrentResult(){return l(this,O)}trackResult(s,r){return new Proxy(s,{get:(a,c)=>(this.trackProp(c),r==null||r(c),c==="promise"&&!this.options.experimental_prefetchInRender&&l(this,$).status==="pending"&&l(this,$).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(a,c))})}trackProp(s){l(this,oe).add(s)}getCurrentQuery(){return l(this,y)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=l(this,U).defaultQueryOptions(s),a=l(this,U).getQueryCache().build(l(this,U),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return P(this,j,fe).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),l(this,O)))}createResult(s,r){var X;const a=l(this,y),c=this.options,n=l(this,O),d=l(this,Z),u=l(this,ae),x=s!==a?s.state:l(this,pe),{state:g}=s;let o={...g},f=!1,i;if(r._optimisticResults){const E=this.hasListeners(),R=!E&&rt(s,r),M=E&&at(s,a,r,c);(R||M)&&(o={...o,...es(g.data,s.options)}),r._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:b}=o;i=o.data;let S=!1;if(r.placeholderData!==void 0&&i===void 0&&b==="pending"){let E;n!=null&&n.isPlaceholderData&&r.placeholderData===(u==null?void 0:u.placeholderData)?(E=n.data,S=!0):E=typeof r.placeholderData=="function"?r.placeholderData((X=l(this,ne))==null?void 0:X.state.data,l(this,ne)):r.placeholderData,E!==void 0&&(b="success",i=Je(n==null?void 0:n.data,E,r),f=!0)}if(r.select&&i!==void 0&&!S)if(n&&i===(d==null?void 0:d.data)&&r.select===l(this,ge))i=l(this,ie);else try{_(this,ge,r.select),i=r.select(i),i=Je(n==null?void 0:n.data,i,r),_(this,ie,i),_(this,W,null)}catch(E){_(this,W,E)}l(this,W)&&(v=l(this,W),i=l(this,ie),p=Date.now(),b="error");const k=o.fetchStatus==="fetching",C=b==="pending",w=b==="error",L=C&&k,Y=i!==void 0,A={status:b,fetchStatus:o.fetchStatus,isPending:C,isSuccess:b==="success",isError:w,isInitialLoading:L,isLoading:L,data:i,dataUpdatedAt:o.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>x.dataUpdateCount||o.errorUpdateCount>x.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:w&&!Y,isPaused:o.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&Y,isStale:Qe(s,r),refetch:this.refetch,promise:l(this,$),isEnabled:Q(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const E=F=>{A.status==="error"?F.reject(A.error):A.data!==void 0&&F.resolve(A.data)},R=()=>{const F=_(this,$,A.promise=qe());E(F)},M=l(this,$);switch(M.status){case"pending":s.queryHash===a.queryHash&&E(M);break;case"fulfilled":(A.status==="error"||A.data!==M.value)&&R();break;case"rejected":(A.status!=="error"||A.error!==M.reason)&&R();break}}return A}updateResult(){const s=l(this,O),r=this.createResult(l(this,y),this.options);if(_(this,Z,l(this,y).state),_(this,ae,this.options),l(this,Z).data!==void 0&&_(this,ne,l(this,y)),_e(r,s))return;_(this,O,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options,n=typeof c=="function"?c():c;if(n==="all"||!n&&!l(this,oe).size)return!0;const d=new Set(n??l(this,oe));return this.options.throwOnError&&d.add("error"),Object.keys(l(this,O)).some(u=>{const m=u;return l(this,O)[m]!==s[m]&&d.has(m)})};P(this,j,yt).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&P(this,j,De).call(this)}},U=new WeakMap,y=new WeakMap,pe=new WeakMap,O=new WeakMap,Z=new WeakMap,ae=new WeakMap,$=new WeakMap,W=new WeakMap,ge=new WeakMap,ie=new WeakMap,ne=new WeakMap,ee=new WeakMap,te=new WeakMap,q=new WeakMap,oe=new WeakMap,j=new WeakSet,fe=function(s){P(this,j,Ae).call(this);let r=l(this,y).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Re)),r},ke=function(){P(this,j,Me).call(this);const s=xe(this.options.staleTime,l(this,y));if(Ee||l(this,O).isStale||!Xe(s))return;const a=Jt(l(this,O).dataUpdatedAt,s)+1;_(this,ee,Se.setTimeout(()=>{l(this,O).isStale||this.updateResult()},a))},Ie=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(l(this,y)):this.options.refetchInterval)??!1},Pe=function(s){P(this,j,Te).call(this),_(this,q,s),!(Ee||Q(this.options.enabled,l(this,y))===!1||!Xe(l(this,q))||l(this,q)===0)&&_(this,te,Se.setInterval(()=>{(this.options.refetchIntervalInBackground||Zt.isFocused())&&P(this,j,fe).call(this)},l(this,q)))},De=function(){P(this,j,ke).call(this),P(this,j,Pe).call(this,P(this,j,Ie).call(this))},Me=function(){l(this,ee)&&(Se.clearTimeout(l(this,ee)),_(this,ee,void 0))},Te=function(){l(this,te)&&(Se.clearInterval(l(this,te)),_(this,te,void 0))},Ae=function(){const s=l(this,U).getQueryCache().build(l(this,U),this.options);if(s===l(this,y))return;const r=l(this,y);_(this,y,s),_(this,pe,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},yt=function(s){lt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(l(this,O))}),l(this,U).getQueryCache().notify({query:l(this,y),type:"observerResultsUpdated"})})},ot);function Ss(t,s){return Q(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function rt(t,s){return Ss(t,s)||t.state.data!==void 0&&Oe(t,s,s.refetchOnMount)}function Oe(t,s,r){if(Q(s.enabled,t)!==!1&&xe(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&Qe(t,s)}return!1}function at(t,s,r,a){return(t!==s||Q(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Qe(t,r)}function Qe(t,s){return Q(s.enabled,t)!==!1&&t.isStaleByTime(xe(s.staleTime,t))}function js(t,s){return!_e(t.getCurrentResult(),s)}var vt=h.createContext(!1),ws=()=>h.useContext(vt);vt.Provider;function Ns(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Cs=h.createContext(Ns()),_s=()=>h.useContext(Cs),Rs=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Es=t=>{h.useEffect(()=>{t.clearReset()},[t])},ks=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:c})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(c&&t.data===void 0||ts(r,[t.error,a])),Is=t=>{if(t.suspense){const r=c=>c==="static"?c:Math.max(c??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...c)=>r(a(...c)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ps=(t,s)=>t.isLoading&&t.isFetching&&!s,Ds=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,it=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function Ms(t,s,r){var o,f,i,v,p;const a=ws(),c=_s(),n=ss(),d=n.defaultQueryOptions(t);(f=(o=n.getDefaultOptions().queries)==null?void 0:o._experimental_beforeQuery)==null||f.call(o,d),d._optimisticResults=a?"isRestoring":"optimistic",Is(d),Rs(d,c),Es(c);const u=!n.getQueryCache().get(d.queryHash),[m]=h.useState(()=>new s(n,d)),x=m.getOptimisticResult(d),g=!a&&t.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(b=>{const S=g?m.subscribe(lt.batchCalls(b)):Re;return m.updateResult(),S},[m,g]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),h.useEffect(()=>{m.setOptions(d)},[d,m]),Ds(d,x))throw it(d,m,c);if(ks({result:x,errorResetBoundary:c,throwOnError:d.throwOnError,query:n.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw x.error;if((v=(i=n.getDefaultOptions().queries)==null?void 0:i._experimental_afterQuery)==null||v.call(i,d,x),d.experimental_prefetchInRender&&!Ee&&Ps(x,a)){const b=u?it(d,m,c):(p=n.getQueryCache().get(d.queryHash))==null?void 0:p.promise;b==null||b.catch(Re).finally(()=>{m.updateResult()})}return d.notifyOnChangeProps?x:m.trackResult(x)}function Ts(t,s){return Ms(t,vs)}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],St=Be("BookmarkCheck",As);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fs=Be("ChevronLeft",Os);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ls=Be("LayoutGrid",Us);function nt({className:t,...s}){return e.jsx("div",{className:ct("animate-pulse rounded-md bg-primary/10",t),...s})}var jt=["PageUp","PageDown"],wt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ce="Slider",[Fe,Bs,Vs]=hs(ce),[Ct]=us(ce,[Vs]),[Qs,je]=Ct(ce),_t=h.forwardRef((t,s)=>{const{name:r,min:a=0,max:c=100,step:n=1,orientation:d="horizontal",disabled:u=!1,minStepsBetweenThumbs:m=0,defaultValue:x=[a],value:g,onValueChange:o=()=>{},onValueCommit:f=()=>{},inverted:i=!1,form:v,...p}=t,b=h.useRef(new Set),S=h.useRef(0),C=d==="horizontal"?zs:Ks,[w=[],L]=ds({prop:g,defaultProp:x,onChange:R=>{var F;(F=[...b.current][S.current])==null||F.focus(),o(R)}}),Y=h.useRef(w);function G(R){const M=Ws(w,R);E(R,M)}function A(R){E(R,S.current)}function X(){const R=Y.current[S.current];w[S.current]!==R&&f(w)}function E(R,M,{commit:F}={commit:!1}){const de=Zs(n),ue=er(Math.round((R-a)/n)*n+a,de),J=ut(ue,[a,c]);L((K=[])=>{const H=Ys(K,J,M);if(Js(H,m*n)){S.current=H.indexOf(J);const he=String(H)!==String(K);return he&&F&&f(H),he?H:K}else return K})}return e.jsx(Qs,{scope:t.__scopeSlider,name:r,disabled:u,min:a,max:c,valueIndexToChangeRef:S,thumbs:b.current,values:w,orientation:d,form:v,children:e.jsx(Fe.Provider,{scope:t.__scopeSlider,children:e.jsx(Fe.Slot,{scope:t.__scopeSlider,children:e.jsx(C,{"aria-disabled":u,"data-disabled":u?"":void 0,...p,ref:s,onPointerDown:re(p.onPointerDown,()=>{u||(Y.current=w)}),min:a,max:c,inverted:i,onSlideStart:u?void 0:G,onSlideMove:u?void 0:A,onSlideEnd:u?void 0:X,onHomeKeyDown:()=>!u&&E(a,0,{commit:!0}),onEndKeyDown:()=>!u&&E(c,w.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:M})=>{if(!u){const ue=jt.includes(R.key)||R.shiftKey&&wt.includes(R.key)?10:1,J=S.current,K=w[J],H=n*ue*M;E(K+H,J,{commit:!0})}}})})})})});_t.displayName=ce;var[Rt,Et]=Ct(ce,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zs=h.forwardRef((t,s)=>{const{min:r,max:a,dir:c,inverted:n,onSlideStart:d,onSlideMove:u,onSlideEnd:m,onStepKeyDown:x,...g}=t,[o,f]=h.useState(null),i=le(s,C=>f(C)),v=h.useRef(void 0),p=ms(c),b=p==="ltr",S=b&&!n||!b&&n;function k(C){const w=v.current||o.getBoundingClientRect(),L=[0,w.width],G=ze(L,S?[r,a]:[a,r]);return v.current=w,G(C-w.left)}return e.jsx(Rt,{scope:t.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:e.jsx(kt,{dir:p,"data-orientation":"horizontal",...g,ref:i,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const w=k(C.clientX);d==null||d(w)},onSlideMove:C=>{const w=k(C.clientX);u==null||u(w)},onSlideEnd:()=>{v.current=void 0,m==null||m()},onStepKeyDown:C=>{const L=Nt[S?"from-left":"from-right"].includes(C.key);x==null||x({event:C,direction:L?-1:1})}})})}),Ks=h.forwardRef((t,s)=>{const{min:r,max:a,inverted:c,onSlideStart:n,onSlideMove:d,onSlideEnd:u,onStepKeyDown:m,...x}=t,g=h.useRef(null),o=le(s,g),f=h.useRef(void 0),i=!c;function v(p){const b=f.current||g.current.getBoundingClientRect(),S=[0,b.height],C=ze(S,i?[a,r]:[r,a]);return f.current=b,C(p-b.top)}return e.jsx(Rt,{scope:t.__scopeSlider,startEdge:i?"bottom":"top",endEdge:i?"top":"bottom",size:"height",direction:i?1:-1,children:e.jsx(kt,{"data-orientation":"vertical",...x,ref:o,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const b=v(p.clientY);n==null||n(b)},onSlideMove:p=>{const b=v(p.clientY);d==null||d(b)},onSlideEnd:()=>{f.current=void 0,u==null||u()},onStepKeyDown:p=>{const S=Nt[i?"from-bottom":"from-top"].includes(p.key);m==null||m({event:p,direction:S?-1:1})}})})}),kt=h.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:c,onSlideEnd:n,onHomeKeyDown:d,onEndKeyDown:u,onStepKeyDown:m,...x}=t,g=je(ce,r);return e.jsx(be.span,{...x,ref:s,onKeyDown:re(t.onKeyDown,o=>{o.key==="Home"?(d(o),o.preventDefault()):o.key==="End"?(u(o),o.preventDefault()):jt.concat(wt).includes(o.key)&&(m(o),o.preventDefault())}),onPointerDown:re(t.onPointerDown,o=>{const f=o.target;f.setPointerCapture(o.pointerId),o.preventDefault(),g.thumbs.has(f)?f.focus():a(o)}),onPointerMove:re(t.onPointerMove,o=>{o.target.hasPointerCapture(o.pointerId)&&c(o)}),onPointerUp:re(t.onPointerUp,o=>{const f=o.target;f.hasPointerCapture(o.pointerId)&&(f.releasePointerCapture(o.pointerId),n(o))})})}),It="SliderTrack",Pt=h.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,c=je(It,r);return e.jsx(be.span,{"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation,...a,ref:s})});Pt.displayName=It;var Ue="SliderRange",Dt=h.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,c=je(Ue,r),n=Et(Ue,r),d=h.useRef(null),u=le(s,d),m=c.values.length,x=c.values.map(f=>At(f,c.min,c.max)),g=m>1?Math.min(...x):0,o=100-Math.max(...x);return e.jsx(be.span,{"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,...a,ref:u,style:{...t.style,[n.startEdge]:g+"%",[n.endEdge]:o+"%"}})});Dt.displayName=Ue;var Le="SliderThumb",Mt=h.forwardRef((t,s)=>{const r=Bs(t.__scopeSlider),[a,c]=h.useState(null),n=le(s,u=>c(u)),d=h.useMemo(()=>a?r().findIndex(u=>u.ref.current===a):-1,[r,a]);return e.jsx(Hs,{...t,ref:n,index:d})}),Hs=h.forwardRef((t,s)=>{const{__scopeSlider:r,index:a,name:c,...n}=t,d=je(Le,r),u=Et(Le,r),[m,x]=h.useState(null),g=le(s,k=>x(k)),o=m?d.form||!!m.closest("form"):!0,f=ls(m),i=d.values[a],v=i===void 0?0:At(i,d.min,d.max),p=Gs(a,d.values.length),b=f==null?void 0:f[u.size],S=b?qs(b,v,u.direction):0;return h.useEffect(()=>{if(m)return d.thumbs.add(m),()=>{d.thumbs.delete(m)}},[m,d.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${v}% + ${S}px)`},children:[e.jsx(Fe.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(be.span,{role:"slider","aria-label":t["aria-label"]||p,"aria-valuemin":d.min,"aria-valuenow":i,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...n,ref:g,style:i===void 0?{display:"none"}:t.style,onFocus:re(t.onFocus,()=>{d.valueIndexToChangeRef.current=a})})}),o&&e.jsx(Tt,{name:c??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:i},a)]})});Mt.displayName=Le;var $s="RadioBubbleInput",Tt=h.forwardRef(({__scopeSlider:t,value:s,...r},a)=>{const c=h.useRef(null),n=le(c,a),d=cs(s);return h.useEffect(()=>{const u=c.current;if(!u)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"value").set;if(d!==s&&g){const o=new Event("input",{bubbles:!0});g.call(u,s),u.dispatchEvent(o)}},[d,s]),e.jsx(be.input,{style:{display:"none"},...r,ref:n,defaultValue:s})});Tt.displayName=$s;function Ys(t=[],s,r){const a=[...t];return a[r]=s,a.sort((c,n)=>c-n)}function At(t,s,r){const n=100/(r-s)*(t-s);return ut(n,[0,100])}function Gs(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Ws(t,s){if(t.length===1)return 0;const r=t.map(c=>Math.abs(c-s)),a=Math.min(...r);return r.indexOf(a)}function qs(t,s,r){const a=t/2,n=ze([0,50],[0,a]);return(a-n(s)*r)*r}function Xs(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function Js(t,s){if(s>0){const r=Xs(t);return Math.min(...r)>=s}return!0}function ze(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(r-t[0])}}function Zs(t){return(String(t).split(".")[1]||"").length}function er(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var Ot=_t,tr=Pt,sr=Dt,rr=Mt;const Ft=h.forwardRef(({className:t,...s},r)=>e.jsxs(Ot,{ref:r,className:ct("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(tr,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(sr,{className:"absolute h-full bg-primary"})}),e.jsx(rr,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ft.displayName=Ot.displayName;function ar(t){if(!t)return{};const s=t.data?t.data:t;return{origin_countries:Array.isArray(s.origin_countries)?s.origin_countries:[],destination_countries:Array.isArray(s.destination_countries)?s.destination_countries:[],modes:Array.isArray(s.modes)?s.modes:[],carriers:Array.isArray(s.carriers)?s.carriers:[],hs_prefixes:Array.isArray(s.hs_prefixes)?s.hs_prefixes:[]}}function ir({onChange:t}){const[s,r]=h.useState({origins:[],destinations:[],modes:[],carriers:[],hs:[]}),[a,c]=h.useState(!1),[n,d]=h.useState(!1),[u,m]=h.useState({origin:"",destination:"",mode:[],date_start:"",date_end:"",carrier:"",hs:[],value_min:0,value_max:0}),{data:x,isLoading:g,error:o}=Ts({queryKey:["filter-options"],queryFn:()=>ns({}),staleTime:1e3*60*10});h.useEffect(()=>{if(x){const i=ar(x);r({origins:i.origin_countries.sort(),destinations:i.destination_countries.sort(),modes:i.modes.sort(),carriers:i.carriers.sort(),hs:i.hs_prefixes.sort()})}},[x]),h.useEffect(()=>{const i=setTimeout(()=>{t==null||t(u)},300);return()=>clearTimeout(i)},[u,t]);const f=(i,v)=>{m(p=>({...p,[i]:v}))};return o?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md my-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ht,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:["Could not load search filters. Please try again later. (",o.message||String(o),")"]})})]})}):g?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:Array.from({length:5}).map((i,v)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(nt,{className:"h-4 w-24"}),e.jsx(nt,{className:"h-10 w-full"})]},v))}):e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{type:"button",className:"md:hidden inline-flex items-center px-3 py-2 text-sm rounded-lg border bg-white",onClick:()=>d(i=>!i),children:n?"Hide Filters":"Show Filters"}),e.jsx("div",{className:"hidden md:block"}),e.jsxs("button",{type:"button",className:"text-xs text-blue-600 underline",onClick:()=>c(i=>!i),children:[a?"Hide":"Load"," Filters JSON"]})]}),e.jsxs("div",{className:`${n?"grid":"hidden"} md:grid grid-cols-1 md:grid-cols-6 gap-4`,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin Country"}),e.jsxs("select",{id:"origin",value:u.origin,onChange:i=>f("origin",i.target.value),disabled:g,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Origin"}),s.origins.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Country"}),e.jsxs("select",{id:"destination",value:u.destination,onChange:i=>f("destination",i.target.value),disabled:g,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Destination"}),s.destinations.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:s.modes.map(i=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(st,{checked:u.mode.includes(i),onCheckedChange:v=>{const p=new Set(u.mode);v?p.add(i):p.delete(i),f("mode",Array.from(p))}}),e.jsx("span",{className:"capitalize",children:i})]},i))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"carrier",className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier"}),e.jsxs("select",{id:"carrier",value:u.carrier,onChange:i=>f("carrier",i.target.value),disabled:g,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Carrier"}),s.carriers.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HS Codes"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:s.hs.slice(0,12).map(i=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(st,{checked:u.hs.includes(i),onCheckedChange:v=>{const p=new Set(u.hs);v?p.add(i):p.delete(i),f("hs",Array.from(p))}}),e.jsx("span",{children:i})]},i))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shipment Value (USD)"}),e.jsxs("div",{className:"px-2",children:[e.jsx(Ft,{min:0,max:1e6,step:1e4,value:[u.value_min,u.value_max||1e6],onValueChange:([i,v])=>m(p=>({...p,value_min:i,value_max:v}))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsxs("span",{children:["$","{",u.value_min.toLocaleString(),"}"]}),e.jsxs("span",{children:["$","{",(u.value_max||1e6).toLocaleString(),"}"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_start",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Start"}),e.jsx("input",{type:"date",id:"date_start",value:u.date_start,onChange:i=>f("date_start",i.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_end",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date End"}),e.jsx("input",{type:"date",id:"date_end",value:u.date_end,onChange:i=>f("date_end",i.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),a&&e.jsx("pre",{className:"md:col-span-6 mt-2 text-xs bg-gray-50 border rounded p-3 overflow-auto max-h-64",children:JSON.stringify(x,null,2)})]})]})}function nr({company:t,onSelect:s,onSave:r,isSaving:a,isSaved:c,isNew:n,onStartOutreach:d,onDraftRFP:u,savingCompanyId:m}){const x=o=>o?o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:o.toLocaleString():"0",g=m===t.id;return e.jsxs(Ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},className:"bg-white/90 backdrop-blur-sm rounded-2xl p-5 shadow-lg border border-gray-200/60 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>s(t),children:[n&&e.jsx("div",{className:"mb-3",children:e.jsx(mt,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:"New Shipper"})}),e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate text-lg mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsxs("span",{children:["ID: ",t.id]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 font-medium mb-1",children:[e.jsx(dt,{className:"w-3 h-3"}),"Shipments (12M)"]}),e.jsx("div",{className:"text-lg font-bold text-blue-900",children:x(t.shipments_12m)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 font-medium mb-1",children:[e.jsx(ft,{className:"w-3 h-3"}),"Last Activity"]}),e.jsx("div",{className:"text-sm font-bold text-purple-900",children:t.last_seen?bt(new Date(t.last_seen),"MMM d"):"N/A"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Route:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:t.top_route||"Various routes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Carrier:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:t.top_carrier||"Multiple carriers"})]})]}),e.jsxs("div",{className:"flex gap-2",onClick:o=>o.stopPropagation(),children:[e.jsxs(z,{size:"sm",variant:"outline",onClick:()=>r(t),disabled:g||c,className:"flex-1",children:[g&&e.jsx(pt,{className:"mr-2 h-3 w-3 animate-spin"}),c?e.jsx(St,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(gt,{className:"w-3 h-3 mr-1"}),c?"Saved":"Save"]}),e.jsx(z,{size:"sm",onClick:o=>{o.stopPropagation(),window.location.href=`/app/companies/${t.id||t.company_id}`},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})}function or({company:t,onSelect:s,onSave:r,isSaving:a,isSaved:c,isNew:n,onStartOutreach:d,onDraftRFP:u,savingCompanyId:m,index:x=0}){const g=f=>f?f>=1e6?`${(f/1e6).toFixed(1)}M`:f>=1e3?`${(f/1e3).toFixed(0)}K`:f.toLocaleString():"0",o=m===t.id;return e.jsx(Ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:x*.05},className:"p-4 hover:bg-gray-50 transition-all duration-200 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>s(t),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:t.name}),n&&e.jsx(mt,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs",children:"New"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["ID: ",t.id]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:(t.summary||t.description||`Top route ${t.top_route||"various"}; top carrier ${t.top_carrier||"various"}.`).toString()}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-3 h-3"})," Shipments (12M): ",e.jsx("b",{className:"text-gray-900 ml-1",children:g(t.shipments_12m)})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ft,{className:"w-3 h-3"})," Last: ",e.jsx("b",{className:"text-gray-900 ml-1",children:t.last_seen?bt(new Date(t.last_seen),"MMM d"):"N/A"})]}),e.jsxs("span",{className:"hidden md:flex items-center gap-1",children:[e.jsx(xt,{className:"w-3 h-3"})," Route: ",e.jsx("b",{className:"text-gray-900 ml-1 truncate max-w-[220px]",children:t.top_route||"Various"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:f=>f.stopPropagation(),children:[e.jsxs(z,{size:"sm",variant:"outline",onClick:()=>r(t),disabled:o||c,children:[o&&e.jsx(pt,{className:"mr-2 h-3 w-3 animate-spin"}),c?e.jsx(St,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(gt,{className:"w-3 h-3 mr-1"}),c?"Saved":"Save"]}),e.jsx(z,{size:"sm",onClick:()=>{window.location.href=`/app/companies/${t.id||t.company_id}`},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"View"})]})]})})}function lr({searchResults:t,totalResults:s,isLoading:r,onCompanySelect:a,onSave:c,onStartOutreach:n,onDraftRFP:d,user:u,newShipperEvents:m,savedCompanyIds:x,savingCompanyId:g,viewMode:o,setViewMode:f,currentPage:i,totalPages:v,onPageChange:p}){const b=t&&t.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Search Results"}),!r&&e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Found ",Number(s||0).toLocaleString()," companies • Showing ",(t==null?void 0:t.length)||0," on this page"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsxs(z,{size:"sm",variant:o==="grid"?"secondary":"ghost",onClick:()=>f("grid"),className:"h-8 px-3",children:[e.jsx(Ls,{className:"w-4 h-4 mr-1"}),"Cards"]}),e.jsxs(z,{size:"sm",variant:o==="list"?"secondary":"ghost",onClick:()=>f("list"),className:"h-8 px-3",children:[e.jsx(gs,{className:"w-4 h-4 mr-1"}),"List"]})]}),v>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{variant:"outline",size:"sm",onClick:()=>p(i-1),disabled:i===1||r,className:"h-8",children:e.jsx(Fs,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 px-2",children:["Page ",i," of ",v]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>p(i+1),disabled:i>=v||r,className:"h-8",children:e.jsx(ps,{className:"h-4 w-4"})})]})]})]}),r?e.jsx("div",{className:`grid gap-4 md:gap-6 ${o==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:Array.from({length:12}).map((S,k)=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"})]})]},k))}):b?e.jsxs("div",{className:`grid gap-4 md:gap-6 ${o==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:[e.jsx(bs,{children:t.map(S=>{const k=S.company_id||S.id,C=g===k,w=x.has(k),L=m.includes(k);return o==="grid"?e.jsx(nr,{company:S,onSelect:a,onSave:c,isSaving:C,isSaved:w,isNew:L,onStartOutreach:n,onDraftRFP:d,savingCompanyId:g},k):e.jsx(or,{company:S,onSelect:a,onSave:c,isSaving:C,isSaved:w,isNew:L,onStartOutreach:n,onDraftRFP:d,savingCompanyId:g},k)})}),i<v&&e.jsx("div",{className:"col-span-full flex justify-center mt-2",children:e.jsx(z,{variant:"outline",onClick:()=>p(i+1),disabled:r,children:"Load More"})})]}):e.jsxs(Ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(ht,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No results found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-sm mx-auto",children:"Try adjusting your search query or filters to find companies."})]})]})}const Ce=25;function $r(){const t=rs(),[s,r]=h.useState(null),[a,c]=h.useState(""),[n,d]=h.useState({mode:[],origin:"",destination:"",carrier:"",hs:[],date_start:null,date_end:null}),[u,m]=h.useState([]),[x,g]=h.useState(!1),[o,f]=h.useState(""),[i,v]=h.useState(null),[p,b]=h.useState(!1),[S,k]=h.useState(!1),[C,w]=h.useState(""),[L,Y]=h.useState(1),[G,A]=h.useState(0),[X,E]=h.useState(new Set),[R,M]=h.useState(null),[F,de]=h.useState(null),[ue,J]=h.useState("grid"),[K,H]=h.useState(!1);h.useEffect(()=>{const N=setTimeout(()=>f(a),300);return()=>clearTimeout(N)},[a]),h.useEffect(()=>{K&&ye(1)},[o,n]);const he=h.useMemo(()=>Math.max(1,Math.ceil((G||0)/Ce)),[G]),Ke=h.useCallback(async()=>{try{const N=await as.me();r(N)}catch(N){console.error("Error loading user:",N)}},[]);h.useEffect(()=>{Ke()},[Ke]);const ye=h.useCallback(async N=>{var se,ve,me;const B=N||1;g(!0),de(null),Y(B),H(!0);try{const V=(B-1)*Ce,Qt={q:a||void 0,mode:Array.isArray(n.mode)&&n.mode.length===1?n.mode[0]:"all",filters:{origin:n.origin?[n.origin]:void 0,destination:n.destination?[n.destination]:void 0,carrier:n.carrier?[n.carrier]:void 0,hs:Array.isArray(n.hs)&&n.hs.length?n.hs:void 0},dateRange:{from:n.date_start||void 0,to:n.date_end||void 0},pagination:{limit:Ce,offset:V}},I=await os(Qt),zt=(I==null?void 0:I.items)||(Array.isArray(I==null?void 0:I.results)?I.results:void 0)||((se=I==null?void 0:I.data)==null?void 0:se.items)||((ve=I==null?void 0:I.data)==null?void 0:ve.results)||[],Kt=typeof(I==null?void 0:I.total)=="number"?I.total:((me=I==null?void 0:I.data)==null?void 0:me.total)||0,Ht=(zt||[]).map(D=>{var $e,Ye,Ge;const we=D.name||D.company||D.company_name||"Unknown",$t=D.id||D.company_id||(we?we.toLowerCase().replace(/[^a-z0-9]+/g,"-"):void 0),Yt=D.shipments_12m||D.shipments||0,Gt=D.last_seen||D.lastShipmentDate||D.last_ship_date||null,Wt=D.top_carrier||Array.isArray(D.carriersTop)&&(($e=D.carriersTop[0])==null?void 0:$e.v)||void 0,qt=D.top_route||(Array.isArray(D.originsTop)&&Array.isArray(D.destsTop)?`${((Ye=D.originsTop[0])==null?void 0:Ye.v)||"Origin"} → ${((Ge=D.destsTop[0])==null?void 0:Ge.v)||"Dest"}`:void 0);return{...D,id:$t,name:we,shipments_12m:Yt,last_seen:Gt,top_carrier:Wt,top_route:qt}});m(Ht),A(Kt)}catch(V){console.error("Search error:",V),de((V==null?void 0:V.message)&&String(V.message)||"Search failed. Please try again."),m([]),A(0)}finally{g(!1)}},[a,n]),Ut=h.useCallback(N=>{v(N),b(!0)},[]),He=async N=>{if(R)return;const B=N.id;M(B);const se=new Set(X),ve=se.has(B),me=new Set(se);ve||me.add(B),E(me);try{const V=await xs({name:N.name,website:N.website||void 0,external_ref:String(B)});if(!V||!V.id&&!V.ok)throw new Error("Save failed")}catch(V){console.error("Failed to save company:",V),E(se),alert("Failed to save company. Please try again.")}finally{M(null)}},Lt=N=>{const B=N.id;B&&t(tt("EmailCenter?company_id="+B))},Bt=N=>{const B=N.id;B&&t(tt("RFPStudio?company_id="+B))},Vt=N=>{N>=1&&N<=he&&!x&&ye(N)};return e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Trade Intelligence Discovery"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Search companies by trade activity, routes, commodities, and shipping patterns"})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 md:p-6 mb-6 md:mb-8 border border-gray-200/60",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(is,{value:a,onChange:N=>c(N.target.value),placeholder:"Search by company name or alias (e.g., UPS, Maersk)...",className:"pl-4 pr-12 py-3 text-base md:text-lg bg-gray-50 border-0 rounded-xl",onKeyDown:N=>{N.key==="Enter"&&ye(1)}}),e.jsx(et,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsx(z,{onClick:()=>ye(1),disabled:x,className:"px-6 md:px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl",children:x?"Searching...":"Search"})]})}),e.jsx(ir,{onChange:d}),F&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Search Error:"}),e.jsx("span",{children:F})]})}),K?e.jsx(lr,{searchResults:u,totalResults:G,isLoading:x,onCompanySelect:Ut,onSave:He,onStartOutreach:Lt,onDraftRFP:Bt,user:s,newShipperEvents:[],savedCompanyIds:X,savingCompanyId:R,viewMode:ue,setViewMode:J,currentPage:L,totalPages:he,onPageChange:Vt}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(et,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Search"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"Enter a company name or use the filters above to search for trade intelligence data."})]}),e.jsx(ys,{isOpen:S,onClose:()=>k(!1),feature:C,currentPlan:s==null?void 0:s.plan}),e.jsx(fs,{company:i,isOpen:p,onClose:()=>b(!1),onSave:He,user:s})]})})}export{$r as default};
