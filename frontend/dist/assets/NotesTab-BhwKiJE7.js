import{c as E,j as e,r as o,C as k,d as A,e as T,a as Be,b as D,D as Jt,$ as Zt,B as _,y as Q,U as Qt,a0 as Ke,z as F,S as er,M as tr,T as rr}from"./main-BRmCLSyy.js";import{B as O}from"./badge-DN7Tx7sn.js";import{f as _e}from"./format-DIePDvv_.js";import{T as fe,P as ze}from"./truck-ChkJDUiX.js";import{S as G}from"./ship-CHCwRAEQ.js";import{S as ge,b as ve,d as je,e as we,f as I,i as Ve,j as nr,A as sr,P as ar,h as or,g as ir,R as cr,F as lr,D as dr,k as ur,l as mr,C as pr}from"./select-IgCzI-6g.js";import{I as Y}from"./input-Do-dFjsq.js";import{L as H}from"./label-BC7MeEph.js";import{Contact as Le}from"./entities-CpFcElq0.js";import{c as He,a as xr,g as qe,d as hr,b as w,P as q,h as fr,u as gr,e as Fe}from"./index-Dwi3XzSK.js";import{P as ie}from"./index-KsLxg6ks.js";import{d as We,I as vr,R as jr}from"./tabs-DGna2KdU.js";import{toggleCompanySave as $e,phantombusterLinkedIn as wr,enrichCompany as Nr}from"./functions-CUhWm72e.js";import{L as Ne}from"./loader-circle-C-d0W6X-.js";import{P as Ye}from"./plus-mt3_y2mO.js";import{L as yr}from"./lock-D3O03tQl.js";import{U as Xe}from"./users-DYy3Vzb4.js";import{M as br}from"./message-square--FkIesO7.js";import{T as _r}from"./trash-2-Dl7EJXJm.js";import{T as Mr}from"./textarea-DCMZOcDg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Sr=E("Bookmark",Cr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rr=E("ChevronRight",kr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dr=E("Circle",Ir);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Pr=E("EllipsisVertical",Er);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Tr=E("Filter",Ar);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ge=E("Linkedin",Or);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fr=E("Phone",Lr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],he=E("Sparkles",$r);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ur=E("SquarePen",Gr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],Je=E("TramFront",Br);function Ds({company:t,isLoading:n}){if(!n&&!t)return e.jsx("div",{className:"text-center py-8 text-gray-600",children:"No overview data available for this company."});const r=o.useMemo(()=>t?{totalShipments:t.shipments_12m||0,topRoute:t.top_route||"N/A",topCarriers:t.top_carriers||[],modeBreakdown:t.mode_breakdown||[]}:{totalShipments:0,topRoute:"N/A",topCarriers:[],modeBreakdown:[]},[t]),s=a=>({ocean:G,air:ze,truck:fe,rail:Je,unknown:G})[a]||G;return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(k,{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white",children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2 text-white",children:[e.jsx(Be,{className:"w-5 h-5 text-white"}),"Company Details"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Industry:"}),e.jsx("p",{className:"font-medium text-white",children:t.industry||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Headquarters:"}),e.jsx("p",{className:"font-medium text-white",children:[t.hq_city,t.hq_country].filter(Boolean).join(", ")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Domain:"}),e.jsx("p",{className:"font-medium text-white",children:t.domain?e.jsx("a",{href:`https://${String(t.domain).replace(/^https?:\/\//,"")}`,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-blue-300 hover:underline",children:t.domain}):"Not specified"})]}),t.employee_count&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Employees:"}),e.jsx("p",{className:"font-medium text-white",children:t.employee_count.toLocaleString()})]})]})]}),e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Trade Activity Overview"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Shipments (12m):"}),e.jsx("p",{className:"font-bold text-purple-700 text-lg",children:((r==null?void 0:r.totalShipments)||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Top Route:"}),e.jsx("p",{className:"font-medium",children:r==null?void 0:r.topRoute})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Seen:"}),e.jsx("p",{className:"font-medium",children:t.last_seen?_e(new Date(t.last_seen),"MMM d, yyyy"):"No recent activity"})]})]})]})]}),r&&e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),"Primary Carriers"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:r.topCarriers.length>0?r.topCarriers.map((a,i)=>e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})},i)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No carrier data available"})})})]})}),r&&r.modeBreakdown.length>0&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsx(T,{className:"text-lg",children:"Transportation Modes"})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.modeBreakdown.map(a=>{const i=s(a.mode),l=r.totalShipments,d=l>0?(a.cnt/l*100).toFixed(1):0;return e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(i,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-semibold capitalize text-gray-900",children:a.mode}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.cnt," shipments (",d,"%)"]})]},a.mode)})})})]}),t.top_hs&&t.top_hs.length>0&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Top Commodities (HS Codes)"]})}),e.jsx(D,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.top_hs.slice(0,10).map((a,i)=>e.jsx(O,{variant:"outline",className:"text-xs",children:a},i))})})]})]})}function Es({shipments:t,isLoading:n,onRowClick:r}){const[s,a]=o.useState("date"),[i,l]=o.useState("desc"),[d,p]=o.useState("all"),h=c=>c==null?"N/A":c>=1e6?`${(c/1e6).toFixed(1)}M kg`:c>=1e3?`${(c/1e3).toFixed(0)}K kg`:`${c.toFixed(0)} kg`,m=o.useMemo(()=>{let c=t;return d!=="all"&&(c=t.filter(j=>(j.mode||j.transport_mode||"").toLowerCase()===d)),Array.isArray(c)||(c=[]),[...c].sort((j,N)=>{let y=j[s],b=N[s];if(y==null&&(y=""),b==null&&(b=""),s==="date"){const $=j.shipped_on||j.date||j.snapshot_date||j.shipment_date,K=N.shipped_on||N.date||N.snapshot_date||N.shipment_date;y=$?new Date($):new Date(0),b=K?new Date(K):new Date(0)}else if(s==="gross_weight_kg"){const $=j.gross_weight_kg??j.weight_kg??0,K=N.gross_weight_kg??N.weight_kg??0;y=$,b=K}return i==="asc"?typeof y=="string"&&typeof b=="string"?y.localeCompare(b):y>b?1:-1:typeof y=="string"&&typeof b=="string"?b.localeCompare(y):y<b?1:-1})},[t,s,i,d]),u=c=>{const N={ocean:G,air:ze,truck:fe,rail:Je}[c==null?void 0:c.toLowerCase()]||G;return e.jsx(N,{className:"w-4 h-4"})},x=c=>({ocean:"bg-blue-100 text-blue-800",air:"bg-purple-100 text-purple-800",truck:"bg-green-100 text-green-800",rail:"bg-orange-100 text-orange-800"})[c==null?void 0:c.toLowerCase()]||"bg-gray-100 text-gray-800",g=o.useMemo(()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit"}),[]),v=o.useMemo(()=>new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}),[]);return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):!t||t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No shipment data"}),e.jsx("p",{className:"text-gray-500",children:"No shipment records found for this company"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4 text-gray-500"}),e.jsxs(ge,{value:d,onValueChange:p,children:[e.jsx(ve,{className:"w-32",children:e.jsx(je,{placeholder:"All Modes"})}),e.jsxs(we,{children:[e.jsx(I,{value:"all",children:"All Modes"}),e.jsx(I,{value:"ocean",children:"Ocean"}),e.jsx(I,{value:"air",children:"Air"}),e.jsx(I,{value:"truck",children:"Truck"}),e.jsx(I,{value:"rail",children:"Rail"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs(ge,{value:s,onValueChange:a,children:[e.jsx(ve,{className:"w-32",children:e.jsx(je,{placeholder:"Date"})}),e.jsxs(we,{children:[e.jsx(I,{value:"date",children:"Date"}),e.jsx(I,{value:"gross_weight_kg",children:"Weight"}),e.jsx(I,{value:"carrier_name",children:"Carrier"}),e.jsx(I,{value:"origin_country",children:"Origin"})]})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>l(i==="asc"?"desc":"asc"),children:i==="asc"?"↑":"↓"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[m.length," of ",t.length," shipments"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 text-xs md:text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Mode"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Route"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Carrier"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"HS Code"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-xs md:text-sm",children:m.slice(0,50).map((c,j)=>e.jsxs("tr",{className:`${j%2===1?"bg-gray-50":"bg-white"} hover:bg-gray-100 ${r?"cursor-pointer":""}`,onClick:()=>{r&&r(c)},children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:(()=>{const N=c.shipped_on||c.date||c.snapshot_date||c.shipment_date;return N?g.format(new Date(N)):"N/A"})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[u(c.mode||c.transport_mode),e.jsx(O,{className:`text-xs ${x(c.mode)}`,children:c.mode||c.transport_mode||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-xs overflow-hidden",children:[e.jsx("div",{className:"font-medium truncate",children:c.origin||c.origin_country||c.origin_port||"Unknown"}),e.jsxs("div",{className:"text-gray-500 text-xs truncate",children:["→ ",c.destination||c.dest_country||c.dest_port||"Unknown"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-blue-700 whitespace-nowrap",children:h(c.gross_weight_kg??c.weight_kg)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",children:c.carrier_name||c.carrier||"Unknown"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:c.hs_code||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:typeof c.value_usd=="number"?v.format(c.value_usd):"—"})]},c.id||j))})]})}),m.length>50&&e.jsx("div",{className:"bg-gray-50 px-4 py-3 text-center border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing first 50 shipments. ",m.length-50," more available."]})})]})]})}function Kr({onSubmit:t,onCancel:n}){const[r,s]=o.useState({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""}),a=l=>{if(l.preventDefault(),!r.full_name.trim()){alert("Full name is required");return}t(r),s({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""})},i=["Logistics","Supply Chain","Procurement","Operations","Sales","Marketing","Finance","Executive","Other"];return e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{children:"Full Name (Required)"}),e.jsx(Y,{value:r.full_name,onChange:l=>s(d=>({...d,full_name:l.target.value})),placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{children:"Job Title"}),e.jsx(Y,{value:r.title,onChange:l=>s(d=>({...d,title:l.target.value})),placeholder:"e.g., Logistics Manager"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{children:"Department"}),e.jsxs(ge,{value:r.dept,onValueChange:l=>s(d=>({...d,dept:l})),children:[e.jsx(ve,{children:e.jsx(je,{placeholder:"Select department"})}),e.jsx(we,{children:i.map(l=>e.jsx(I,{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx(H,{children:"Email Address"}),e.jsx(Y,{type:"email",value:r.email,onChange:l=>s(d=>({...d,email:l.target.value})),placeholder:"contact@company.com"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{children:"Phone Number"}),e.jsx(Y,{value:r.phone,onChange:l=>s(d=>({...d,phone:l.target.value})),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(H,{children:"LinkedIn Profile URL"}),e.jsx(Y,{value:r.linkedin,onChange:l=>s(d=>({...d,linkedin:l.target.value})),placeholder:"https://linkedin.com/in/profile"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(_,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Save Contact"})]})]})}var ye=["Enter"," "],zr=["ArrowDown","PageUp","Home"],Ze=["ArrowUp","PageDown","End"],Vr=[...zr,...Ze],Hr={ltr:[...ye,"ArrowRight"],rtl:[...ye,"ArrowLeft"]},qr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ee="Menu",[J,Wr,Yr]=xr(ee),[U,Qe]=He(ee,[Yr,Ve,We]),ce=Ve(),et=We(),[Xr,B]=U(ee),[Jr,te]=U(ee),tt=t=>{const{__scopeMenu:n,open:r=!1,children:s,dir:a,onOpenChange:i,modal:l=!0}=t,d=ce(n),[p,h]=o.useState(null),m=o.useRef(!1),u=qe(i),x=hr(a);return o.useEffect(()=>{const g=()=>{m.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>m.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(nr,{...d,children:e.jsx(Xr,{scope:n,open:r,onOpenChange:u,content:p,onContentChange:h,children:e.jsx(Jr,{scope:n,onClose:o.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:m,dir:x,modal:l,children:s})})})};tt.displayName=ee;var Zr="MenuAnchor",Me=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ce(r);return e.jsx(sr,{...a,...s,ref:n})});Me.displayName=Zr;var Ce="MenuPortal",[Qr,rt]=U(Ce,{forceMount:void 0}),nt=t=>{const{__scopeMenu:n,forceMount:r,children:s,container:a}=t,i=B(Ce,n);return e.jsx(Qr,{scope:n,forceMount:r,children:e.jsx(ie,{present:r||i.open,children:e.jsx(ar,{asChild:!0,container:a,children:s})})})};nt.displayName=Ce;var S="MenuContent",[en,Se]=U(S),st=o.forwardRef((t,n)=>{const r=rt(S,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=B(S,t.__scopeMenu),l=te(S,t.__scopeMenu);return e.jsx(J.Provider,{scope:t.__scopeMenu,children:e.jsx(ie,{present:s||i.open,children:e.jsx(J.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(tn,{...a,ref:n}):e.jsx(rn,{...a,ref:n})})})})}),tn=o.forwardRef((t,n)=>{const r=B(S,t.__scopeMenu),s=o.useRef(null),a=Q(n,s);return o.useEffect(()=>{const i=s.current;if(i)return or(i)},[]),e.jsx(ke,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:w(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),rn=o.forwardRef((t,n)=>{const r=B(S,t.__scopeMenu);return e.jsx(ke,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nn=Qt("MenuContent.ScrollLock"),ke=o.forwardRef((t,n)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:p,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:u,onInteractOutside:x,onDismiss:g,disableOutsideScroll:v,...c}=t,j=B(S,r),N=te(S,r),y=ce(r),b=et(r),$=Wr(r),[K,Ee]=o.useState(null),re=o.useRef(null),Ht=Q(n,re,j.onContentChange),ne=o.useRef(0),se=o.useRef(""),qt=o.useRef(0),ue=o.useRef(null),Pe=o.useRef("right"),me=o.useRef(0),Wt=v?cr:o.Fragment,Yt=v?{as:nn,allowPinchZoom:!0}:void 0,Xt=f=>{var V,Te;const C=se.current+f,R=$().filter(P=>!P.disabled),L=document.activeElement,pe=(V=R.find(P=>P.ref.current===L))==null?void 0:V.textValue,xe=R.map(P=>P.textValue),Ae=fn(xe,C,pe),W=(Te=R.find(P=>P.textValue===Ae))==null?void 0:Te.ref.current;(function P(Oe){se.current=Oe,window.clearTimeout(ne.current),Oe!==""&&(ne.current=window.setTimeout(()=>P(""),1e3))})(C),W&&setTimeout(()=>W.focus())};o.useEffect(()=>()=>window.clearTimeout(ne.current),[]),ir();const z=o.useCallback(f=>{var R,L;return Pe.current===((R=ue.current)==null?void 0:R.side)&&vn(f,(L=ue.current)==null?void 0:L.area)},[]);return e.jsx(en,{scope:r,searchRef:se,onItemEnter:o.useCallback(f=>{z(f)&&f.preventDefault()},[z]),onItemLeave:o.useCallback(f=>{var C;z(f)||((C=re.current)==null||C.focus(),Ee(null))},[z]),onTriggerLeave:o.useCallback(f=>{z(f)&&f.preventDefault()},[z]),pointerGraceTimerRef:qt,onPointerGraceIntentChange:o.useCallback(f=>{ue.current=f},[]),children:e.jsx(Wt,{...Yt,children:e.jsx(lr,{asChild:!0,trapped:a,onMountAutoFocus:w(i,f=>{var C;f.preventDefault(),(C=re.current)==null||C.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(dr,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:u,onInteractOutside:x,onDismiss:g,children:e.jsx(jr,{asChild:!0,...b,dir:N.dir,orientation:"vertical",loop:s,currentTabStopId:K,onCurrentTabStopIdChange:Ee,onEntryFocus:w(p,f=>{N.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(ur,{role:"menu","aria-orientation":"vertical","data-state":wt(j.open),"data-radix-menu-content":"",dir:N.dir,...y,...c,ref:Ht,style:{outline:"none",...c.style},onKeyDown:w(c.onKeyDown,f=>{const R=f.target.closest("[data-radix-menu-content]")===f.currentTarget,L=f.ctrlKey||f.altKey||f.metaKey,pe=f.key.length===1;R&&(f.key==="Tab"&&f.preventDefault(),!L&&pe&&Xt(f.key));const xe=re.current;if(f.target!==xe||!Vr.includes(f.key))return;f.preventDefault();const W=$().filter(V=>!V.disabled).map(V=>V.ref.current);Ze.includes(f.key)&&W.reverse(),xn(W)}),onBlur:w(t.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(ne.current),se.current="")}),onPointerMove:w(t.onPointerMove,Z(f=>{const C=f.target,R=me.current!==f.clientX;if(f.currentTarget.contains(C)&&R){const L=f.clientX>me.current?"right":"left";Pe.current=L,me.current=f.clientX}}))})})})})})})});st.displayName=S;var sn="MenuGroup",Re=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(q.div,{role:"group",...s,ref:n})});Re.displayName=sn;var an="MenuLabel",at=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(q.div,{...s,ref:n})});at.displayName=an;var ae="MenuItem",Ue="menu.itemSelect",le=o.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:s,...a}=t,i=o.useRef(null),l=te(ae,t.__scopeMenu),d=Se(ae,t.__scopeMenu),p=Q(n,i),h=o.useRef(!1),m=()=>{const u=i.current;if(!r&&u){const x=new CustomEvent(Ue,{bubbles:!0,cancelable:!0});u.addEventListener(Ue,g=>s==null?void 0:s(g),{once:!0}),fr(u,x),x.defaultPrevented?h.current=!1:l.onClose()}};return e.jsx(ot,{...a,ref:p,disabled:r,onClick:w(t.onClick,m),onPointerDown:u=>{var x;(x=t.onPointerDown)==null||x.call(t,u),h.current=!0},onPointerUp:w(t.onPointerUp,u=>{var x;h.current||(x=u.currentTarget)==null||x.click()}),onKeyDown:w(t.onKeyDown,u=>{const x=d.searchRef.current!=="";r||x&&u.key===" "||ye.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});le.displayName=ae;var ot=o.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...i}=t,l=Se(ae,r),d=et(r),p=o.useRef(null),h=Q(n,p),[m,u]=o.useState(!1),[x,g]=o.useState("");return o.useEffect(()=>{const v=p.current;v&&g((v.textContent??"").trim())},[i.children]),e.jsx(J.ItemSlot,{scope:r,disabled:s,textValue:a??x,children:e.jsx(vr,{asChild:!0,...d,focusable:!s,children:e.jsx(q.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:h,onPointerMove:w(t.onPointerMove,Z(v=>{s?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:w(t.onPointerLeave,Z(v=>l.onItemLeave(v))),onFocus:w(t.onFocus,()=>u(!0)),onBlur:w(t.onBlur,()=>u(!1))})})})}),on="MenuCheckboxItem",it=o.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:s,...a}=t;return e.jsx(mt,{scope:t.__scopeMenu,checked:r,children:e.jsx(le,{role:"menuitemcheckbox","aria-checked":oe(r)?"mixed":r,...a,ref:n,"data-state":De(r),onSelect:w(a.onSelect,()=>s==null?void 0:s(oe(r)?!0:!r),{checkForDefaultPrevented:!1})})})});it.displayName=on;var ct="MenuRadioGroup",[cn,ln]=U(ct,{value:void 0,onValueChange:()=>{}}),lt=o.forwardRef((t,n)=>{const{value:r,onValueChange:s,...a}=t,i=qe(s);return e.jsx(cn,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(Re,{...a,ref:n})})});lt.displayName=ct;var dt="MenuRadioItem",ut=o.forwardRef((t,n)=>{const{value:r,...s}=t,a=ln(dt,t.__scopeMenu),i=r===a.value;return e.jsx(mt,{scope:t.__scopeMenu,checked:i,children:e.jsx(le,{role:"menuitemradio","aria-checked":i,...s,ref:n,"data-state":De(i),onSelect:w(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,r)},{checkForDefaultPrevented:!1})})})});ut.displayName=dt;var Ie="MenuItemIndicator",[mt,dn]=U(Ie,{checked:!1}),pt=o.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:s,...a}=t,i=dn(Ie,r);return e.jsx(ie,{present:s||oe(i.checked)||i.checked===!0,children:e.jsx(q.span,{...a,ref:n,"data-state":De(i.checked)})})});pt.displayName=Ie;var un="MenuSeparator",xt=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(q.div,{role:"separator","aria-orientation":"horizontal",...s,ref:n})});xt.displayName=un;var mn="MenuArrow",ht=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ce(r);return e.jsx(mr,{...a,...s,ref:n})});ht.displayName=mn;var pn="MenuSub",[Ps,ft]=U(pn),X="MenuSubTrigger",gt=o.forwardRef((t,n)=>{const r=B(X,t.__scopeMenu),s=te(X,t.__scopeMenu),a=ft(X,t.__scopeMenu),i=Se(X,t.__scopeMenu),l=o.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:p}=i,h={__scopeMenu:t.__scopeMenu},m=o.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return o.useEffect(()=>m,[m]),o.useEffect(()=>{const u=d.current;return()=>{window.clearTimeout(u),p(null)}},[d,p]),e.jsx(Me,{asChild:!0,...h,children:e.jsx(ot,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":wt(r.open),...t,ref:Ke(n,a.onTriggerChange),onClick:u=>{var x;(x=t.onClick)==null||x.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:w(t.onPointerMove,Z(u=>{i.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:w(t.onPointerLeave,Z(u=>{var g,v;m();const x=(g=r.content)==null?void 0:g.getBoundingClientRect();if(x){const c=(v=r.content)==null?void 0:v.dataset.side,j=c==="right",N=j?-5:5,y=x[j?"left":"right"],b=x[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:u.clientX+N,y:u.clientY},{x:y,y:x.top},{x:b,y:x.top},{x:b,y:x.bottom},{x:y,y:x.bottom}],side:c}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(u),u.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:w(t.onKeyDown,u=>{var g;const x=i.searchRef.current!=="";t.disabled||x&&u.key===" "||Hr[s.dir].includes(u.key)&&(r.onOpenChange(!0),(g=r.content)==null||g.focus(),u.preventDefault())})})})});gt.displayName=X;var vt="MenuSubContent",jt=o.forwardRef((t,n)=>{const r=rt(S,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=B(S,t.__scopeMenu),l=te(S,t.__scopeMenu),d=ft(vt,t.__scopeMenu),p=o.useRef(null),h=Q(n,p);return e.jsx(J.Provider,{scope:t.__scopeMenu,children:e.jsx(ie,{present:s||i.open,children:e.jsx(J.Slot,{scope:t.__scopeMenu,children:e.jsx(ke,{id:d.contentId,"aria-labelledby":d.triggerId,...a,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var u;l.isUsingKeyboardRef.current&&((u=p.current)==null||u.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:w(t.onFocusOutside,m=>{m.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:w(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:w(t.onKeyDown,m=>{var g;const u=m.currentTarget.contains(m.target),x=qr[l.dir].includes(m.key);u&&x&&(i.onOpenChange(!1),(g=d.trigger)==null||g.focus(),m.preventDefault())})})})})})});jt.displayName=vt;function wt(t){return t?"open":"closed"}function oe(t){return t==="indeterminate"}function De(t){return oe(t)?"indeterminate":t?"checked":"unchecked"}function xn(t){const n=document.activeElement;for(const r of t)if(r===n||(r.focus(),document.activeElement!==n))return}function hn(t,n){return t.map((r,s)=>t[(n+s)%t.length])}function fn(t,n,r){const a=n.length>1&&Array.from(n).every(h=>h===n[0])?n[0]:n,i=r?t.indexOf(r):-1;let l=hn(t,Math.max(i,0));a.length===1&&(l=l.filter(h=>h!==r));const p=l.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return p!==r?p:void 0}function gn(t,n){const{x:r,y:s}=t;let a=!1;for(let i=0,l=n.length-1;i<n.length;l=i++){const d=n[i],p=n[l],h=d.x,m=d.y,u=p.x,x=p.y;m>s!=x>s&&r<(u-h)*(s-m)/(x-m)+h&&(a=!a)}return a}function vn(t,n){if(!n)return!1;const r={x:t.clientX,y:t.clientY};return gn(r,n)}function Z(t){return n=>n.pointerType==="mouse"?t(n):void 0}var jn=tt,wn=Me,Nn=nt,yn=st,bn=Re,_n=at,Mn=le,Cn=it,Sn=lt,kn=ut,Rn=pt,In=xt,Dn=ht,En=gt,Pn=jt,de="DropdownMenu",[An,As]=He(de,[Qe]),M=Qe(),[Tn,Nt]=An(de),yt=t=>{const{__scopeDropdownMenu:n,children:r,dir:s,open:a,defaultOpen:i,onOpenChange:l,modal:d=!0}=t,p=M(n),h=o.useRef(null),[m,u]=gr({prop:a,defaultProp:i??!1,onChange:l,caller:de});return e.jsx(Tn,{scope:n,triggerId:Fe(),triggerRef:h,contentId:Fe(),open:m,onOpenChange:u,onOpenToggle:o.useCallback(()=>u(x=>!x),[u]),modal:d,children:e.jsx(jn,{...p,open:m,onOpenChange:u,dir:s,modal:d,children:r})})};yt.displayName=de;var bt="DropdownMenuTrigger",_t=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=t,i=Nt(bt,r),l=M(r);return e.jsx(wn,{asChild:!0,...l,children:e.jsx(q.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Ke(n,i.triggerRef),onPointerDown:w(t.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(i.onOpenToggle(),i.open||d.preventDefault())}),onKeyDown:w(t.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&i.onOpenToggle(),d.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});_t.displayName=bt;var On="DropdownMenuPortal",Mt=t=>{const{__scopeDropdownMenu:n,...r}=t,s=M(n);return e.jsx(Nn,{...s,...r})};Mt.displayName=On;var Ct="DropdownMenuContent",St=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=Nt(Ct,r),i=M(r),l=o.useRef(!1);return e.jsx(yn,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:n,onCloseAutoFocus:w(t.onCloseAutoFocus,d=>{var p;l.current||(p=a.triggerRef.current)==null||p.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:w(t.onInteractOutside,d=>{const p=d.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,m=p.button===2||h;(!a.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});St.displayName=Ct;var Ln="DropdownMenuGroup",Fn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(bn,{...a,...s,ref:n})});Fn.displayName=Ln;var $n="DropdownMenuLabel",kt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(_n,{...a,...s,ref:n})});kt.displayName=$n;var Gn="DropdownMenuItem",Rt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Mn,{...a,...s,ref:n})});Rt.displayName=Gn;var Un="DropdownMenuCheckboxItem",It=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Cn,{...a,...s,ref:n})});It.displayName=Un;var Bn="DropdownMenuRadioGroup",Kn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Sn,{...a,...s,ref:n})});Kn.displayName=Bn;var zn="DropdownMenuRadioItem",Dt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(kn,{...a,...s,ref:n})});Dt.displayName=zn;var Vn="DropdownMenuItemIndicator",Et=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Rn,{...a,...s,ref:n})});Et.displayName=Vn;var Hn="DropdownMenuSeparator",Pt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(In,{...a,...s,ref:n})});Pt.displayName=Hn;var qn="DropdownMenuArrow",Wn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Dn,{...a,...s,ref:n})});Wn.displayName=qn;var Yn="DropdownMenuSubTrigger",At=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(En,{...a,...s,ref:n})});At.displayName=Yn;var Xn="DropdownMenuSubContent",Tt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=M(r);return e.jsx(Pn,{...a,...s,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Tt.displayName=Xn;var Jn=yt,Zn=_t,Qn=Mt,Ot=St,Lt=kt,Ft=Rt,$t=It,Gt=Dt,Ut=Et,Bt=Pt,Kt=At,zt=Tt;const es=Jn,ts=Zn,rs=o.forwardRef(({className:t,inset:n,children:r,...s},a)=>e.jsxs(Kt,{ref:a,className:F("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...s,children:[r,e.jsx(Rr,{className:"ml-auto"})]}));rs.displayName=Kt.displayName;const ns=o.forwardRef(({className:t,...n},r)=>e.jsx(zt,{ref:r,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ns.displayName=zt.displayName;const Vt=o.forwardRef(({className:t,sideOffset:n=4,...r},s)=>e.jsx(Qn,{children:e.jsx(Ot,{ref:s,sideOffset:n,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Vt.displayName=Ot.displayName;const be=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Ft,{ref:s,className:F("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r}));be.displayName=Ft.displayName;const ss=o.forwardRef(({className:t,children:n,checked:r,...s},a)=>e.jsxs($t,{ref:a,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(pr,{className:"h-4 w-4"})})}),n]}));ss.displayName=$t.displayName;const as=o.forwardRef(({className:t,children:n,...r},s)=>e.jsxs(Gt,{ref:s,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(Dr,{className:"h-2 w-2 fill-current"})})}),n]}));as.displayName=Gt.displayName;const os=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Lt,{ref:s,className:F("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));os.displayName=Lt.displayName;const is=o.forwardRef(({className:t,...n},r)=>e.jsx(Bt,{ref:r,className:F("-mx-1 my-1 h-px bg-muted",t),...n}));is.displayName=Bt.displayName;const cs=t=>{switch(t==null?void 0:t.toLowerCase()){case"linkedin":return"bg-blue-100 text-blue-800";case"email":return"bg-yellow-100 text-yellow-800";case"referral":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ls=t=>{switch(t==null?void 0:t.toLowerCase()){case"responded":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_contacted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ds=({contact:t,onRefresh:n,onEdit:r})=>{var d,p;const[s,a]=o.useState({}),i=async h=>{confirm("Are you sure you want to delete this contact?")&&(await Le.delete(h),n())},l=async(h,m)=>{var x,g,v;if(!h.linkedin){alert("No LinkedIn profile available for this contact.");return}const u=`${h.id}_${m}`;a({...s,[u]:!0});try{const c=m==="connect"?`Hi ${((x=h.full_name)==null?void 0:x.split(" ")[0])||""}, I'd like to connect and share some insights about your industry.`:`Hi ${((g=h.full_name)==null?void 0:g.split(" ")[0])||""}, I have some valuable market intelligence that might interest your team. Would you be open to a quick conversation?`,j=await wr({action:m,profile_url:h.linkedin,message:c,contactId:h.id});if(j.status===200)alert(`LinkedIn ${m} initiated for ${h.full_name}.`),await Le.update(h.id,{last_contacted:new Date().toISOString()}),n();else throw new Error(((v=j.data)==null?void 0:v.error)||`LinkedIn ${m} failed`)}catch(c){console.error(`LinkedIn ${m} error:`,c),alert(`Failed to ${m} ${h.full_name}. ${c.message}`)}finally{a({...s,[u]:!1})}};return e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:((d=t.full_name)==null?void 0:d.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.title}),t.dept&&e.jsx("p",{className:"text-sm text-gray-500",children:t.dept}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[t.email&&e.jsxs("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(tr,{className:"w-4 h-4"}),t.email]}),t.phone&&e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),t.phone]}),t.linkedin&&e.jsxs("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),"LinkedIn"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.linkedin&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>l(t,"connect"),disabled:s[`${t.id}_connect`],className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:s[`${t.id}_connect`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-1"}),"Connect"]})}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>l(t,"message"),disabled:s[`${t.id}_message`],className:"text-green-600 border-green-200 hover:bg-green-50",children:s[`${t.id}_message`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsxs(e.Fragment,{children:[e.jsx(br,{className:"w-4 h-4 mr-1"}),"Message"]})})]}),e.jsxs(es,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(Pr,{className:"w-4 h-4"})})}),e.jsxs(Vt,{children:[e.jsxs(be,{onClick:r,children:[" ",e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Edit Contact"]}),e.jsxs(be,{onClick:()=>i(t.id),className:"text-red-600",children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"Delete Contact"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.verified&&e.jsx(O,{className:"bg-green-100 text-green-800",children:"Verified"}),t.source&&e.jsx(O,{className:`${cs(t.source)}`,children:t.source}),t.response_status&&e.jsx(O,{className:`${ls(t.response_status)}`,children:(p=t.response_status)==null?void 0:p.replace("_"," ")}),t.last_contacted&&e.jsxs(O,{variant:"outline",children:["Contacted ",_e(new Date(t.last_contacted),"MMM dd")]})]})]})};function Ts({company:t,contacts:n,onAddContact:r,onFindContacts:s,isLoadingContacts:a,onRefresh:i,user:l}){const[d,p]=o.useState(!1),[h,m]=o.useState(null),[u,x]=o.useState(!1);o.useEffect(()=>{t&&l?(async()=>{try{const{data:j}=await $e({list:!0}),N=new Set(j.map(y=>y.company_id));x(N.has(t.company_id||t.id))}catch(j){console.error("Error checking save status:",j),x(!1)}})():x(!1)},[t,l]);const g=async()=>{try{await $e({companyId:t.company_id||t.id}),x(!0),m(null),p(!0)}catch(c){console.error("Error saving company:",c),alert("Failed to save company.")}},v=c=>{m(c),p(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Contacts (",(n==null?void 0:n.length)||0,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",onClick:s,disabled:a||!u,className:"flex items-center gap-2",children:[a?e.jsx(Ne,{className:"w-4 h-4 animate-spin"}):e.jsx(er,{className:"w-4 h-4"}),"Find Contacts"]}),u?e.jsxs(_,{onClick:()=>{m(null),p(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Add Contact"]}):e.jsxs(_,{onClick:g,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4"}),"Save Company to Add Contacts"]})]})]}),!u&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-800",children:"Save Company Required"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You need to save this company to your CRM before adding or managing contacts. This helps organize your prospects and enables campaign features."})]})]}),e.jsx(_,{onClick:g,className:"mt-3 bg-amber-600 hover:bg-amber-700 text-white",children:"Save Company & Add Contacts"})]}),d&&e.jsx(Kr,{company:t,contact:h,onSave:c=>{r(c),p(!1),m(null)},onCancel:()=>{p(!1),m(null)}}),n&&n.length>0?e.jsx("div",{className:"grid gap-4",children:n.map(c=>e.jsx(ds,{contact:c,onRefresh:i,onEdit:()=>v(c)},c.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Xe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-sm mb-4",children:"Start building your prospect database by finding or adding contacts"}),u&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(_,{variant:"outline",onClick:s,disabled:a,children:"Find Contacts"}),e.jsx(_,{onClick:()=>{m(null),p(!0)},children:"Add Contact Manually"})]})]})]})}function Os({company:t,onCompanyUpdate:n,user:r,isGated:s,onUnlock:a,isLoading:i,onEnrich:l,isEnriching:d}){const[p,h]=o.useState(null),[m,u]=o.useState(null),x=async()=>{var g,v;if(t!=null&&t.id){u(null);try{const c=await Nr({company_id:t.id});(g=c.data)!=null&&g.ok?(h({profile:c.data.profile,score:c.data.score}),n&&n({...t,enrichment_status:"enriched",enrichment_data:c.data})):u(((v=c.data)==null?void 0:v.error)||"Enrichment failed")}catch(c){console.error("Enrichment error:",c),u("Enrichment failed: "+c.message)}}};return s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-4",children:e.jsx(he,{className:"mx-auto h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Insights Available"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:"Save this company to unlock AI-powered insights including trade patterns, commodities analysis, and business intelligence."}),e.jsxs(_,{onClick:a,disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:[i&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Company to Unlock"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Business Intelligence"}),e.jsxs(_,{onClick:x,disabled:d,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800",children:[d&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(he,{className:"w-4 h-4 mr-2"}),d?"Enriching...":"Enrich Now"]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:m})}),p?e.jsxs("div",{className:"space-y-6",children:[p.score&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5 text-green-600"}),"Business Score"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:p.score.overall||"N/A"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Overall business activity score based on trade patterns and volume"})})]})})]}),p.profile&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.profile.top_lanes&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-blue-600"}),"Top Trade Lanes"]})}),e.jsx(D,{className:"space-y-2",children:p.profile.top_lanes.map((g,v)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:g.route}),e.jsxs(O,{variant:"outline",children:[g.volume," shipments"]})]},v))})]}),p.profile.top_commodities&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-purple-600"}),"Top Commodities"]})}),e.jsx(D,{className:"space-y-2",children:p.profile.top_commodities.map((g,v)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:g.name}),e.jsxs(O,{variant:"outline",children:[g.percentage,"%"]})]},v))})]}),p.profile.top_carriers&&e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-orange-600"}),"Preferred Carriers"]})}),e.jsx(D,{className:"space-y-2",children:p.profile.top_carriers.map((g,v)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:g.name}),e.jsxs(O,{variant:"outline",children:[g.share,"%"]})]},v))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate AI Insights"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:'Click "Enrich Now" to generate comprehensive business intelligence using AI analysis of trade patterns.'})]})]})}function Ls({notes:t,onAddNote:n,isLoading:r}){const[s,a]=o.useState(""),i=()=>{s.trim()&&(n(s),a(""))};return r?e.jsx("div",{className:"text-center",children:"Loading notes..."}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notes & Activity Log"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(Mr,{placeholder:"Add a note about this company...",value:s,onChange:l=>a(l.target.value),className:"mb-2"}),e.jsxs(_,{onClick:i,size:"sm",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Add Note"]})]}),e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(l=>e.jsx(k,{className:"bg-gray-50",children:e.jsxs(D,{className:"p-4",children:[e.jsx("p",{className:"text-sm",children:l.content}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex justify-between",children:[e.jsxs("span",{children:["by ",l.created_by.split("@")[0]]}),e.jsx("span",{children:_e(new Date(l.created_date),"MMM dd, yyyy HH:mm")})]})]})},l.id)):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"No notes yet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add a note to keep track of your interactions."})]})})]})}export{Sr as B,Rr as C,Os as E,Ls as N,Ds as O,he as S,Je as T,Es as a,Ts as b};
