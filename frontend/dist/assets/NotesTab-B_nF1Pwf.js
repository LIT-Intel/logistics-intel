import{c as R,j as e,r as o,C,d as D,e as E,a as Ke,b as k,W as Jt,X as Zt,B as w,z as X,K as Qt,Y as Ue,y as T,S as er,M as tr,T as rr}from"./main-BwGWMDCi.js";import{B as P}from"./badge-u5ZeETXz.js";import{f as ae}from"./format-DIePDvv_.js";import{T as he,P as Be}from"./truck-BzQ1-Eds.js";import{S as L}from"./ship-CzOlKfq2.js";import{S as fe,b as ge,d as ve,e as je,f as S,i as ze,j as nr,A as sr,P as ar,h as or,g as ir,R as cr,F as lr,D as dr,k as ur,l as mr,C as xr}from"./select-BVIETwTL.js";import{I as q}from"./input-Dw7a9WQL.js";import{L as B}from"./label-B_k9YyLN.js";import{Contact as Oe}from"./entities-CnsKiLH-.js";import{c as Ve,a as pr,g as qe,d as hr,b as N,P as z,h as fr,u as gr,e as Le}from"./index-v5Hq-Jwm.js";import{P as oe}from"./index-B1OJoX7J.js";import{d as He,I as vr,R as jr}from"./tabs-CUfPoQKT.js";import{toggleCompanySave as Fe,phantombusterLinkedIn as Nr,enrichCompany as wr}from"./functions-DLmuSLgl.js";import{L as Ne}from"./loader-circle-C-mQTauK.js";import{P as We}from"./plus-ZQB9w3xX.js";import{L as yr,T as br}from"./textarea-BtZvDFSN.js";import{U as Ye}from"./users-rmwcVKVM.js";import{M as Mr}from"./message-square-DIcLcI0k.js";import{T as Cr}from"./trash-2-BRf9Ug2A.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Sr=R("Bookmark",_r);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rr=R("ChevronRight",kr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dr=R("Circle",Ir);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Pr=R("EllipsisVertical",Er);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Tr=R("Filter",Ar);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],$e=R("Linkedin",Or);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fr=R("Phone",Lr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],pe=R("Sparkles",$r);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kr=R("SquarePen",Gr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],Xe=R("TramFront",Ur);function Is({company:t,isLoading:n}){if(!n&&!t)return e.jsx("div",{className:"text-center py-8 text-gray-600",children:"No overview data available for this company."});const r=o.useMemo(()=>t?{totalShipments:t.shipments_12m||0,topRoute:t.top_route||"N/A",topCarriers:t.top_carriers||[],modeBreakdown:t.mode_breakdown||[]}:null,[t]),s=a=>({ocean:L,air:Be,truck:he,rail:Xe,unknown:L})[a]||L;return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(C,{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white",children:[e.jsx(D,{children:e.jsxs(E,{className:"text-lg flex items-center gap-2 text-white",children:[e.jsx(Ke,{className:"w-5 h-5 text-white"}),"Company Details"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Industry:"}),e.jsx("p",{className:"font-medium text-white",children:t.industry||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Headquarters:"}),e.jsx("p",{className:"font-medium text-white",children:[t.hq_city,t.hq_country].filter(Boolean).join(", ")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Domain:"}),e.jsx("p",{className:"font-medium text-white",children:t.domain?e.jsx("a",{href:`https://${String(t.domain).replace(/^https?:\/\//,"")}`,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-blue-300 hover:underline",children:t.domain}):"Not specified"})]}),t.employee_count&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-200",children:"Employees:"}),e.jsx("p",{className:"font-medium text-white",children:t.employee_count.toLocaleString()})]})]})]}),e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Trade Activity Overview"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Shipments (12m):"}),e.jsx("p",{className:"font-bold text-purple-700 text-lg",children:((r==null?void 0:r.totalShipments)||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Top Route:"}),e.jsx("p",{className:"font-medium",children:r==null?void 0:r.topRoute})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Seen:"}),e.jsx("p",{className:"font-medium",children:t.last_seen?ae(new Date(t.last_seen),"MMM d, yyyy"):"No recent activity"})]})]})]})]}),r&&e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Primary Carriers"]})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:r.topCarriers.length>0?r.topCarriers.map((a,c)=>e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a})},c)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No carrier data available"})})})]})}),r&&r.modeBreakdown.length>0&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsx(E,{className:"text-lg",children:"Transportation Modes"})}),e.jsx(k,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.modeBreakdown.map(a=>{const c=s(a.mode),l=r.totalShipments,u=l>0?(a.cnt/l*100).toFixed(1):0;return e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(c,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-semibold capitalize text-gray-900",children:a.mode}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.cnt," shipments (",u,"%)"]})]},a.mode)})})})]}),t.top_hs&&t.top_hs.length>0&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Top Commodities (HS Codes)"]})}),e.jsx(k,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.top_hs.slice(0,10).map((a,c)=>e.jsx(P,{variant:"outline",className:"text-xs",children:a},c))})})]})]})}function Ds({shipments:t,isLoading:n}){const[r,s]=o.useState("date"),[a,c]=o.useState("desc"),[l,u]=o.useState("all"),x=i=>i==null?"N/A":i>=1e6?`${(i/1e6).toFixed(1)}M kg`:i>=1e3?`${(i/1e3).toFixed(0)}K kg`:`${i.toFixed(0)} kg`,p=o.useMemo(()=>{let i=t;return l!=="all"&&(i=t.filter(f=>{var g;return((g=f.mode)==null?void 0:g.toLowerCase())===l})),Array.isArray(i)||(i=[]),[...i].sort((f,g)=>{let h=f[r],j=g[r];return h==null&&(h=""),j==null&&(j=""),r==="date"?(h=h?new Date(h):new Date(0),j=j?new Date(j):new Date(0)):r==="gross_weight_kg"&&(h=h||0,j=j||0),a==="asc"?typeof h=="string"&&typeof j=="string"?h.localeCompare(j):h>j?1:-1:typeof h=="string"&&typeof j=="string"?j.localeCompare(h):h<j?1:-1})},[t,r,a,l]),m=i=>{const g={ocean:L,air:Be,truck:he,rail:Xe}[i==null?void 0:i.toLowerCase()]||L;return e.jsx(g,{className:"w-4 h-4"})},d=i=>({ocean:"bg-blue-100 text-blue-800",air:"bg-purple-100 text-purple-800",truck:"bg-green-100 text-green-800",rail:"bg-orange-100 text-orange-800"})[i==null?void 0:i.toLowerCase()]||"bg-gray-100 text-gray-800";return n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):!t||t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No shipment data"}),e.jsx("p",{className:"text-gray-500",children:"No shipment records found for this company"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4 text-gray-500"}),e.jsxs(fe,{value:l,onValueChange:u,children:[e.jsx(ge,{className:"w-32",children:e.jsx(ve,{placeholder:"All Modes"})}),e.jsxs(je,{children:[e.jsx(S,{value:"all",children:"All Modes"}),e.jsx(S,{value:"ocean",children:"Ocean"}),e.jsx(S,{value:"air",children:"Air"}),e.jsx(S,{value:"truck",children:"Truck"}),e.jsx(S,{value:"rail",children:"Rail"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs(fe,{value:r,onValueChange:s,children:[e.jsx(ge,{className:"w-32",children:e.jsx(ve,{placeholder:"Date"})}),e.jsxs(je,{children:[e.jsx(S,{value:"date",children:"Date"}),e.jsx(S,{value:"gross_weight_kg",children:"Weight"}),e.jsx(S,{value:"carrier_name",children:"Carrier"}),e.jsx(S,{value:"origin_country",children:"Origin"})]})]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>c(a==="asc"?"desc":"asc"),children:a==="asc"?"↑":"↓"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[p.length," of ",t.length," shipments"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Mode"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Route"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Carrier"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Commodity"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.slice(0,50).map((i,f)=>e.jsxs("tr",{className:`${f%2===1?"bg-gray-50":"bg-white"} hover:bg-gray-100`,children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:i.date?ae(new Date(i.date),"MMM d, yyyy"):"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[m(i.mode),e.jsx(P,{className:`text-xs ${d(i.mode)}`,children:i.mode||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-xs overflow-hidden",children:[e.jsx("div",{className:"font-medium truncate",children:i.origin_country||i.origin_port||"Unknown"}),e.jsxs("div",{className:"text-gray-500 text-xs truncate",children:["→ ",i.dest_country||i.dest_port||"Unknown"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-blue-700 whitespace-nowrap",children:x(i.gross_weight_kg)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",children:i.carrier_name||i.carrier||"Unknown"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsx("div",{className:"max-w-xs truncate",children:i.commodity_description||i.hs_code||"N/A"})})]},i.id||f))})]})}),p.length>50&&e.jsx("div",{className:"bg-gray-50 px-4 py-3 text-center border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing first 50 shipments. ",p.length-50," more available."]})})]})]})}function Br({onSubmit:t,onCancel:n}){const[r,s]=o.useState({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""}),a=l=>{if(l.preventDefault(),!r.full_name.trim()){alert("Full name is required");return}t(r),s({full_name:"",title:"",dept:"",email:"",phone:"",linkedin:""})},c=["Logistics","Supply Chain","Procurement","Operations","Sales","Marketing","Finance","Executive","Other"];return e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Full Name (Required)"}),e.jsx(q,{value:r.full_name,onChange:l=>s(u=>({...u,full_name:l.target.value})),placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Job Title"}),e.jsx(q,{value:r.title,onChange:l=>s(u=>({...u,title:l.target.value})),placeholder:"e.g., Logistics Manager"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Department"}),e.jsxs(fe,{value:r.dept,onValueChange:l=>s(u=>({...u,dept:l})),children:[e.jsx(ge,{children:e.jsx(ve,{placeholder:"Select department"})}),e.jsx(je,{children:c.map(l=>e.jsx(S,{value:l,children:l},l))})]})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Email Address"}),e.jsx(q,{type:"email",value:r.email,onChange:l=>s(u=>({...u,email:l.target.value})),placeholder:"contact@company.com"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{children:"Phone Number"}),e.jsx(q,{value:r.phone,onChange:l=>s(u=>({...u,phone:l.target.value})),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(B,{children:"LinkedIn Profile URL"}),e.jsx(q,{value:r.linkedin,onChange:l=>s(u=>({...u,linkedin:l.target.value})),placeholder:"https://linkedin.com/in/profile"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(w,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),e.jsx(w,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Save Contact"})]})]})}var we=["Enter"," "],zr=["ArrowDown","PageUp","Home"],Je=["ArrowUp","PageDown","End"],Vr=[...zr,...Je],qr={ltr:[...we,"ArrowRight"],rtl:[...we,"ArrowLeft"]},Hr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[W,Wr,Yr]=pr(J),[F,Ze]=Ve(J,[Yr,ze,He]),ie=ze(),Qe=He(),[Xr,$]=F(J),[Jr,Z]=F(J),et=t=>{const{__scopeMenu:n,open:r=!1,children:s,dir:a,onOpenChange:c,modal:l=!0}=t,u=ie(n),[x,p]=o.useState(null),m=o.useRef(!1),d=qe(c),i=hr(a);return o.useEffect(()=>{const f=()=>{m.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>m.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(nr,{...u,children:e.jsx(Xr,{scope:n,open:r,onOpenChange:d,content:x,onContentChange:p,children:e.jsx(Jr,{scope:n,onClose:o.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:m,dir:i,modal:l,children:s})})})};et.displayName=J;var Zr="MenuAnchor",be=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ie(r);return e.jsx(sr,{...a,...s,ref:n})});be.displayName=Zr;var Me="MenuPortal",[Qr,tt]=F(Me,{forceMount:void 0}),rt=t=>{const{__scopeMenu:n,forceMount:r,children:s,container:a}=t,c=$(Me,n);return e.jsx(Qr,{scope:n,forceMount:r,children:e.jsx(oe,{present:r||c.open,children:e.jsx(ar,{asChild:!0,container:a,children:s})})})};rt.displayName=Me;var M="MenuContent",[en,Ce]=F(M),nt=o.forwardRef((t,n)=>{const r=tt(M,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,c=$(M,t.__scopeMenu),l=Z(M,t.__scopeMenu);return e.jsx(W.Provider,{scope:t.__scopeMenu,children:e.jsx(oe,{present:s||c.open,children:e.jsx(W.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(tn,{...a,ref:n}):e.jsx(rn,{...a,ref:n})})})})}),tn=o.forwardRef((t,n)=>{const r=$(M,t.__scopeMenu),s=o.useRef(null),a=X(n,s);return o.useEffect(()=>{const c=s.current;if(c)return or(c)},[]),e.jsx(_e,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:N(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),rn=o.forwardRef((t,n)=>{const r=$(M,t.__scopeMenu);return e.jsx(_e,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nn=Qt("MenuContent.ScrollLock"),_e=o.forwardRef((t,n)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:x,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:i,onDismiss:f,disableOutsideScroll:g,...h}=t,j=$(M,r),O=Z(M,r),G=ie(r),Q=Qe(r),Ie=Wr(r),[Vt,De]=o.useState(null),ee=o.useRef(null),qt=X(n,ee,j.onContentChange),te=o.useRef(0),re=o.useRef(""),Ht=o.useRef(0),de=o.useRef(null),Ee=o.useRef("right"),ue=o.useRef(0),Wt=g?cr:o.Fragment,Yt=g?{as:nn,allowPinchZoom:!0}:void 0,Xt=v=>{var U,Ae;const b=re.current+v,_=Ie().filter(I=>!I.disabled),A=document.activeElement,me=(U=_.find(I=>I.ref.current===A))==null?void 0:U.textValue,xe=_.map(I=>I.textValue),Pe=fn(xe,b,me),V=(Ae=_.find(I=>I.textValue===Pe))==null?void 0:Ae.ref.current;(function I(Te){re.current=Te,window.clearTimeout(te.current),Te!==""&&(te.current=window.setTimeout(()=>I(""),1e3))})(b),V&&setTimeout(()=>V.focus())};o.useEffect(()=>()=>window.clearTimeout(te.current),[]),ir();const K=o.useCallback(v=>{var _,A;return Ee.current===((_=de.current)==null?void 0:_.side)&&vn(v,(A=de.current)==null?void 0:A.area)},[]);return e.jsx(en,{scope:r,searchRef:re,onItemEnter:o.useCallback(v=>{K(v)&&v.preventDefault()},[K]),onItemLeave:o.useCallback(v=>{var b;K(v)||((b=ee.current)==null||b.focus(),De(null))},[K]),onTriggerLeave:o.useCallback(v=>{K(v)&&v.preventDefault()},[K]),pointerGraceTimerRef:Ht,onPointerGraceIntentChange:o.useCallback(v=>{de.current=v},[]),children:e.jsx(Wt,{...Yt,children:e.jsx(lr,{asChild:!0,trapped:a,onMountAutoFocus:N(c,v=>{var b;v.preventDefault(),(b=ee.current)==null||b.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(dr,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:i,onDismiss:f,children:e.jsx(jr,{asChild:!0,...Q,dir:O.dir,orientation:"vertical",loop:s,currentTabStopId:Vt,onCurrentTabStopIdChange:De,onEntryFocus:N(x,v=>{O.isUsingKeyboardRef.current||v.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(ur,{role:"menu","aria-orientation":"vertical","data-state":jt(j.open),"data-radix-menu-content":"",dir:O.dir,...G,...h,ref:qt,style:{outline:"none",...h.style},onKeyDown:N(h.onKeyDown,v=>{const _=v.target.closest("[data-radix-menu-content]")===v.currentTarget,A=v.ctrlKey||v.altKey||v.metaKey,me=v.key.length===1;_&&(v.key==="Tab"&&v.preventDefault(),!A&&me&&Xt(v.key));const xe=ee.current;if(v.target!==xe||!Vr.includes(v.key))return;v.preventDefault();const V=Ie().filter(U=>!U.disabled).map(U=>U.ref.current);Je.includes(v.key)&&V.reverse(),pn(V)}),onBlur:N(t.onBlur,v=>{v.currentTarget.contains(v.target)||(window.clearTimeout(te.current),re.current="")}),onPointerMove:N(t.onPointerMove,Y(v=>{const b=v.target,_=ue.current!==v.clientX;if(v.currentTarget.contains(b)&&_){const A=v.clientX>ue.current?"right":"left";Ee.current=A,ue.current=v.clientX}}))})})})})})})});nt.displayName=M;var sn="MenuGroup",Se=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(z.div,{role:"group",...s,ref:n})});Se.displayName=sn;var an="MenuLabel",st=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(z.div,{...s,ref:n})});st.displayName=an;var ne="MenuItem",Ge="menu.itemSelect",ce=o.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:s,...a}=t,c=o.useRef(null),l=Z(ne,t.__scopeMenu),u=Ce(ne,t.__scopeMenu),x=X(n,c),p=o.useRef(!1),m=()=>{const d=c.current;if(!r&&d){const i=new CustomEvent(Ge,{bubbles:!0,cancelable:!0});d.addEventListener(Ge,f=>s==null?void 0:s(f),{once:!0}),fr(d,i),i.defaultPrevented?p.current=!1:l.onClose()}};return e.jsx(at,{...a,ref:x,disabled:r,onClick:N(t.onClick,m),onPointerDown:d=>{var i;(i=t.onPointerDown)==null||i.call(t,d),p.current=!0},onPointerUp:N(t.onPointerUp,d=>{var i;p.current||(i=d.currentTarget)==null||i.click()}),onKeyDown:N(t.onKeyDown,d=>{const i=u.searchRef.current!=="";r||i&&d.key===" "||we.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ce.displayName=ne;var at=o.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...c}=t,l=Ce(ne,r),u=Qe(r),x=o.useRef(null),p=X(n,x),[m,d]=o.useState(!1),[i,f]=o.useState("");return o.useEffect(()=>{const g=x.current;g&&f((g.textContent??"").trim())},[c.children]),e.jsx(W.ItemSlot,{scope:r,disabled:s,textValue:a??i,children:e.jsx(vr,{asChild:!0,...u,focusable:!s,children:e.jsx(z.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...c,ref:p,onPointerMove:N(t.onPointerMove,Y(g=>{s?l.onItemLeave(g):(l.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:N(t.onPointerLeave,Y(g=>l.onItemLeave(g))),onFocus:N(t.onFocus,()=>d(!0)),onBlur:N(t.onBlur,()=>d(!1))})})})}),on="MenuCheckboxItem",ot=o.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:s,...a}=t;return e.jsx(ut,{scope:t.__scopeMenu,checked:r,children:e.jsx(ce,{role:"menuitemcheckbox","aria-checked":se(r)?"mixed":r,...a,ref:n,"data-state":Re(r),onSelect:N(a.onSelect,()=>s==null?void 0:s(se(r)?!0:!r),{checkForDefaultPrevented:!1})})})});ot.displayName=on;var it="MenuRadioGroup",[cn,ln]=F(it,{value:void 0,onValueChange:()=>{}}),ct=o.forwardRef((t,n)=>{const{value:r,onValueChange:s,...a}=t,c=qe(s);return e.jsx(cn,{scope:t.__scopeMenu,value:r,onValueChange:c,children:e.jsx(Se,{...a,ref:n})})});ct.displayName=it;var lt="MenuRadioItem",dt=o.forwardRef((t,n)=>{const{value:r,...s}=t,a=ln(lt,t.__scopeMenu),c=r===a.value;return e.jsx(ut,{scope:t.__scopeMenu,checked:c,children:e.jsx(ce,{role:"menuitemradio","aria-checked":c,...s,ref:n,"data-state":Re(c),onSelect:N(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,r)},{checkForDefaultPrevented:!1})})})});dt.displayName=lt;var ke="MenuItemIndicator",[ut,dn]=F(ke,{checked:!1}),mt=o.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:s,...a}=t,c=dn(ke,r);return e.jsx(oe,{present:s||se(c.checked)||c.checked===!0,children:e.jsx(z.span,{...a,ref:n,"data-state":Re(c.checked)})})});mt.displayName=ke;var un="MenuSeparator",xt=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t;return e.jsx(z.div,{role:"separator","aria-orientation":"horizontal",...s,ref:n})});xt.displayName=un;var mn="MenuArrow",pt=o.forwardRef((t,n)=>{const{__scopeMenu:r,...s}=t,a=ie(r);return e.jsx(mr,{...a,...s,ref:n})});pt.displayName=mn;var xn="MenuSub",[Es,ht]=F(xn),H="MenuSubTrigger",ft=o.forwardRef((t,n)=>{const r=$(H,t.__scopeMenu),s=Z(H,t.__scopeMenu),a=ht(H,t.__scopeMenu),c=Ce(H,t.__scopeMenu),l=o.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:x}=c,p={__scopeMenu:t.__scopeMenu},m=o.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return o.useEffect(()=>m,[m]),o.useEffect(()=>{const d=u.current;return()=>{window.clearTimeout(d),x(null)}},[u,x]),e.jsx(be,{asChild:!0,...p,children:e.jsx(at,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":jt(r.open),...t,ref:Ue(n,a.onTriggerChange),onClick:d=>{var i;(i=t.onClick)==null||i.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:N(t.onPointerMove,Y(d=>{c.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(c.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:N(t.onPointerLeave,Y(d=>{var f,g;m();const i=(f=r.content)==null?void 0:f.getBoundingClientRect();if(i){const h=(g=r.content)==null?void 0:g.dataset.side,j=h==="right",O=j?-5:5,G=i[j?"left":"right"],Q=i[j?"right":"left"];c.onPointerGraceIntentChange({area:[{x:d.clientX+O,y:d.clientY},{x:G,y:i.top},{x:Q,y:i.top},{x:Q,y:i.bottom},{x:G,y:i.bottom}],side:h}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(d),d.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:N(t.onKeyDown,d=>{var f;const i=c.searchRef.current!=="";t.disabled||i&&d.key===" "||qr[s.dir].includes(d.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),d.preventDefault())})})})});ft.displayName=H;var gt="MenuSubContent",vt=o.forwardRef((t,n)=>{const r=tt(M,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,c=$(M,t.__scopeMenu),l=Z(M,t.__scopeMenu),u=ht(gt,t.__scopeMenu),x=o.useRef(null),p=X(n,x);return e.jsx(W.Provider,{scope:t.__scopeMenu,children:e.jsx(oe,{present:s||c.open,children:e.jsx(W.Slot,{scope:t.__scopeMenu,children:e.jsx(_e,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var d;l.isUsingKeyboardRef.current&&((d=x.current)==null||d.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:N(t.onFocusOutside,m=>{m.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:N(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:N(t.onKeyDown,m=>{var f;const d=m.currentTarget.contains(m.target),i=Hr[l.dir].includes(m.key);d&&i&&(c.onOpenChange(!1),(f=u.trigger)==null||f.focus(),m.preventDefault())})})})})})});vt.displayName=gt;function jt(t){return t?"open":"closed"}function se(t){return t==="indeterminate"}function Re(t){return se(t)?"indeterminate":t?"checked":"unchecked"}function pn(t){const n=document.activeElement;for(const r of t)if(r===n||(r.focus(),document.activeElement!==n))return}function hn(t,n){return t.map((r,s)=>t[(n+s)%t.length])}function fn(t,n,r){const a=n.length>1&&Array.from(n).every(p=>p===n[0])?n[0]:n,c=r?t.indexOf(r):-1;let l=hn(t,Math.max(c,0));a.length===1&&(l=l.filter(p=>p!==r));const x=l.find(p=>p.toLowerCase().startsWith(a.toLowerCase()));return x!==r?x:void 0}function gn(t,n){const{x:r,y:s}=t;let a=!1;for(let c=0,l=n.length-1;c<n.length;l=c++){const u=n[c],x=n[l],p=u.x,m=u.y,d=x.x,i=x.y;m>s!=i>s&&r<(d-p)*(s-m)/(i-m)+p&&(a=!a)}return a}function vn(t,n){if(!n)return!1;const r={x:t.clientX,y:t.clientY};return gn(r,n)}function Y(t){return n=>n.pointerType==="mouse"?t(n):void 0}var jn=et,Nn=be,wn=rt,yn=nt,bn=Se,Mn=st,Cn=ce,_n=ot,Sn=ct,kn=dt,Rn=mt,In=xt,Dn=pt,En=ft,Pn=vt,le="DropdownMenu",[An,Ps]=Ve(le,[Ze]),y=Ze(),[Tn,Nt]=An(le),wt=t=>{const{__scopeDropdownMenu:n,children:r,dir:s,open:a,defaultOpen:c,onOpenChange:l,modal:u=!0}=t,x=y(n),p=o.useRef(null),[m,d]=gr({prop:a,defaultProp:c??!1,onChange:l,caller:le});return e.jsx(Tn,{scope:n,triggerId:Le(),triggerRef:p,contentId:Le(),open:m,onOpenChange:d,onOpenToggle:o.useCallback(()=>d(i=>!i),[d]),modal:u,children:e.jsx(jn,{...x,open:m,onOpenChange:d,dir:s,modal:u,children:r})})};wt.displayName=le;var yt="DropdownMenuTrigger",bt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=t,c=Nt(yt,r),l=y(r);return e.jsx(Nn,{asChild:!0,...l,children:e.jsx(z.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Ue(n,c.triggerRef),onPointerDown:N(t.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(c.onOpenToggle(),c.open||u.preventDefault())}),onKeyDown:N(t.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&c.onOpenToggle(),u.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});bt.displayName=yt;var On="DropdownMenuPortal",Mt=t=>{const{__scopeDropdownMenu:n,...r}=t,s=y(n);return e.jsx(wn,{...s,...r})};Mt.displayName=On;var Ct="DropdownMenuContent",_t=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=Nt(Ct,r),c=y(r),l=o.useRef(!1);return e.jsx(yn,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...s,ref:n,onCloseAutoFocus:N(t.onCloseAutoFocus,u=>{var x;l.current||(x=a.triggerRef.current)==null||x.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:N(t.onInteractOutside,u=>{const x=u.detail.originalEvent,p=x.button===0&&x.ctrlKey===!0,m=x.button===2||p;(!a.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_t.displayName=Ct;var Ln="DropdownMenuGroup",Fn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(bn,{...a,...s,ref:n})});Fn.displayName=Ln;var $n="DropdownMenuLabel",St=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Mn,{...a,...s,ref:n})});St.displayName=$n;var Gn="DropdownMenuItem",kt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Cn,{...a,...s,ref:n})});kt.displayName=Gn;var Kn="DropdownMenuCheckboxItem",Rt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(_n,{...a,...s,ref:n})});Rt.displayName=Kn;var Un="DropdownMenuRadioGroup",Bn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Sn,{...a,...s,ref:n})});Bn.displayName=Un;var zn="DropdownMenuRadioItem",It=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(kn,{...a,...s,ref:n})});It.displayName=zn;var Vn="DropdownMenuItemIndicator",Dt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Rn,{...a,...s,ref:n})});Dt.displayName=Vn;var qn="DropdownMenuSeparator",Et=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(In,{...a,...s,ref:n})});Et.displayName=qn;var Hn="DropdownMenuArrow",Wn=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Dn,{...a,...s,ref:n})});Wn.displayName=Hn;var Yn="DropdownMenuSubTrigger",Pt=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(En,{...a,...s,ref:n})});Pt.displayName=Yn;var Xn="DropdownMenuSubContent",At=o.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...s}=t,a=y(r);return e.jsx(Pn,{...a,...s,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});At.displayName=Xn;var Jn=wt,Zn=bt,Qn=Mt,Tt=_t,Ot=St,Lt=kt,Ft=Rt,$t=It,Gt=Dt,Kt=Et,Ut=Pt,Bt=At;const es=Jn,ts=Zn,rs=o.forwardRef(({className:t,inset:n,children:r,...s},a)=>e.jsxs(Ut,{ref:a,className:T("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...s,children:[r,e.jsx(Rr,{className:"ml-auto"})]}));rs.displayName=Ut.displayName;const ns=o.forwardRef(({className:t,...n},r)=>e.jsx(Bt,{ref:r,className:T("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ns.displayName=Bt.displayName;const zt=o.forwardRef(({className:t,sideOffset:n=4,...r},s)=>e.jsx(Qn,{children:e.jsx(Tt,{ref:s,sideOffset:n,className:T("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));zt.displayName=Tt.displayName;const ye=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Lt,{ref:s,className:T("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r}));ye.displayName=Lt.displayName;const ss=o.forwardRef(({className:t,children:n,checked:r,...s},a)=>e.jsxs(Ft,{ref:a,className:T("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gt,{children:e.jsx(xr,{className:"h-4 w-4"})})}),n]}));ss.displayName=Ft.displayName;const as=o.forwardRef(({className:t,children:n,...r},s)=>e.jsxs($t,{ref:s,className:T("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gt,{children:e.jsx(Dr,{className:"h-2 w-2 fill-current"})})}),n]}));as.displayName=$t.displayName;const os=o.forwardRef(({className:t,inset:n,...r},s)=>e.jsx(Ot,{ref:s,className:T("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));os.displayName=Ot.displayName;const is=o.forwardRef(({className:t,...n},r)=>e.jsx(Kt,{ref:r,className:T("-mx-1 my-1 h-px bg-muted",t),...n}));is.displayName=Kt.displayName;const cs=t=>{switch(t==null?void 0:t.toLowerCase()){case"linkedin":return"bg-blue-100 text-blue-800";case"email":return"bg-yellow-100 text-yellow-800";case"referral":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ls=t=>{switch(t==null?void 0:t.toLowerCase()){case"responded":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_contacted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ds=({contact:t,onRefresh:n,onEdit:r})=>{var u,x;const[s,a]=o.useState({}),c=async p=>{confirm("Are you sure you want to delete this contact?")&&(await Oe.delete(p),n())},l=async(p,m)=>{var i,f,g;if(!p.linkedin){alert("No LinkedIn profile available for this contact.");return}const d=`${p.id}_${m}`;a({...s,[d]:!0});try{const h=m==="connect"?`Hi ${((i=p.full_name)==null?void 0:i.split(" ")[0])||""}, I'd like to connect and share some insights about your industry.`:`Hi ${((f=p.full_name)==null?void 0:f.split(" ")[0])||""}, I have some valuable market intelligence that might interest your team. Would you be open to a quick conversation?`,j=await Nr({action:m,profile_url:p.linkedin,message:h,contactId:p.id});if(j.status===200)alert(`LinkedIn ${m} initiated for ${p.full_name}.`),await Oe.update(p.id,{last_contacted:new Date().toISOString()}),n();else throw new Error(((g=j.data)==null?void 0:g.error)||`LinkedIn ${m} failed`)}catch(h){console.error(`LinkedIn ${m} error:`,h),alert(`Failed to ${m} ${p.full_name}. ${h.message}`)}finally{a({...s,[d]:!1})}};return e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:((u=t.full_name)==null?void 0:u.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.title}),t.dept&&e.jsx("p",{className:"text-sm text-gray-500",children:t.dept}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[t.email&&e.jsxs("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(tr,{className:"w-4 h-4"}),t.email]}),t.phone&&e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),t.phone]}),t.linkedin&&e.jsxs("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx($e,{className:"w-4 h-4"}),"LinkedIn"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.linkedin&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{size:"sm",variant:"outline",onClick:()=>l(t,"connect"),disabled:s[`${t.id}_connect`],className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:s[`${t.id}_connect`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-4 h-4 mr-1"}),"Connect"]})}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>l(t,"message"),disabled:s[`${t.id}_message`],className:"text-green-600 border-green-200 hover:bg-green-50",children:s[`${t.id}_message`]?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"w-4 h-4 mr-1"}),"Message"]})})]}),e.jsxs(es,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",children:e.jsx(Pr,{className:"w-4 h-4"})})}),e.jsxs(zt,{children:[e.jsxs(ye,{onClick:r,children:[" ",e.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Edit Contact"]}),e.jsxs(ye,{onClick:()=>c(t.id),className:"text-red-600",children:[e.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Delete Contact"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.verified&&e.jsx(P,{className:"bg-green-100 text-green-800",children:"Verified"}),t.source&&e.jsx(P,{className:`${cs(t.source)}`,children:t.source}),t.response_status&&e.jsx(P,{className:`${ls(t.response_status)}`,children:(x=t.response_status)==null?void 0:x.replace("_"," ")}),t.last_contacted&&e.jsxs(P,{variant:"outline",children:["Contacted ",ae(new Date(t.last_contacted),"MMM dd")]})]})]})};function As({company:t,contacts:n,onAddContact:r,onFindContacts:s,isLoadingContacts:a,onRefresh:c,user:l}){const[u,x]=o.useState(!1),[p,m]=o.useState(null),[d,i]=o.useState(!1);o.useEffect(()=>{t&&l?(async()=>{try{const{data:j}=await Fe({list:!0}),O=new Set(j.map(G=>G.company_id));i(O.has(t.company_id||t.id))}catch(j){console.error("Error checking save status:",j),i(!1)}})():i(!1)},[t,l]);const f=async()=>{try{await Fe({companyId:t.company_id||t.id}),i(!0),m(null),x(!0)}catch(h){console.error("Error saving company:",h),alert("Failed to save company.")}},g=h=>{m(h),x(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Contacts (",(n==null?void 0:n.length)||0,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",onClick:s,disabled:a||!d,className:"flex items-center gap-2",children:[a?e.jsx(Ne,{className:"w-4 h-4 animate-spin"}):e.jsx(er,{className:"w-4 h-4"}),"Find Contacts"]}),d?e.jsxs(w,{onClick:()=>{m(null),x(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(We,{className:"w-4 h-4"}),"Add Contact"]}):e.jsxs(w,{onClick:f,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4"}),"Save Company to Add Contacts"]})]})]}),!d&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-800",children:"Save Company Required"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You need to save this company to your CRM before adding or managing contacts. This helps organize your prospects and enables campaign features."})]})]}),e.jsx(w,{onClick:f,className:"mt-3 bg-amber-600 hover:bg-amber-700 text-white",children:"Save Company & Add Contacts"})]}),u&&e.jsx(Br,{company:t,contact:p,onSave:h=>{r(h),x(!1),m(null)},onCancel:()=>{x(!1),m(null)}}),n&&n.length>0?e.jsx("div",{className:"grid gap-4",children:n.map(h=>e.jsx(ds,{contact:h,onRefresh:c,onEdit:()=>g(h)},h.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-sm mb-4",children:"Start building your prospect database by finding or adding contacts"}),d&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(w,{variant:"outline",onClick:s,disabled:a,children:"Find Contacts"}),e.jsx(w,{onClick:()=>{m(null),x(!0)},children:"Add Contact Manually"})]})]})]})}function Ts({company:t,onCompanyUpdate:n,user:r,isGated:s,onUnlock:a,isLoading:c,onEnrich:l,isEnriching:u}){const[x,p]=o.useState(null),[m,d]=o.useState(null),i=async()=>{var f,g;if(t!=null&&t.id){d(null);try{const h=await wr({company_id:t.id});(f=h.data)!=null&&f.ok?(p({profile:h.data.profile,score:h.data.score}),n&&n({...t,enrichment_status:"enriched",enrichment_data:h.data})):d(((g=h.data)==null?void 0:g.error)||"Enrichment failed")}catch(h){console.error("Enrichment error:",h),d("Enrichment failed: "+h.message)}}};return s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-4",children:e.jsx(pe,{className:"mx-auto h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Insights Available"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:"Save this company to unlock AI-powered insights including trade patterns, commodities analysis, and business intelligence."}),e.jsxs(w,{onClick:a,disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:[c&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Company to Unlock"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Powered Business Intelligence"}),e.jsxs(w,{onClick:i,disabled:u,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800",children:[u&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(pe,{className:"w-4 h-4 mr-2"}),u?"Enriching...":"Enrich Now"]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:m})}),x?e.jsxs("div",{className:"space-y-6",children:[x.score&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5 text-green-600"}),"Business Score"]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:x.score.overall||"N/A"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Overall business activity score based on trade patterns and volume"})})]})})]}),x.profile&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[x.profile.top_lanes&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-blue-600"}),"Top Trade Lanes"]})}),e.jsx(k,{className:"space-y-2",children:x.profile.top_lanes.map((f,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:f.route}),e.jsxs(P,{variant:"outline",children:[f.volume," shipments"]})]},g))})]}),x.profile.top_commodities&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-purple-600"}),"Top Commodities"]})}),e.jsx(k,{className:"space-y-2",children:x.profile.top_commodities.map((f,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:f.name}),e.jsxs(P,{variant:"outline",children:[f.percentage,"%"]})]},g))})]}),x.profile.top_carriers&&e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),"Preferred Carriers"]})}),e.jsx(k,{className:"space-y-2",children:x.profile.top_carriers.map((f,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:f.name}),e.jsxs(P,{variant:"outline",children:[f.share,"%"]})]},g))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate AI Insights"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm mx-auto",children:'Click "Enrich Now" to generate comprehensive business intelligence using AI analysis of trade patterns.'})]})]})}function Os({notes:t,onAddNote:n,isLoading:r}){const[s,a]=o.useState(""),c=()=>{s.trim()&&(n(s),a(""))};return r?e.jsx("div",{className:"text-center",children:"Loading notes..."}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notes & Activity Log"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(br,{placeholder:"Add a note about this company...",value:s,onChange:l=>a(l.target.value),className:"mb-2"}),e.jsxs(w,{onClick:c,size:"sm",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Add Note"]})]}),e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(l=>e.jsx(C,{className:"bg-gray-50",children:e.jsxs(k,{className:"p-4",children:[e.jsx("p",{className:"text-sm",children:l.content}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 flex justify-between",children:[e.jsxs("span",{children:["by ",l.created_by.split("@")[0]]}),e.jsx("span",{children:ae(new Date(l.created_date),"MMM dd, yyyy HH:mm")})]})]})},l.id)):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"No notes yet."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add a note to keep track of your interactions."})]})})]})}export{Sr as B,Rr as C,es as D,Pr as E,Os as N,Is as O,pe as S,Xe as T,ts as a,zt as b,ye as c,is as d,Ds as e,As as f,Ts as g};
