import{r as a,j as s}from"./main-BcRfT4pF.js";import{getFilterOptions as N,postSearchCompanies as S}from"./api-DJUQIUvv.js";function C(){const[c,p]=a.useState(""),[l,h]=a.useState("all"),[i,r]=a.useState(!1),[u,n]=a.useState(null),[x,g]=a.useState(null),[m,f]=a.useState(null),[o,j]=a.useState(""),t=a.useMemo(()=>o?o.split(/[, \n\t]+/).map(e=>e.replace(/\D/g,"")).filter(e=>e.length>=2):[],[o]);async function y(){try{n(null),r(!0);const e=await N({});g(e)}catch(e){n((e==null?void 0:e.message)||"Failed to load filters")}finally{r(!1)}}async function v(){try{n(null),r(!0);const e={...c?{q:c}:{},...l&&l!=="all"?{mode:l==="air"?"AIR":"OCEAN"}:{},...t.length?{hs:t}:{},limit:10,offset:0},d=await S(e);f((d==null?void 0:d.items)||[])}catch(e){n((e==null?void 0:e.message)||"Search failed")}finally{r(!1)}}return s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{className:"border rounded px-3 py-2 w-64",placeholder:"Search companies…",value:c,onChange:e=>p(e.target.value)}),s.jsxs("select",{className:"border rounded px-3 py-2",value:l,onChange:e=>h(e.target.value),children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"ocean",children:"Ocean"}),s.jsx("option",{value:"air",children:"Air"})]}),s.jsx("button",{className:"px-4 py-2 rounded bg-black text-white",onClick:v,disabled:i,children:"Search"}),s.jsx("button",{className:"px-4 py-2 rounded border",onClick:y,disabled:i,children:"Load Filters"})]}),s.jsxs("div",{className:"flex flex-col gap-1 max-w-xl",children:[s.jsx("label",{className:"text-sm font-medium",children:"HS Codes (comma or space separated)"}),s.jsx("input",{className:"border rounded-md px-3 py-2",placeholder:"e.g. 8471, 847130",value:o,onChange:e=>j(e.target.value)}),t.length>0&&s.jsxs("div",{className:"text-xs opacity-70",children:["Sending ",t.length," code(s): ",t.join(", ")]})]}),u&&s.jsx("div",{className:"text-red-600 text-sm",children:u}),i&&s.jsx("div",{className:"text-gray-500 text-sm",children:"Loading…"}),x&&s.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-64",children:JSON.stringify(x,null,2)}),m&&s.jsx("pre",{className:"bg-gray-50 p-3 rounded text-xs overflow-auto max-h-96",children:JSON.stringify(m,null,2)})]})}export{C as default};
