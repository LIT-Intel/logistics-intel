import{j as e,r as t,B as l,C,a as P,b as k,c as S}from"./index-DSsenn9i.js";import{User as Z,CmsPage as E,BlogPost as T,PricingPlan as _,Testimonial as M,Faq as B}from"./entities-BF_CoRhL.js";import{B as r}from"./badge-BwXl-SFC.js";import{T as ee,a as se,b as ae,c as o}from"./tabs-CxBUnjnx.js";import{c as p}from"./createLucideIcon-CuAcwHYo.js";import{F as D}from"./file-text-WRETgjgS.js";import{D as te,S as le}from"./star-ChzKMOdy.js";import{E as ie}from"./eye-CFFODy-6.js";import{P as F}from"./plus-DkhLyrVe.js";import{P as q}from"./pen-line-BQMwt8pv.js";import{T as L}from"./trash-2-ChFT1kec.js";import"./base44Client-C-YMJfZQ.js";import"./index-Cuse3_qE.js";import"./index-DBtobO18.js";import"./index-LCCL6OOB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ce=p("CircleHelp",ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],I=p("PanelsTopLeft",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],de=p("RefreshCw",oe);function me(){return e.jsx("div",{className:"p-4",children:"PageEditor (stub)"})}function xe(){return e.jsx("div",{className:"p-4",children:"BlogEditor (stub)"})}function he(){return e.jsx("div",{className:"p-4",children:"PricingEditor (stub)"})}function ue(){return e.jsx("div",{className:"p-4",children:"TestimonialEditor (stub)"})}function ge(){return e.jsx("div",{className:"p-4",children:"FaqEditor (stub)"})}function Me(){const[j,R]=t.useState(null),[U,z]=t.useState("pages"),[A,h]=t.useState(!0),[u,H]=t.useState([]),[g,$]=t.useState([]),[f,O]=t.useState([]),[N,V]=t.useState([]),[b,W]=t.useState([]),[Q,d]=t.useState(!1),[Y,m]=t.useState(!1),[v,n]=t.useState(null);t.useEffect(()=>{i()},[]);const i=async()=>{h(!0);try{const s=await Z.me();if(R(s),s.role!=="admin"){h(!1);return}const[a,c,J,K,X]=await Promise.all([E.list("-updated_date").catch(()=>[]),T.list("-updated_date").catch(()=>[]),_.list("price_monthly").catch(()=>[]),M.list("-created_date").catch(()=>[]),B.list("category").catch(()=>[])]);H(a),$(c),O(J),V(K),W(X)}catch(s){console.error("Failed to load CMS data:",s)}h(!1)},x=s=>{switch(n(null),s){case"page":d(!0);break;case"blog":m(!0);break}},y=(s,a)=>{switch(n(s),a){case"page":d(!0);break;case"blog":m(!0);break}},w=async(s,a)=>{if(confirm(`Are you sure you want to delete this ${a}?`))try{switch(a){case"page":await E.delete(s.id);break;case"blog":await T.delete(s.id);break;case"plan":await _.delete(s.id);break;case"testimonial":await M.delete(s.id);break;case"faq":await B.delete(s.id);break}await i()}catch(c){console.error(`Failed to delete ${a}:`,c)}};if(A)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!j||j.role!=="admin")return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need admin privileges to access the CMS."})]});const G=[{value:"pages",label:"Pages",icon:I,count:u.length},{value:"blog",label:"Blog Posts",icon:D,count:g.length},{value:"pricing",label:"Pricing",icon:te,count:f.length},{value:"testimonials",label:"Testimonials",icon:le,count:N.length},{value:"faqs",label:"FAQs",icon:ce,count:b.length}];return e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Content Management System"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Manage all website content, pages, and blog posts"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l,{onClick:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(l,{onClick:()=>window.open(window.location.origin,"_blank"),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Preview Site"]})]})]}),e.jsxs(ee,{value:U,onValueChange:z,className:"w-full",children:[e.jsx(se,{className:"grid w-full grid-cols-5 mb-6",children:G.map(s=>{const a=s.icon;return e.jsxs(ae,{value:s.value,className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:s.label}),e.jsx(r,{variant:"secondary",className:"ml-1",children:s.count})]},s.value)})}),e.jsxs(o,{value:"pages",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Website Pages"}),e.jsxs(l,{onClick:()=>x("page"),className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Create Page"]})]}),e.jsxs("div",{className:"grid gap-4",children:[u.map(s=>{var a;return e.jsxs(C,{className:"bg-white/80 backdrop-blur-sm",children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["/",s.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>y(s,"page"),children:e.jsx(q,{className:"w-3 h-3"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>w(s,"page"),children:e.jsx(L,{className:"w-3 h-3"})})]})]})}),e.jsxs(S,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.meta_description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",children:[((a=s.sections)==null?void 0:a.length)||0," sections"]}),e.jsx(r,{variant:s.meta_title?"default":"secondary",children:s.meta_title?"SEO Ready":"Needs SEO"})]})]})]},s.id)}),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pages created yet"}),e.jsx(l,{onClick:()=>x("page"),className:"mt-4",children:"Create First Page"})]})]})]}),e.jsxs(o,{value:"blog",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blog Posts"}),e.jsxs(l,{onClick:()=>x("blog"),className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"New Post"]})]}),e.jsxs("div",{className:"grid gap-4",children:[g.map(s=>{var a;return e.jsxs(C,{className:"bg-white/80 backdrop-blur-sm",children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["By ",s.author_name," â€¢ ",s.published_date]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:s.status==="published"?"default":"secondary",children:s.status}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>y(s,"blog"),children:e.jsx(q,{className:"w-3 h-3"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>w(s,"blog"),children:e.jsx(L,{className:"w-3 h-3"})})]})]})}),e.jsx(S,{className:"pt-0",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:(a=s.tags)==null?void 0:a.map(c=>e.jsx(r,{variant:"outline",className:"text-xs",children:c},c))})})]},s.id)}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No blog posts created yet"}),e.jsx(l,{onClick:()=>x("blog"),className:"mt-4",children:"Write First Post"})]})]})]}),e.jsx(o,{value:"pricing",children:e.jsx(he,{plans:f,onUpdate:i})}),e.jsx(o,{value:"testimonials",children:e.jsx(ue,{testimonials:N,onUpdate:i})}),e.jsx(o,{value:"faqs",children:e.jsx(ge,{faqs:b,onUpdate:i})})]}),Q&&e.jsx(me,{page:v,onClose:()=>{d(!1),n(null)},onSave:()=>{i(),d(!1),n(null)}}),Y&&e.jsx(xe,{post:v,onClose:()=>{m(!1),n(null)},onSave:()=>{i(),m(!1),n(null)}})]})})}export{Me as default};
