var Te=t=>{throw TypeError(t)};var he=(t,s,r)=>s.has(t)||Te("Cannot "+r);var a=(t,s,r)=>(he(t,s,"read from private field"),r?r.call(t):s.get(t)),N=(t,s,r)=>s.has(t)?Te("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),g=(t,s,r,i)=>(he(t,s,"write to private field"),i?i.call(t,r):s.set(t,r),r),y=(t,s,r)=>(he(t,s,"access private method"),r);import{S as mt,p as Oe,e as T,s as ue,f as se,n as xe,i as fe,h as De,t as ut,k as ce,l as xt,m as ft,o as Ue,q as He,r as h,v as pt,w as gt,j as e,x as bt,B as Q,u as yt}from"./index-mS-oSdc3.js";import{User as vt}from"./entities-BF_CoRhL.js";import{I as jt}from"./input-Bkus0_ND.js";import{c as Pe}from"./index-A7ElDbZk.js";import{g as Nt,s as St}from"./api-D2jz4TGc.js";import{C as Ve}from"./circle-alert-H36kJ4hq.js";import{B as Ke,A as wt,C as Ct,c as _t}from"./CompanyDetailModal-D_fiUB47.js";import{B as qe}from"./badge-CDa-iXWq.js";import{m as Ce}from"./proxy-BfNiE-mU.js";import{B as pe}from"./building-2-DWNAG0dh.js";import{T as Ge}from"./trending-up-B4LeUx1W.js";import{C as We}from"./calendar-DNW1DDwo.js";import{S as Ze}from"./ship-BQU1Wyb5.js";import{L as Je}from"./loader-circle-DI0UMHzG.js";import{c as _e}from"./createLucideIcon-DcoDkscI.js";import{f as Xe,M as Ye}from"./format-COP7Wl0w.js";import{L as Rt}from"./list-DEpup2oy.js";import{C as Et}from"./dropdown-menu-EUoOYYI8.js";import{U as kt}from"./UpgradePrompt-B0mZzCE7.js";import"./functions-455Mi4iC.js";import{S as Qe}from"./search-Bvem8yyF.js";import"./base44Client-C-YMJfZQ.js";import"./dialog-UH3d8gdY.js";import"./index-BOURCouW.js";import"./Combination-C8QHqDoa.js";import"./index-B08yBNKK.js";import"./tabs-0b5LKHO0.js";import"./index-BuDpusLy.js";import"./truck-BEzq9yZb.js";import"./select-Clk-UEvl.js";import"./label-C5dQUcMP.js";import"./plus-CXPFPuM9.js";import"./textarea-4Osxv8iG.js";import"./users-C7iSSSA9.js";import"./message-square-nMyOHXty.js";import"./trash-2-1epVR82g.js";import"./planLimits-C4PMM81i.js";import"./zap-CGE1zkt3.js";import"./arrow-right-yU0Ylf7p.js";var R,m,re,C,K,Z,P,L,ae,J,X,q,G,B,Y,x,te,ge,be,ye,ve,je,Ne,Se,et,$e,It=($e=class extends mt{constructor(s,r){super();N(this,x);N(this,R);N(this,m);N(this,re);N(this,C);N(this,K);N(this,Z);N(this,P);N(this,L);N(this,ae);N(this,J);N(this,X);N(this,q);N(this,G);N(this,B);N(this,Y,new Set);this.options=r,g(this,R,s),g(this,L,null),g(this,P,Oe()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,m).addObserver(this),Ae(a(this,m),this.options)?y(this,x,te).call(this):this.updateResult(),y(this,x,ve).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return we(a(this,m),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return we(a(this,m),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,y(this,x,je).call(this),y(this,x,Ne).call(this),a(this,m).removeObserver(this)}setOptions(s){const r=this.options,i=a(this,m);if(this.options=a(this,R).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,a(this,m))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");y(this,x,Se).call(this),a(this,m).setOptions(this.options),r._defaulted&&!ue(this.options,r)&&a(this,R).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,m),observer:this});const o=this.hasListeners();o&&Le(a(this,m),i,this.options,r)&&y(this,x,te).call(this),this.updateResult(),o&&(a(this,m)!==i||T(this.options.enabled,a(this,m))!==T(r.enabled,a(this,m))||se(this.options.staleTime,a(this,m))!==se(r.staleTime,a(this,m)))&&y(this,x,ge).call(this);const l=y(this,x,be).call(this);o&&(a(this,m)!==i||T(this.options.enabled,a(this,m))!==T(r.enabled,a(this,m))||l!==a(this,B))&&y(this,x,ye).call(this,l)}getOptimisticResult(s){const r=a(this,R).getQueryCache().build(a(this,R),s),i=this.createResult(r,s);return Ft(this,i)&&(g(this,C,i),g(this,Z,this.options),g(this,K,a(this,m).state)),i}getCurrentResult(){return a(this,C)}trackResult(s,r){return new Proxy(s,{get:(i,o)=>(this.trackProp(o),r==null||r(o),o==="promise"&&!this.options.experimental_prefetchInRender&&a(this,P).status==="pending"&&a(this,P).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,o))})}trackProp(s){a(this,Y).add(s)}getCurrentQuery(){return a(this,m)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=a(this,R).defaultQueryOptions(s),i=a(this,R).getQueryCache().build(a(this,R),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(s){return y(this,x,te).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,C)))}createResult(s,r){var ee;const i=a(this,m),o=this.options,l=a(this,C),d=a(this,K),S=a(this,Z),n=s!==i?s.state:a(this,re),{state:b}=s;let c={...b},v=!1,f;if(r._optimisticResults){const w=this.hasListeners(),H=!w&&Ae(s,r),D=w&&Le(s,i,r,o);(H||D)&&(c={...c,...ft(b.data,s.options)}),r._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:F,errorUpdatedAt:O,status:j}=c;f=c.data;let M=!1;if(r.placeholderData!==void 0&&f===void 0&&j==="pending"){let w;l!=null&&l.isPlaceholderData&&r.placeholderData===(S==null?void 0:S.placeholderData)?(w=l.data,M=!0):w=typeof r.placeholderData=="function"?r.placeholderData((ee=a(this,X))==null?void 0:ee.state.data,a(this,X)):r.placeholderData,w!==void 0&&(j="success",f=Ue(l==null?void 0:l.data,w,r),v=!0)}if(r.select&&f!==void 0&&!M)if(l&&f===(d==null?void 0:d.data)&&r.select===a(this,ae))f=a(this,J);else try{g(this,ae,r.select),f=r.select(f),f=Ue(l==null?void 0:l.data,f,r),g(this,J,f),g(this,L,null)}catch(w){g(this,L,w)}a(this,L)&&(F=a(this,L),f=a(this,J),O=Date.now(),j="error");const E=c.fetchStatus==="fetching",A=j==="pending",z=j==="error",$=A&&E,ie=f!==void 0,k={status:j,fetchStatus:c.fetchStatus,isPending:A,isSuccess:j==="success",isError:z,isInitialLoading:$,isLoading:$,data:f,dataUpdatedAt:c.dataUpdatedAt,error:F,errorUpdatedAt:O,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>n.dataUpdateCount||c.errorUpdateCount>n.errorUpdateCount,isFetching:E,isRefetching:E&&!A,isLoadingError:z&&!ie,isPaused:c.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:z&&ie,isStale:Re(s,r),refetch:this.refetch,promise:a(this,P),isEnabled:T(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const w=V=>{k.status==="error"?V.reject(k.error):k.data!==void 0&&V.resolve(k.data)},H=()=>{const V=g(this,P,k.promise=Oe());w(V)},D=a(this,P);switch(D.status){case"pending":s.queryHash===i.queryHash&&w(D);break;case"fulfilled":(k.status==="error"||k.data!==D.value)&&H();break;case"rejected":(k.status!=="error"||k.error!==D.reason)&&H();break}}return k}updateResult(){const s=a(this,C),r=this.createResult(a(this,m),this.options);if(g(this,K,a(this,m).state),g(this,Z,this.options),a(this,K).data!==void 0&&g(this,X,a(this,m)),ue(r,s))return;g(this,C,r);const i=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!a(this,Y).size)return!0;const d=new Set(l??a(this,Y));return this.options.throwOnError&&d.add("error"),Object.keys(a(this,C)).some(S=>{const u=S;return a(this,C)[u]!==s[u]&&d.has(u)})};y(this,x,et).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&y(this,x,ve).call(this)}},R=new WeakMap,m=new WeakMap,re=new WeakMap,C=new WeakMap,K=new WeakMap,Z=new WeakMap,P=new WeakMap,L=new WeakMap,ae=new WeakMap,J=new WeakMap,X=new WeakMap,q=new WeakMap,G=new WeakMap,B=new WeakMap,Y=new WeakMap,x=new WeakSet,te=function(s){y(this,x,Se).call(this);let r=a(this,m).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(xe)),r},ge=function(){y(this,x,je).call(this);const s=se(this.options.staleTime,a(this,m));if(fe||a(this,C).isStale||!De(s))return;const i=ut(a(this,C).dataUpdatedAt,s)+1;g(this,q,ce.setTimeout(()=>{a(this,C).isStale||this.updateResult()},i))},be=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,m)):this.options.refetchInterval)??!1},ye=function(s){y(this,x,Ne).call(this),g(this,B,s),!(fe||T(this.options.enabled,a(this,m))===!1||!De(a(this,B))||a(this,B)===0)&&g(this,G,ce.setInterval(()=>{(this.options.refetchIntervalInBackground||xt.isFocused())&&y(this,x,te).call(this)},a(this,B)))},ve=function(){y(this,x,ge).call(this),y(this,x,ye).call(this,y(this,x,be).call(this))},je=function(){a(this,q)&&(ce.clearTimeout(a(this,q)),g(this,q,void 0))},Ne=function(){a(this,G)&&(ce.clearInterval(a(this,G)),g(this,G,void 0))},Se=function(){const s=a(this,R).getQueryCache().build(a(this,R),this.options);if(s===a(this,m))return;const r=a(this,m);g(this,m,s),g(this,re,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},et=function(s){He.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(a(this,C))}),a(this,R).getQueryCache().notify({query:a(this,m),type:"observerResultsUpdated"})})},$e);function Mt(t,s){return T(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Ae(t,s){return Mt(t,s)||t.state.data!==void 0&&we(t,s,s.refetchOnMount)}function we(t,s,r){if(T(s.enabled,t)!==!1&&se(s.staleTime,t)!=="static"){const i=typeof r=="function"?r(t):r;return i==="always"||i!==!1&&Re(t,s)}return!1}function Le(t,s,r,i){return(t!==s||T(i.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Re(t,r)}function Re(t,s){return T(s.enabled,t)!==!1&&t.isStaleByTime(se(s.staleTime,t))}function Ft(t,s){return!ue(t.getCurrentResult(),s)}var tt=h.createContext(!1),Tt=()=>h.useContext(tt);tt.Provider;function Ot(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Dt=h.createContext(Ot()),Ut=()=>h.useContext(Dt),Pt=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Qt=t=>{h.useEffect(()=>{t.clearReset()},[t])},At=({result:t,errorResetBoundary:s,throwOnError:r,query:i,suspense:o})=>t.isError&&!s.isReset()&&!t.isFetching&&i&&(o&&t.data===void 0||pt(r,[t.error,i])),Lt=t=>{if(t.suspense){const r=o=>o==="static"?o:Math.max(o??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...o)=>r(i(...o)):r(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Bt=(t,s)=>t.isLoading&&t.isFetching&&!s,zt=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,Be=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function $t(t,s,r){var c,v,f,F,O;const i=Tt(),o=Ut(),l=gt(),d=l.defaultQueryOptions(t);(v=(c=l.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||v.call(c,d),d._optimisticResults=i?"isRestoring":"optimistic",Lt(d),Pt(d,o),Qt(o);const S=!l.getQueryCache().get(d.queryHash),[u]=h.useState(()=>new s(l,d)),n=u.getOptimisticResult(d),b=!i&&t.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(j=>{const M=b?u.subscribe(He.batchCalls(j)):xe;return u.updateResult(),M},[u,b]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),h.useEffect(()=>{u.setOptions(d)},[d,u]),zt(d,n))throw Be(d,u,o);if(At({result:n,errorResetBoundary:o,throwOnError:d.throwOnError,query:l.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw n.error;if((F=(f=l.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||F.call(f,d,n),d.experimental_prefetchInRender&&!fe&&Bt(n,i)){const j=S?Be(d,u,o):(O=l.getQueryCache().get(d.queryHash))==null?void 0:O.promise;j==null||j.catch(xe).finally(()=>{u.updateResult()})}return d.notifyOnChangeProps?n:u.trackResult(n)}function Ht(t,s){return $t(t,It)}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],st=_e("BookmarkCheck",Vt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qt=_e("ChevronLeft",Kt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Wt=_e("LayoutGrid",Gt);function ze({className:t,...s}){return e.jsx("div",{className:bt("animate-pulse rounded-md bg-primary/10",t),...s})}function Zt(t){if(!t)return{};const s=t.data?t.data:t;return{origin_countries:Array.isArray(s.origin_countries)?s.origin_countries:[],destination_countries:Array.isArray(s.destination_countries)?s.destination_countries:[],modes:Array.isArray(s.modes)?s.modes:[]}}function Jt({onChange:t}){const[s,r]=h.useState({origins:[],destinations:[],modes:[]}),[i,o]=h.useState({origin:"",destination:"",mode:"",date_start:"",date_end:""}),{data:l,isLoading:d,error:S}=Ht({queryKey:["filter-options"],queryFn:()=>Nt(),staleTime:1e3*60*10});h.useEffect(()=>{if(l){const n=Zt(l);r({origins:n.origin_countries.sort(),destinations:n.destination_countries.sort(),modes:n.modes.sort()})}},[l]),h.useEffect(()=>{const n=setTimeout(()=>{t==null||t(i)},300);return()=>clearTimeout(n)},[i,t]);const u=(n,b)=>{o(c=>({...c,[n]:b}))};return S?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md my-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ve,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:["Could not load search filters. Please try again later. (",S.message||String(S),")"]})})]})}):d?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:Array.from({length:5}).map((n,b)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(ze,{className:"h-4 w-24"}),e.jsx(ze,{className:"h-10 w-full"})]},b))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origin Country"}),e.jsxs("select",{id:"origin",value:i.origin,onChange:n=>u("origin",n.target.value),disabled:d,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Origin"}),s.origins.map(n=>e.jsx("option",{value:n,children:n},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Country"}),e.jsxs("select",{id:"destination",value:i.destination,onChange:n=>u("destination",n.target.value),disabled:d,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Destination"}),s.destinations.map(n=>e.jsx("option",{value:n,children:n},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode"}),e.jsxs("select",{id:"mode",value:i.mode,onChange:n=>u("mode",n.target.value),disabled:d,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Any Mode"}),s.modes.map(n=>e.jsx("option",{value:n,children:n.charAt(0).toUpperCase()+n.slice(1)},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_start",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Start"}),e.jsx("input",{type:"date",id:"date_start",value:i.date_start,onChange:n=>u("date_start",n.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_end",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date End"}),e.jsx("input",{type:"date",id:"date_end",value:i.date_end,onChange:n=>u("date_end",n.target.value),className:"block w-full pl-3 pr-2 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]})}function Xt({company:t,onSelect:s,onSave:r,isSaving:i,isSaved:o,isNew:l,onStartOutreach:d,onDraftRFP:S,savingCompanyId:u}){const n=c=>c?c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(0)}K`:c.toLocaleString():"0",b=u===t.id;return e.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},className:"bg-white/90 backdrop-blur-sm rounded-2xl p-5 shadow-lg border border-gray-200/60 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>s(t),children:[l&&e.jsx("div",{className:"mb-3",children:e.jsx(qe,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:"New Shipper"})}),e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate text-lg mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsxs("span",{children:["ID: ",t.id]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 font-medium mb-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),"Shipments (12M)"]}),e.jsx("div",{className:"text-lg font-bold text-blue-900",children:n(t.shipments_12m)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-600 font-medium mb-1",children:[e.jsx(We,{className:"w-3 h-3"}),"Last Activity"]}),e.jsx("div",{className:"text-sm font-bold text-purple-900",children:t.last_seen?Xe(new Date(t.last_seen),"MMM d"):"N/A"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Route:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:t.top_route||"Various routes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Top Carrier:"}),e.jsx("span",{className:"font-medium text-gray-900 truncate flex-1",children:t.top_carrier||"Multiple carriers"})]})]}),e.jsxs("div",{className:"flex gap-2",onClick:c=>c.stopPropagation(),children:[e.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>r(t),disabled:b||o,className:"flex-1",children:[b&&e.jsx(Je,{className:"mr-2 h-3 w-3 animate-spin"}),o?e.jsx(st,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(Ke,{className:"w-3 h-3 mr-1"}),o?"Saved":"Save"]}),e.jsxs(Q,{size:"sm",onClick:()=>d(t),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Contact"]})]})]})}function Yt({company:t,onSelect:s,onSave:r,isSaving:i,isSaved:o,isNew:l,onStartOutreach:d,onDraftRFP:S,savingCompanyId:u,index:n=0}){const b=v=>v?v>=1e6?`${(v/1e6).toFixed(1)}M`:v>=1e3?`${(v/1e3).toFixed(0)}K`:v.toLocaleString():"0",c=u===t.id;return e.jsx(Ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:n*.05},className:"p-4 hover:bg-gray-50/80 transition-all duration-200 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>s(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:t.name}),l&&e.jsx(qe,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs",children:"New"})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsxs("span",{children:["ID: ",t.id]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[e.jsx(Ge,{className:"w-3 h-3"}),e.jsx("span",{children:"Shipments (12M):"})]}),e.jsx("span",{className:"font-bold text-blue-900",children:b(t.shipments_12m)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-purple-600 font-medium",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{children:"Last Activity:"})]}),e.jsx("span",{className:"font-bold text-purple-900",children:t.last_seen?Xe(new Date(t.last_seen),"MMM d"):"N/A"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 font-medium",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{children:"Top Route:"})]}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:t.top_route||"Various routes"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm mt-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Top Carrier:"}),e.jsx("span",{className:"ml-1 font-medium text-gray-900 truncate",children:t.top_carrier||"Multiple carriers"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:v=>v.stopPropagation(),children:[e.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>r(t),disabled:c||o,className:"hidden sm:inline-flex",children:[c&&e.jsx(Je,{className:"mr-2 h-3 w-3 animate-spin"}),o?e.jsx(st,{className:"w-3 h-3 mr-1 text-blue-600"}):e.jsx(Ke,{className:"w-3 h-3 mr-1"}),o?"Saved":"Save"]}),e.jsxs(Q,{size:"sm",onClick:()=>d(t),className:"bg-blue-600 hover:bg-blue-700 text-white hidden sm:inline-flex",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Contact"]})]})]})})}function es({searchResults:t,totalResults:s,isLoading:r,onCompanySelect:i,onSave:o,onStartOutreach:l,onDraftRFP:d,user:S,newShipperEvents:u,savedCompanyIds:n,savingCompanyId:b,viewMode:c,setViewMode:v,currentPage:f,totalPages:F,onPageChange:O}){const j=t&&t.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Search Results"}),!r&&e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Found ",Number(s||0).toLocaleString()," companies â€¢ Showing ",(t==null?void 0:t.length)||0," on this page"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsxs(Q,{size:"sm",variant:c==="grid"?"secondary":"ghost",onClick:()=>v("grid"),className:"h-8 px-3",children:[e.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Cards"]}),e.jsxs(Q,{size:"sm",variant:c==="list"?"secondary":"ghost",onClick:()=>v("list"),className:"h-8 px-3",children:[e.jsx(Rt,{className:"w-4 h-4 mr-1"}),"List"]})]}),F>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{variant:"outline",size:"sm",onClick:()=>O(f-1),disabled:f===1||r,className:"h-8",children:e.jsx(qt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 px-2",children:["Page ",f," of ",F]}),e.jsx(Q,{variant:"outline",size:"sm",onClick:()=>O(f+1),disabled:f>=F||r,className:"h-8",children:e.jsx(Et,{className:"h-4 w-4"})})]})]})]}),r?e.jsx("div",{className:`grid gap-4 md:gap-6 ${c==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:Array.from({length:12}).map((M,E)=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"})]})]},E))}):j?e.jsx("div",{className:`grid gap-4 md:gap-6 ${c==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:e.jsx(wt,{children:t.map(M=>{const E=M.company_id||M.id,A=b===E,z=n.has(E),$=u.includes(E);return c==="grid"?e.jsx(Xt,{company:M,onSelect:i,onSave:o,isSaving:A,isSaved:z,isNew:$,onStartOutreach:l,onDraftRFP:d,savingCompanyId:b},E):e.jsx(Yt,{company:M,onSelect:i,onSave:o,isSaving:A,isSaved:z,isNew:$,onStartOutreach:l,onDraftRFP:d,savingCompanyId:b},E)})})}):e.jsxs(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(Ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No results found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-sm mx-auto",children:"Try adjusting your search query or filters to find companies."})]})]})}const me=25;function Bs(){const t=yt(),[s,r]=h.useState(null),[i,o]=h.useState(""),[l,d]=h.useState({mode:"",origin:"",destination:"",date_start:null,date_end:null}),[S,u]=h.useState([]),[n,b]=h.useState(!1),[c,v]=h.useState(""),[f,F]=h.useState(null),[O,j]=h.useState(!1),[M,E]=h.useState(!1),[A,z]=h.useState(""),[$,ie]=h.useState(1),[ne,k]=h.useState(0),[ee,w]=h.useState(new Set),[H,D]=h.useState(null),[V,Ee]=h.useState(null),[rt,at]=h.useState("grid"),[ke,it]=h.useState(!1);h.useEffect(()=>{const p=setTimeout(()=>v(i),300);return()=>clearTimeout(p)},[i]),h.useEffect(()=>{ke&&le(1)},[c,l]);const Ie=h.useMemo(()=>Math.max(1,Math.ceil((ne||0)/me)),[ne]),Me=h.useCallback(async()=>{try{const p=await vt.me();r(p)}catch(p){console.error("Error loading user:",p)}},[]);h.useEffect(()=>{Me()},[Me]);const le=h.useCallback(async p=>{var W,oe;const I=p||1;b(!0),Ee(null),ie(I),it(!0);try{const U=(I-1)*me,de={q:i||void 0,origin:l.origin?[l.origin]:void 0,dest:l.destination?[l.destination]:void 0,mode:l.mode||void 0,startDate:l.date_start||void 0,endDate:l.date_end||void 0,limit:me,offset:U},_=await St(de),dt=Array.isArray(_==null?void 0:_.results)?_.results:((W=_==null?void 0:_.data)==null?void 0:W.items)||[],ht=typeof(_==null?void 0:_.total)=="number"?_.total:((oe=_==null?void 0:_.data)==null?void 0:oe.total)||0;u(dt),k(ht)}catch(U){console.error("Search error:",U),Ee("Search failed: "+((U==null?void 0:U.message)||"Unknown error")),u([]),k(0)}finally{b(!1)}},[i,l]),nt=h.useCallback(p=>{F(p),j(!0)},[]),Fe=async p=>{if(!s||H)return;const I=p.id;D(I);const W=new Set(ee),oe=W.has(I),U=new Set(W);oe||U.add(I),w(U);try{await _t({name:p.name,website:p.website||void 0,external_ref:String(I)})}catch(de){console.error("Failed to save company:",de),w(W),alert("Failed to save company. Please try again.")}finally{D(null)}},lt=p=>{const I=p.id;I&&t(Pe("EmailCenter?company_id="+I))},ot=p=>{const I=p.id;I&&t(Pe("RFPStudio?company_id="+I))},ct=p=>{p>=1&&p<=Ie&&!n&&le(p)};return e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 lg:mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:"Trade Intelligence Discovery"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Search companies by trade activity, routes, commodities, and shipping patterns"})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-4 md:p-6 mb-6 md:mb-8 border border-gray-200/60",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(jt,{value:i,onChange:p=>o(p.target.value),placeholder:"Search by company name or alias (e.g., UPS, Maersk)...",className:"pl-4 pr-12 py-3 text-base md:text-lg bg-gray-50 border-0 rounded-xl",onKeyDown:p=>{p.key==="Enter"&&le(1)}}),e.jsx(Qe,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsx(Q,{onClick:()=>le(1),disabled:n,className:"px-6 md:px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl",children:n?"Searching...":"Search"})]})}),e.jsx(Jt,{onChange:d}),V&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Search Error:"}),e.jsx("span",{children:V})]})}),ke?e.jsx(es,{searchResults:S,totalResults:ne,isLoading:n,onCompanySelect:nt,onSave:Fe,onStartOutreach:lt,onDraftRFP:ot,user:s,newShipperEvents:[],savedCompanyIds:ee,savingCompanyId:H,viewMode:rt,setViewMode:at,currentPage:$,totalPages:Ie,onPageChange:ct}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Search"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"Enter a company name or use the filters above to search for trade intelligence data."})]}),e.jsx(kt,{isOpen:M,onClose:()=>E(!1),feature:A,currentPlan:s==null?void 0:s.plan}),e.jsx(Ct,{company:f,isOpen:O,onClose:()=>j(!1),onSave:Fe,user:s})]})})}export{Bs as default};
